(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c345fef"],{"0251":function(e,t,s){"use strict";s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"b",(function(){return n})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return d}));var a=s("b775");function i(e){return Object(a.a)({url:"/admin/supplyCustomerList",method:"get",params:e})}function r(e){return Object(a.a)({url:"/supplyApp/supplyCustomerSave",method:"get",params:e})}function o(e){return Object(a.a)({url:"/admin/supplyCustomerImport",method:"post",data:e})}function n(e){return Object(a.a)({url:"/supplyApp/supplyCustomerDelete",method:"get",params:e})}function l(e){return Object(a.a)({url:"/supplyApp/supplyCustomerDetail",method:"get",params:e})}function d(e){return Object(a.a)({url:"/admin/orderSheetListBySupplyCustomerId",method:"get",params:e})}},1973:function(e,t,s){"use strict";s.d(t,"j",(function(){return i})),s.d(t,"o",(function(){return r})),s.d(t,"s",(function(){return o})),s.d(t,"b",(function(){return n})),s.d(t,"u",(function(){return l})),s.d(t,"r",(function(){return d})),s.d(t,"v",(function(){return c})),s.d(t,"w",(function(){return m})),s.d(t,"x",(function(){return p})),s.d(t,"t",(function(){return u})),s.d(t,"e",(function(){return h})),s.d(t,"f",(function(){return f})),s.d(t,"a",(function(){return b})),s.d(t,"d",(function(){return y})),s.d(t,"m",(function(){return g})),s.d(t,"n",(function(){return S})),s.d(t,"k",(function(){return w})),s.d(t,"l",(function(){return v})),s.d(t,"c",(function(){return j})),s.d(t,"p",(function(){return x})),s.d(t,"q",(function(){return k})),s.d(t,"i",(function(){return N})),s.d(t,"h",(function(){return C})),s.d(t,"g",(function(){return I}));var a=s("b775");function i(e){return Object(a.a)({url:"/supplyApp/priceSheetTypeList",method:"get",params:e})}function r(e){return Object(a.a)({url:"/admin/priceSheetList",method:"get",params:e})}function o(){return Object(a.a)({url:"/supplyApp/sheetTypeList",method:"get",params:{type:1}})}function n(){return Object(a.a)({url:"/supplyApp/exchangeRate",method:"get"})}function l(e){return Object(a.a)({url:"/supplyApp/specimenListSelect",method:"get",params:e})}function d(e){return Object(a.a)({url:"/supplyApp/sheetTypeAdd",method:"get",params:e})}function c(e){return Object(a.a)({url:"/supplyApp/specimenListSelectSearch",method:"get",params:e})}function m(){return Object(a.a)({url:"/admin/specimenListSelectType",method:"get"})}function p(e){return Object(a.a)({url:"/admin/specimenListSelectTypeAll",method:"get",params:e})}function u(e){return Object(a.a)({url:"/supplyApp/specimenAdvanceFilter",method:"get",params:e})}function h(e){return Object(a.a)({url:"/supplyApp/priceSheetDetail",method:"get",params:e})}function f(e){return Object(a.a)({url:"/supplyApp/priceSheetSave",method:"post",data:e})}function b(e){return Object(a.a)({url:"/supplyApp/priceSheetDelete",method:"get",params:e})}function y(){return Object(a.a)({url:"/supplyApp/permissionInfo",method:"get"})}function g(e){return Object(a.a)({url:"/admin/priceSheetUserList",method:"get",params:e})}function S(e){return Object(a.a)({url:"/supplyApp/priceSheetUserLookDetail",method:"get",params:e})}function w(e){return Object(a.a)({url:"/supplyApp/priceSheetUserDelete",method:"get",params:e})}function v(e){return Object(a.a)({url:"/supplyApp/priceSheetUserItemList",method:"get",params:e})}function j(e){return Object(a.a)({url:"/supplyApp/orderSheetByPriceSheet",method:"get",params:e})}function x(e){return Object(a.a)({url:"/supplyApp/sheetGenerate",method:"get",params:e})}function k(e){return Object(a.a)({url:"/supplyApp/sheetGenerateDetailImage",method:"get",params:e})}function N(e){return Object(a.a)({url:"/admin/priceSheetTimelineList",method:"get",params:e})}function C(e){return Object(a.a)({url:"/supplyApp/priceSheetTimelineDelete",method:"get",params:e})}function I(e){return Object(a.a)({url:"/supplyApp/priceSheetTimelineAdd",method:"get",params:e})}},"2dfb":function(e,t,s){"use strict";s.d(t,"p",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"s",(function(){return o})),s.d(t,"t",(function(){return n})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return d})),s.d(t,"d",(function(){return c})),s.d(t,"g",(function(){return m})),s.d(t,"u",(function(){return p})),s.d(t,"q",(function(){return u})),s.d(t,"r",(function(){return h})),s.d(t,"m",(function(){return f})),s.d(t,"k",(function(){return b})),s.d(t,"l",(function(){return y})),s.d(t,"e",(function(){return g})),s.d(t,"f",(function(){return S})),s.d(t,"h",(function(){return w})),s.d(t,"i",(function(){return v})),s.d(t,"j",(function(){return j})),s.d(t,"n",(function(){return x})),s.d(t,"o",(function(){return k}));var a=s("b775");function i(e){return Object(a.a)({url:"/admin/orderSheetList",method:"get",params:e})}function r(e){return Object(a.a)({url:"/supplyApp/orderSheetDelete",method:"get",params:e})}function o(){return Object(a.a)({url:"/supplyApp/sheetTypeList",method:"get",params:{type:2}})}function n(){return Object(a.a)({url:"/supplyApp/supplyCustomerSelectList",method:"get"})}function l(){return Object(a.a)({url:"/supplyApp/orderNoAutoGenerate",method:"get"})}function d(e){return Object(a.a)({url:"/supplyApp/orderSheetSave",method:"post",data:e})}function c(e){return Object(a.a)({url:"/supplyApp/orderSheetDetail",method:"get",params:e})}function m(e){return Object(a.a)({url:"/supplyApp/orderSheetItemPcsNumSave",method:"get",params:e})}function p(e){return Object(a.a)({url:"/supplyApp/orderSheetProgressUpdate",method:"get",params:e})}function u(e){return Object(a.a)({url:"/supplyApp/sheetGenerate",method:"get",params:e})}function h(e){return Object(a.a)({url:"/supplyApp/sheetGenerateDetailImage",method:"get",params:e})}function f(e){return Object(a.a)({url:"/admin/orderSheetTimelineList",method:"get",params:e})}function b(e){return Object(a.a)({url:"/supplyApp/orderSheetTimelineAdd",method:"get",params:e})}function y(e){return Object(a.a)({url:"/supplyApp/orderSheetTimelineDelete",method:"get",params:e})}function g(e){return Object(a.a)({url:"/supplyApp/orderSheetExceptionHandle",method:"get",params:e})}function S(e){return Object(a.a)({url:"/supplyApp/orderSheetExceptionSave",method:"post",params:e})}function w(e){return Object(a.a)({url:"/supplyApp/orderSheetItemSendSave",method:"post",params:e})}function v(e){return Object(a.a)({url:"/supplyApp/orderSheetSendAll",method:"post",params:e})}function j(e){return Object(a.a)({url:"/supplyApp/orderSheetSubmitCreditInfo",method:"post",params:e})}function x(e){return Object(a.a)({url:"/supplyApp/purchaseSheetByOrderSheet",method:"post",params:e})}function k(e){return Object(a.a)({url:"admin/purchaseSheetListByOrderSheetId",method:"post",params:e})}},"3afa":function(e,t,s){"use strict";s("7fa0")},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c96","./es-us.js":"55c96","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="4678"},"7ec2":function(e,t,s){"use strict";s("caad");var a=s("daa0"),i=s("2934"),r=s("d215"),o=s("2dfb"),n=s("c1df"),l=s.n(n),d=s("0251"),c=s("1973");const m=[{name:"specimenType",fixed:!0,ch:"样品分类"},{name:"specimenCount",fixed:!0,ch:"样品数量"}];m.push({name:"operation",fixed:"right",ch:"操作",width:250,align:"center",btnList:[{value:1,name:"选择分类样品"}]});const p=[{name:"image",fixed:!0,ch:"图片"},{name:"fullName",fixed:!0,ch:"全品名"},{name:"factoryNo",fixed:!0,ch:"货号"},{name:"pack",fixed:!0,ch:"包装"},{name:"pcsNum",fixed:!0,ch:"装箱数"},{name:"volume",fixed:!0,ch:"体积"},{name:"moq",fixed:!0,ch:"起订量"},{name:"price",fixed:!0,ch:"单价"}];var u={name:"LingyiTradeWebSelectspecimen",props:["addShow","formType"],data:()=>({lables:m,detailLables:p,disabled:!1,isShowSearch:!0,formTitle:"选择样品分类",key:"",handleSelectAddList:[],multipleSelection:[],multipleDetailSelection:[],specimenTitle:"",spceimenDetailShow:!1,specimenTypeId:"",detailKey:"",handleDetailtAddList:[],queryResultList:[]}),watch:{addShow(e){e&&(3==this.formType?this.disabled=!0:this.disabled=!1,this.specimenListSelectType())}},mounted(){},methods:{getSummaries(e){const{columns:t,data:s}=e,a=[];return t.forEach(((e,t)=>{if(2!=t)if(3==t){let e=0;this.multipleSelection.forEach((t=>{e+=Number(t.specimenCount)})),a[t]=e+"个样品"}else a[t]="";else a[t]="已选中"})),a},handleClose(){this.$emit("update:addShow",!1)},addConform(){let e=[];this.multipleSelection.forEach((t=>{e.push(t.specimenTypeId)}));const t={specimenTypeIds:e.join(",")};console.log(t),Object(c.x)(t).then((e=>{this.$emit("addConform",e)}))},specimenListSelectType(){Object(c.w)().then((e=>{e&&(this.handleSelectAddList=e)}))},handleCloseDetail(){this.spceimenDetailShow=!1},addDetailConform(){this.handleCloseDetail(),this.$emit("addConform",this.multipleDetailSelection)},specimenListSelect(){Object(c.u)().then((e=>{}))},handleSelectionChange(e){console.log(e),this.multipleSelection=e},hanldeClick(e,t){if(1==e){console.log(t),this.isShowSearch=!0,this.specimenTypeId=t.specimenTypeId,this.specimenTitle=t.specimenType,this.spceimenDetailShow=!0;const e={specimenTypeId:this.specimenTypeId};Object(c.u)(e).then((e=>{1==e.code&&(this.handleDetailtAddList=e.data.specimens)}))}},queryList(){this.spceimenDetailShow=!0,this.specimenTitle="选择样品",this.isShowSearch=!1;const e={key:this.key};Object(c.v)(e).then((e=>{1==e.code&&(this.handleDetailtAddList=e.data.specimens)}))},queryDetailList(){const e={key:this.detailKey,specimenTypeId:this.specimenTypeId};Object(c.u)(e).then((e=>{1==e.code&&(this.handleDetailtAddList=e.data.specimens)}))},handleDetailSelectionChange(e){console.log(e),this.multipleDetailSelection=e}}},h=u,f=s("2877"),b=Object(f.a)(h,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.formTitle,visible:e.addShow,"append-to-body":"",width:"60%","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.addShow=t}}},[t("div",{staticStyle:{display:"flex","justify-content":"start","align-items":"center","margin-bottom":"20px"}},[t("span",[e._v("关键字：")]),t("el-input",{staticStyle:{width:"220px","margin-right":"10px"},attrs:{placeholder:"请输入品名/工厂货号/编号搜索"},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),t("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryList}},[e._v("查询")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.handleSelectAddList,"tooltip-effect":"dark",height:"400",border:"","summary-method":e.getSummaries,"show-summary":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"}}),e._l(e.lables,(function(s,a){return t("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"card"!=s.name,label:s.ch,prop:s.name,fixed:s.fixed,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",["operation"==s.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},e._l(s.btnList,(function(s,i){return t("el-button",{key:i,attrs:{type:"text",size:"small",disabled:e.disabled},on:{click:function(t){return e.hanldeClick(s.value,a.row)}}},[e._v(e._s(s.name))])})),1):"card"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a.row.card,"preview-src-list":[a.row.card]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",[e._v(" "+e._s(a.row[String(s.name)])+" ")])])]}}],null,!0)})}))],2),t("el-dialog",{attrs:{title:e.specimenTitle,visible:e.spceimenDetailShow,"append-to-body":"",width:"60%","close-on-click-modal":!1,"before-close":e.handleCloseDetail},on:{"update:visible":function(t){e.spceimenDetailShow=t}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSearch,expression:"isShowSearch"}],staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[t("span",[e._v("关键字：")]),t("el-input",{staticStyle:{margin:"0 10px",width:"250px"},attrs:{placeholder:"请输入品名/工厂货号/编号搜索"},model:{value:e.detailKey,callback:function(t){e.detailKey=t},expression:"detailKey"}}),t("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryDetailList}},[e._v("查询")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.handleDetailtAddList,"tooltip-effect":"dark",height:"400",border:""},on:{"selection-change":e.handleDetailSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"}}),e._l(e.detailLables,(function(s,a){return t("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"card"!=s.name,label:s.ch,prop:s.name,fixed:s.fixed,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",["operation"==s.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}}):"image"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a.row.image,"preview-src-list":[a.row.image]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",[e._v(" "+e._s(a.row[String(s.name)])+" ")])])]}}],null,!0)})}))],2),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCloseDetail}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addDetailConform}},[e._v("确 定")])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addConform}},[e._v("确 定")])],1)],1)}),[],!1,null,"966fb5c8",null),y=b.exports,g=(s("88e3"),s("eede"));let S=[{name:"image",fixed:!0,ch:"图片",width:"70"},{name:"fullName",fixed:!0,ch:"品名",width:"150"},{name:"factoryNo",fixed:!1,ch:"货号"},{name:"customerNo",fixed:!1,ch:"客户货号"},{name:"pack",fixed:!1,ch:"包装"},{name:"color",fixex:!1,ch:"颜色"},{name:"ctnsNum",fixex:!1,ch:"箱数"},{name:"pcsNum",fixex:!1,ch:"装箱数"},{name:"price",fixex:!1,ch:"单价"},{name:"volume",fixex:!1,ch:"体积"},{name:"boxWeight",fixex:!1,ch:"毛重"},{name:"totalBoxWeight",fixex:!1,ch:"总毛重"},{name:"totalNum",fixex:!1,ch:"总数量"},{name:"totalPrice",fixex:!1,ch:"总金额"},{name:"comment",fixex:!1,ch:"备注"},{name:"sendCtnsNum",fixex:!1,ch:"送货状态"},{name:"sendOperation",fixex:!1,ch:"操作"}];const w={name:"operation",fixed:"right",ch:"操作",width:80,align:"center",btnList:[{value:1,name:"上移"},{value:2,name:"下移"},{value:3,name:"置顶"},{value:4,name:"置底"},{value:5,name:"删除"}]},v=[{name:"image",fixed:!0,ch:"图片",width:"70"}];v.push(w),S.push(w);const j={orderSheetId:"",priceSheetId:"",supplyCustomerId:"",orderName:"",orderNo:"",contractName:"",language:"",orderDate:"",receiveDate:"",address:"",orderMoney:"",prePaymentDay:"",sheetTypeId:"",comment:"",frontMark:"",frontMarkImage:"",sideMark:"",sideMarkImage:"",paster:"",pasterImage:"",customerLogo:"",customerLogoImage:"",permissionType:"",permissionUserIds:"",items:[],images:[]},x={name:"",card:"",businessType:"",contractName:"",phone:"",contractPhone:"",wechat:"",qq:"",address:"",paymentDay:"",comment:"",images:"",totalEvaluateStar:0,companyScaleStar:0,payConditionStar:0,supplyFactoryId:""};var k={props:["addShow","orderSheetId","formType","defaultTitle","defaultForm"],components:{selectspaciment:y},mixins:[r.a,a.a],data:()=>({ctnsNum:"",showCommentImage:!1,commentImageList:[],orderSendType:"1",ctnsNum:"",senCtnsNum:"",reason:"",orderSendShow:!1,showChangePcsNum:!1,pcsNum:"",editIsDisabled:!1,isShowSumary:!0,specimenId:"",index:"",activeName:"first",canEditList:["factoryNo","customerNo","pack","color","ctnsNum","pcsNum","volume","moq","price","boxWeight","comment","changePcsNum"],addSupplyCustomerForm:JSON.parse(JSON.stringify(x)),addSupplyCustomerShow:!1,supplyCustomerformTitle:"新增客户",handleSelectAddList:[],imageShow:!0,lables2:v,imagesList:[],image:"",CustomerList:[],addForm:JSON.parse(JSON.stringify(j)),sheetTypeList:[],specimenAreaList:[],specimenTypeIds:[],primaryForm:{minPrice:"",maxPrice:"",specimenTypeIds:"",specimenAreaIds:"",specimenName:""},disabled:!1,specimenAreaIds:[],primaryShow:!1,addRules:{supplyCustomerId:[{required:!0,message:"请选择客户",trigger:"change"}],orderDate:[{required:!0,message:"请选择订货日期",trigger:"change"}]},addNewValue:"",formLabelWidth:"120px",formInline:{priceSheetId:""},selectSpecimenShow:!1,addNewShow:!1,tableInfo:{items:[]},options:[],selectTypeList:[],searchKey:"",languageList:["中文","英语","西语","阿拉伯语","俄语"],multipleSelection:[],specimenTypeList:[],formTitle:"",timerMark:null}),activated(){},filters:{},mounted(){this.priceSheetTypeList(),this.specimenListSelectType(),this.getSpecimenAreaList()},updata(){this.$nextTick((()=>{setTimeout((()=>{this.$refs.multipleTable.doLayout()}))}))},computed:{lables(){if(3==this.formType)return console.log({lables:S}),S;{let e=[];return S.forEach(((t,s)=>{"sendOperation"!==t.name&&"sendCtnsNum"!==t.name&&e.push(t)})),console.log({arr:e}),e}}},watch:{addShow(e){this.handleSelectAddList=[],e&&1!=this.formType?2==this.formType?(this.disabled=!1,window.isByFormType=!0,this.formTitle="编辑订货单",this.editIsDisabled=!1,this.orderSheetDetail({orderSheetId:this.orderSheetId})):3==this.formType?(this.disabled=!0,window.isByFormType=!1,this.editIsDisabled=!0,this.formTitle="订货单详情",this.orderSheetDetail({orderSheetId:this.orderSheetId})):4==this.formType?(window.isByFormType=!1,this.disabled=!1,this.editIsDisabled=!1,this.formTitle=this.defaultTitle||"复制订货单",this.orderSheetDetail({orderSheetId:this.orderSheetId},!0)):5==this.formType&&(this.disabled=!1,this.editIsDisabled=!1,window.isByFormType=!0,this.formTitle="新增订货单",this.initForm()):e&&(window.isByFormType=!0,this.formTitle="新增订货单",this.editIsDisabled=!1,this.addForm=JSON.parse(JSON.stringify(j)),this.addForm.orderDate=l()(new Date).format("YYYY-MM-DD"),this.addForm.language="中文",this.permissionType=["1"],this.handleSelectAddList=[],this.orderNoAutoGenerate()),this.supplyCustomerSelectList(),this.getsheetTypeList()},handleSelectAddList:{handler(e,t){clearTimeout(this.timerMark),this.timerMark=setTimeout((()=>{this.caculate()}),0)},deep:!0,immediate:!0}},methods:{conformSend(e){if(e){const e=/^-?[0-9]{1,}$/g.test(this.senCtnsNum)&&Number(this.senCtnsNum)>0&&Number(this.senCtnsNum)<Number(this.ctnsNum);if(2==this.orderSendType){if(!e)return this.$message.error("部分送货的箱数必须大于0且小于最大的订货箱数");Object(o.h)({orderSheetId:this.orderSheetId,specimenId:this.specimenId,sendCtnsNum:this.senCtnsNum,reason:this.reason}).then((e=>{1==e.code?(this.$message.success(e.message),this.orderSendShow=!1,this.orderSheetDetail({orderSheetId:this.orderSheetId})):this.$message.error(e.message)}))}else Object(o.h)({orderSheetId:this.orderSheetId,specimenId:this.specimenId,sendCtnsNum:"-1",reason:this.reason}).then((e=>{1==e.code?(this.$message.success(e.message),this.orderSendShow=!1,this.orderSheetDetail({orderSheetId:this.orderSheetId})):this.$message.error(e.message)}))}else this.orderSendShow=!1},conformPcsNum(e){if(e){if(!/^-?[0-9]{1,}$/g.test(this.pcsNum))return this.$message.error("只能输入整数");Object(o.g)({orderSheetId:this.orderSheetId,specimenId:this.specimenId,pcsNum:this.pcsNum}).then((e=>{1==e.code&&(this.$message.success(e.message),window.fn(this.pcsNum),setTimeout((()=>{this.caculate(),this.orderSheetDetail({orderSheetId:this.orderSheetId})})))})),this.showChangePcsNum=!1}else this.showChangePcsNum=!1},changePcsNum(e,t,s){console.log(e,t),window.fn=s,this.specimenId=e.specimenId,this.showChangePcsNum=!0,this.pcsNum=""},getSummaries(e){const{columns:t,data:s}=e,a=[];return t.forEach(((e,t)=>{if(1==t)a[t]="合计";else if(7==t){let e=0;this.handleSelectAddList.forEach((t=>{e+=Number(t.ctnsNum)})),a[t]=e}else if(10==t){let e=0;this.handleSelectAddList.forEach((t=>{e+=Number(t.volume)*Number(t.ctnsNum)})),a[t]=0==e.toFixed(3)?0:e.toFixed(3)}else if(14==t){let e=0;this.handleSelectAddList.forEach((t=>{e+=Number(t.ctnsNum*t.pcsNum*t.price)})),a[t]=0==e.toFixed(3)?0:e.toFixed(3)}else a[t]=""})),setTimeout((()=>{this.$nextTick((()=>{this.$refs.multipleTable.doLayout()}))})),a},handleShowPictureList(e,t){this.specimenId=t.specimenId,this.index=e,this.$refs.pictureslist.listShow=!0},setMain(e){this.handleSelectAddList[this.index].image=e},getDate(e){console.log(e,this.addForm.orderDate)},getCustomerName(e){this.CustomerList.forEach((t=>{e==t.supplyCustomerId&&(this.addForm.orderName=t.name)})),Object(i.s)({supplyCustomerId:e}).then((e=>{1==e.code&&(this.addForm.address=e.data.address,this.addForm.contractPhone=e.data.phone,this.addForm.contractName=e.data.contractName,this.addForm.prePaymentDay=e.data.prePaymentDay)}))},result:(e,t)=>["totalBoxWeight","totalNum","totalPrice"].includes(e)&&isNaN(t)?"":t,addSupplyCustomerConform(e,t){e?Object(d.a)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.addSupplyCustomerShow=!1,this.addSupplyCustomerForm=JSON.parse(JSON.stringify(x)),this.supplyCustomerSelectList(e.data.supplyCustomerId)):this.$message.error(e.message)})):(this.addSupplyCustomerShow=!1,this.addSupplyCustomerForm=JSON.parse(JSON.stringify(x)))},addSupplyCustomer(){this.addSupplyCustomerShow=!0},caculate(){this.handleSelectAddList.forEach((e=>{console.log("pcsNum",e.pcsNum,"changePcsNum",e.changePcsNum),e.totalNum=Number(e.ctnsNum)*Number(e.pcsNum),e.totalPrice=Number(e.ctnsNum)*Number(e.pcsNum)*Number(e.price),e.totalBoxWeight=Number(e.ctnsNum)*Number(e.boxWeight),e.totalPrice=0==e.totalPrice.toFixed(3)?0:e.totalPrice.toFixed(3)}))},initForm(){this.addForm=JSON.parse(JSON.stringify(j)),this.handleSelectAddList=[],Object.keys(this.addForm).forEach((e=>{this.defaultForm[e]&&(this.addForm[e]=this.defaultForm[e],"items"==e&&(this.defaultForm.items.forEach((e=>{void 0===e.commentImage&&(e.commentImage=void 0),void 0===e.ctnsNum&&(e.ctnsNum=""),e.sortIndex&&delete e.sortIndex})),this.handleSelectAddList.push(...this.defaultForm.items),this.imagesList=[],this.orderNoAutoGenerate()),"orderDate"==e&&(this.addForm.orderDate=l()(new Date).format("YYYY-MM-DD"),console.log("时间：",this.addForm.orderDate)))})),this.caculate()},getImgList(e,t,s){switch(console.log("图片上传",{V:e,L:t,type:s}),s){case 1:this.addForm.frontMarkImage=e;break;case 2:this.addForm.sideMarkImage=e;break;case 3:this.addForm.pasterImage=e;break;case 4:this.addForm.customerLogoImage=e;break;case 5:this.imageShow=!1,this.imagesList.push({image:e}),this.image="",setTimeout((()=>{this.imageShow=!0}));break;case 6:this.commentImageList.push({image:e})}},handleClick(){},supplyCustomerSelectList(e=!1){Object(o.t)().then((t=>{1==t.code&&(this.CustomerList=t.data.items,e&&setTimeout((()=>{this.addForm.supplyCustomerId=e,this.CustomerList.forEach((t=>{e==t.supplyCustomerId&&(this.addForm.orderName=t.name)}))})))}))},getsheetTypeList(e=!1){Object(o.s)().then((t=>{1==t.code&&(this.sheetTypeList=t.data,e&&this.sheetTypeList.forEach((t=>{t.sheetTypeId==e&&(this.addForm.sheetTypeId=e)})))}))},getSpecimenAreaList(){Object(g.g)().then((e=>{1==e.code&&(this.specimenAreaList=e.data.items)}))},orderNoAutoGenerate(){Object(o.c)().then((e=>{1==e.code&&(this.addForm.orderNo=e.data.orderNo)}))},primaryFilter(){this.primaryShow=!0},hanldeClick(e,t,s,a){let i;switch(1==a?i="handleSelectAddList":2==a&&(i="imagesList"),console.log(s),e){case 1:if(console.log("上移"),0!=s){const e=this[i].splice(s,1);this[i].splice(s-1,0,e[0])}break;case 2:if(console.log("下移"),s!=this[i].length-1){const e=this[i].splice(s,1);this[i].splice(s+1,0,e[0])}break;case 3:{console.log("置顶");const e=this[i].splice(s,1);this[i].unshift(e[0]);break}case 4:{console.log("置底");const e=this[i].splice(s,1);this[i].push(e[0]);break}case 5:console.log("删除"),this[i].splice(s,1);break;case 6:console.log("送货"),this.orderSendShow=!0,this.orderSendType="1",this.specimenId=t.specimenId,this.ctnsNum=t.ctnsNum,this.senCtnsNum="",this.reason=""}},conformPrimaryFilter(e){e?(this.primaryForm.specimenTypeIds=this.specimenTypeIds.join(","),this.primaryForm.specimenAreaIds=this.specimenAreaIds.join(","),Object(c.t)(this.primaryForm).then((e=>{1==e.code?(this.$message.success(e.message),this.addConformList(e.data.specimens)):this.$message.error(e.message),this.primaryShow=!1}))):(this.primaryShow=!1,this.primaryForm.specimenTypeIds="",this.primaryForm.specimenAreaIds="",this.primaryForm.specimenName="",this.primaryForm.maxPrice="",this.primaryForm.minPrice="",this.specimenTypeIds=[],this.specimenAreaIds=[])},addConformList(e){e=JSON.parse(JSON.stringify(e)),this.selectSpecimenShow=!1,e.forEach((e=>{let t=!1;this.handleSelectAddList.forEach((s=>{s.specimenId==e.specimenId&&(t=!0)})),void 0===e.commentImage&&(e.commentImage=""),t||(void 0===e.ctnsNum&&(e.ctnsNum=""),e.sortIndex&&delete e.sortIndex,console.log({item:e}),this.handleSelectAddList.push(e))})),this.caculate()},selectSpecimen(){this.selectSpecimenShow=!0},querySearchAsync(e,t){const s={key:this.searchKey};Object(c.v)(s).then((e=>{if(1==e.code){const s=e.data.specimens;s.map((e=>(e.value=e.specimenName,e))),t(s)}}))},addImg(){console.log(document.querySelector("#addimg")),document.querySelector("#addimg").click()},handleSelectAdd(e){e=JSON.parse(JSON.stringify(e));let t=!0;this.handleSelectAddList.forEach((s=>{s.specimenId==e.specimenId&&(t=!1)})),void 0===e.commentImage&&(e.commentImage=""),t&&(void 0===e.ctnsNum&&(e.ctnsNum=""),e.sortIndex&&delete e.sortIndex,console.log({item:e}),this.handleSelectAddList.push(e)),this.searchKey="",this.caculate()},handleSelectionChange(e){console.log(e),this.multipleSelection=e},conformAddNew(e){e?(this.addNewShow=!1,Object(c.r)({type:2,name:this.addNewValue}).then((e=>{1==e.code&&this.getsheetTypeList(e.data.sheetTypeId)}))):this.addNewShow=!1},priceSheetTypeList(){},specimenListSelectType(){Object(c.w)().then((e=>{e&&(this.specimenTypeList=e)}))},addNewType(){this.addNewShow=!0,this.addNewValue=""},addConform(){this.$refs.addForm.validate((e=>{if(e){if(!this.handleSelectAddList.length&&!this.imagesList.length)return this.$message.error("样品列表或者图片列表至少有一个数据");if(this.handleSelectAddList.length){const e=[{key:"ctnsNum",ch:"箱数",rule:/^\d+$/,isNeed:1,type:"整数"},{key:"pcsNum",ch:"装箱数",rule:/^\d+$/,isNeed:1,type:"整数"},{key:"price",ch:"单价",rule:/\d+\.?\d+/,isNeed:1,type:"小数"},{key:"volume",ch:"体积",rule:/\d+\.?\d+/,isNeed:0,type:"小数"},{key:"boxWeight",ch:"毛重",rule:/\d+\.?\d+/,isNeed:0,type:"小数"}];if(!this.$checkRules(this.handleSelectAddList,e))return}this.addForm.items=JSON.stringify(this.handleSelectAddList),this.addForm.images=JSON.stringify(this.imagesList),null==this.addForm.sheetTypeId&&(this.addForm.sheetTypeId=""),1==this.shareScopeEnd.toString()?this.addForm.permissionType=1:2==this.shareScopeEnd.toString()?this.addForm.permissionType=2:(this.addForm.permissionType=3,this.addForm.permissionUserIds=this.shareScopeEnd.join(",")),console.log(this.addForm),this.$emit("addConform",1,this.addForm)}}))},orderSheetDetail(e,t=!1){Object(o.d)(e).then((e=>{if(this.handleSelectAddList=[],1==e.code){this.addForm=e.data;const t=e.data.items;t.forEach((e=>{void 0===e.commentImage&&(e.commentImage=""),void 0===e.ctnsNum&&(e.ctnsNum=""),e.sortIndex&&delete e.sortIndex})),this.handleSelectAddList.push(...t),this.imagesList=[],this.imagesList.push(...e.data.images)}t&&(this.addForm.orderSheetId="",this.addForm.orderDate=l()(new Date).format("YYYY-MM-DD"),this.orderNoAutoGenerate(),this.initPermission())}))},handleClose(){this.$emit("update:addShow",!1)}}},N=k,C=(s("3afa"),Object(f.a)(N,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.formTitle,visible:e.addShow,"append-to-body":"",width:"90%","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.addShow=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"客户名称","label-width":e.formLabelWidth,prop:"supplyCustomerId"}},[t("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择客户",disabled:e.disabled,filterable:""},on:{change:e.getCustomerName},model:{value:e.addForm.supplyCustomerId,callback:function(t){e.$set(e.addForm,"supplyCustomerId",t)},expression:"addForm.supplyCustomerId"}},e._l(e.CustomerList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.name,value:e.supplyCustomerId}})})),1),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"el-icon-circle-plus-outline",staticStyle:{"font-size":"20px","line-height":"32px","vertical-align":"bottom","margin-left":"10px"},on:{click:e.addSupplyCustomer}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"订单编号","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disabled,placeholder:"请输入订单编号"},model:{value:e.addForm.orderNo,callback:function(t){e.$set(e.addForm,"orderNo",t)},expression:"addForm.orderNo"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"语言","label-width":e.formLabelWidth}},[t("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"请选择语言",disabled:e.disabled},model:{value:e.addForm.language,callback:function(t){e.$set(e.addForm,"language",t)},expression:"addForm.language"}},e._l(e.languageList,(function(e,s){return t("el-option",{key:s,attrs:{label:e,value:e}})})),1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"订货日期","label-width":e.formLabelWidth,prop:"orderDate"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",disabled:e.disabled,placeholder:"选择订货日期"},on:{change:e.getDate},model:{value:e.addForm.orderDate,callback:function(t){e.$set(e.addForm,"orderDate",t)},expression:"addForm.orderDate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"收货日期","label-width":e.formLabelWidth}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",disabled:e.disabled,placeholder:"选择订货日期"},model:{value:e.addForm.receiveDate,callback:function(t){e.$set(e.addForm,"receiveDate",t)},expression:"addForm.receiveDate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"定金","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disabled,placeholder:"请输入定金"},model:{value:e.addForm.orderMoney,callback:function(t){e.$set(e.addForm,"orderMoney",t)},expression:"addForm.orderMoney"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"收货地址","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disabled,placeholder:"请输入收货地址"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"联系电话","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disabled,placeholder:"请输入联系电话"},model:{value:e.addForm.contractPhone,callback:function(t){e.$set(e.addForm,"contractPhone",t)},expression:"addForm.contractPhone"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"账期","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disabled,placeholder:"请输入账期"},model:{value:e.addForm.prePaymentDay,callback:function(t){e.$set(e.addForm,"prePaymentDay",t)},expression:"addForm.prePaymentDay"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"分类","label-width":e.formLabelWidth,prop:"sheetTypeId"}},[t("div",{staticStyle:{display:"flex"}},[t("el-select",{attrs:{placeholder:"请选择分类",disabled:e.disabled},model:{value:e.addForm.sheetTypeId,callback:function(t){e.$set(e.addForm,"sheetTypeId",t)},expression:"addForm.sheetTypeId"}},e._l(e.sheetTypeList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.name,value:e.sheetTypeId}})})),1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:e.disabled},on:{click:e.addNewType}},[e._v("新增分类 ")])],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"联系人","label-width":e.formLabelWidth,prop:"contractName"}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disabled,placeholder:"请输入联系人"},model:{value:e.addForm.contractName,callback:function(t){e.$set(e.addForm,"contractName",t)},expression:"addForm.contractName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:20}},[t("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",disabled:e.disabled,placeholder:"请输入备注"},model:{value:e.addForm.comment,callback:function(t){e.$set(e.addForm,"comment",t)},expression:"addForm.comment"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"withimg"},[t("el-form-item",{attrs:{label:"正唛","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",disabled:e.disabled,placeholder:"请输入正唛"},model:{value:e.addForm.frontMark,callback:function(t){e.$set(e.addForm,"frontMark",t)},expression:"addForm.frontMark"}})],1),e.addShow?t("upload-img",{attrs:{disabled:e.disabled,value:e.addForm.frontMarkImage,dist:"orderSheet",multiple:!0,limit:1},on:{input:function(t){return e.getImgList(...arguments,1)}}}):e._e()],1)]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"withimg"},[t("el-form-item",{attrs:{label:"侧唛","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",disabled:e.disabled,placeholder:"请输入侧唛"},model:{value:e.addForm.sideMark,callback:function(t){e.$set(e.addForm,"sideMark",t)},expression:"addForm.sideMark"}})],1),e.addShow?t("upload-img",{attrs:{value:e.addForm.sideMarkImage,dist:"orderSheet",disabled:e.disabled,multiple:!0,limit:1},on:{input:function(t){return e.getImgList(...arguments,2)}}}):e._e()],1)])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"withimg"},[t("el-form-item",{attrs:{label:"贴纸","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",disabled:e.disabled,placeholder:"请输入贴纸"},model:{value:e.addForm.paster,callback:function(t){e.$set(e.addForm,"paster",t)},expression:"addForm.paster"}})],1),e.addShow?t("upload-img",{attrs:{value:e.addForm.pasterImage,disabled:e.disabled,dist:"orderSheet",multiple:!0,limit:1},on:{input:function(t){return e.getImgList(...arguments,3)}}}):e._e()],1)]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"withimg"},[t("el-form-item",{attrs:{label:"客版Logo","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",disabled:e.disabled,placeholder:"请输入客版Logo"},model:{value:e.addForm.customerLogo,callback:function(t){e.$set(e.addForm,"customerLogo",t)},expression:"addForm.customerLogo"}})],1),e.addShow?t("upload-img",{attrs:{value:e.addForm.customerLogoImage,dist:"orderSheet",disabled:e.disabled,multiple:!0,limit:1},on:{input:function(t){return e.getImgList(...arguments,4)}}}):e._e()],1)])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"谁可以看","label-width":e.formLabelWidth,prop:"permissionType"}},[t("el-cascader",{attrs:{options:e.permissionTypeList,props:{multiple:!0,checkStrictly:!0,emitPath:!1},disabled:e.disabled},on:{change:e.handleChangePermissionType},model:{value:e.permissionType,callback:function(t){e.permissionType=t},expression:"permissionType"}})],1)],1)],1),t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"样品列表",name:"first"}},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.selectSpecimen}},[e._v("选择样品")]),t("el-autocomplete",{staticStyle:{"margin-left":"10px"},attrs:{disabled:e.disabled,"fetch-suggestions":e.querySearchAsync,placeholder:"请输入样品名称、工厂编号快捷添加",clearable:""},on:{select:e.handleSelectAdd},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.handleSelectAddList,"tooltip-effect":"dark",border:"",height:"400","summary-method":e.getSummaries,"show-summary":e.isShowSumary,"cell-class-name":({row:e,column:t,rowIndex:s,columnIndex:a})=>(e.index=s,t.index=a)},on:{"cell-click":e.tableCellClick,"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(e._s(s.$index+1))])]}}])}),e._l(e.lables,(function(s,a){return t("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"image"!=s.name,label:s.ch,prop:s.name,fixed:s.fixed,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",["operation"==s.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[t("el-dropdown",[t("span",{staticClass:"el-dropdown-link"},[e._v(" 操作"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(s.btnList,(function(s,a){return t("el-dropdown-item",{key:a},[t("el-button",{attrs:{type:"text",disabled:e.disabled,size:"small"},on:{click:function(t){return e.hanldeClick(s.value,i.row,i.$index,1)}}},[e._v(" "+e._s(s.name)+" ")])],1)})),1)],1)],1):"image"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:i.row.image},on:{click:function(t){return e.handleShowPictureList(a,i.row)}}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"ima ge-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):i.row.index===e.tableCellClickRowIndex&&i.column.index===e.tableCellClickColumnIndex?t("span",[t("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入内容…",disabled:!e.canEditList.includes(s.name)&&this.editIsDisabled,size:"mini",autofocusPcsNum:""},on:{blur:e.tableCellInputBlur},model:{value:i.row[String(s.name)],callback:function(t){e.$set(i.row,String(s.name),t)},expression:"scope.row[String(item.name)]"}})],1):"ctnsNum"==s.name?t("span",{staticStyle:{color:"#29d8d0","font-weight":"bold"}},[e._v(e._s(e.result(s.name,i.row[String(s.name)])))]):"sendOperation"==s.name?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.hanldeClick(6,i.row,i.$index,1)}}},[e._v(" 送货 ")]):"pcsNum"==s.name?t("span",{style:{display:"inline-block",borderBottom:3!=e.formType||""==i.row.changePcsNum?"1px solid":"1px solid red",color:3!=e.formType||""==i.row.changePcsNum?"#000":"red"}},[e._v(" "+e._s((i.row.pcsNum||0)+i.row.pcsNumUnit)+" ")]):"sendCtnsNum"==s.name?t("span",{style:{color:""===i.row.sendCtnsNum?"#ffba00":"-1"==i.row.sendCtnsNum?"green":"red"}},[e._v(" "+e._s(""===i.row.sendCtnsNum?"未送货":"-1"==i.row.sendCtnsNum?"全部送货":`已送货箱数：${i.row.sendCtnsNum},未送原因：${i.row.reason}`)+" ")]):t("span",[e._v(e._s(e.result(s.name,i.row[String(s.name)])))])],1)]}}],null,!0)})}))],2)],1),t("el-tab-pane",{attrs:{label:"图片列表",name:"second"}},[e.imageShow&&!e.disabled?t("upload-img",{attrs:{value:e.image,dist:"orderSheet",multiple:!1,limit:99,description:0},on:{input:function(t){return e.getImgList(...arguments,5)}}},[t("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"}},[e._v("添加图片")])],1):e._e(),t("el-table",{ref:"multipleTable2",staticStyle:{width:"100%"},attrs:{data:e.imagesList,"tooltip-effect":"dark",border:"",height:"400"}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"}}),e._l(e.lables2,(function(s,a){return t("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"image"!=s.name,label:s.ch,prop:s.name,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",["operation"==s.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},e._l(s.btnList,(function(s,i){return t("el-button",{key:i,attrs:{type:"text",size:"small",disabled:e.disabled},on:{click:function(t){return e.hanldeClick(s.value,a.row,a.$index,2)}}},[e._v(e._s(s.name))])})),1):"image"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a.row.image,"preview-src-list":[a.row.image]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",[e._v(" "+e._s(a.row[String(s.name)])+" ")])])]}}],null,!0)})}))],2)],1)],1),t("selectspaciment",{attrs:{addShow:e.selectSpecimenShow,formType:e.formType},on:{"update:addShow":function(t){e.selectSpecimenShow=t},"update:add-show":function(t){e.selectSpecimenShow=t},addConform:e.addConformList}})],1),3!=e.formType?t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addConform}},[e._v("确 定")])],1):e._e(),t("el-dialog",{attrs:{title:"新增分类",visible:e.addNewShow,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.addNewShow=t}}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",[e._v("分类名称：")]),t("el-input",{staticStyle:{width:"180px"},model:{value:e.addNewValue,callback:function(t){e.addNewValue=t},expression:"addNewValue"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformAddNew(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformAddNew(1)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"修改装箱数",visible:e.showChangePcsNum,width:"400px","append-to-body":""},on:{"update:visible":function(t){e.showChangePcsNum=t}}},[t("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入修改之后的装箱数"},model:{value:e.pcsNum,callback:function(t){e.pcsNum=t},expression:"pcsNum"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformPcsNum(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformPcsNum(1)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"送货",visible:e.orderSendShow,width:"400px","append-to-body":""},on:{"update:visible":function(t){e.orderSendShow=t}}},[t("div",[t("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[t("span",[e._v("订货箱数：")]),t("el-input",{staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.ctnsNum,callback:function(t){e.ctnsNum=t},expression:"ctnsNum"}})],1),t("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[t("span",{staticStyle:{"margin-left":"28px"}},[e._v("类型：")]),t("div",[t("el-radio",{attrs:{label:"1"},model:{value:e.orderSendType,callback:function(t){e.orderSendType=t},expression:"orderSendType"}},[e._v("全部送货")]),t("el-radio",{attrs:{label:"2"},model:{value:e.orderSendType,callback:function(t){e.orderSendType=t},expression:"orderSendType"}},[e._v("部分送货")])],1)]),2==e.orderSendType?t("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[t("span",[e._v("送货箱数：")]),t("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"输入实际送货箱数"},model:{value:e.senCtnsNum,callback:function(t){e.senCtnsNum=t},expression:"senCtnsNum"}})],1):e._e(),2==e.orderSendType?t("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[t("span",[e._v("未送原因：")]),t("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"输入未送原因",type:"textarea"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1):e._e()]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformSend(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformSend(1)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"高级筛选",visible:e.primaryShow,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.primaryShow=t}}},[t("div",{staticClass:"primaryfilter"},[t("span",[e._v("价格区间：")]),t("el-input",{staticStyle:{width:"100px"},model:{value:e.primaryForm.minPrice,callback:function(t){e.$set(e.primaryForm,"minPrice",t)},expression:"primaryForm.minPrice"}}),t("span",{staticStyle:{width:"15px","text-align":"center"}},[e._v("-")]),t("el-input",{staticStyle:{width:"100px"},model:{value:e.primaryForm.maxPrice,callback:function(t){e.$set(e.primaryForm,"maxPrice",t)},expression:"primaryForm.maxPrice"}})],1),t("div",{staticClass:"primaryfilter"},[t("span",[e._v("分类：")]),t("el-select",{attrs:{multiple:"","collapse-tags":""},model:{value:e.specimenTypeIds,callback:function(t){e.specimenTypeIds=t},expression:"specimenTypeIds"}},e._l(e.specimenTypeList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.specimenType,value:e.specimenTypeId}})})),1)],1),t("div",{staticClass:"primaryfilter"},[t("span",[e._v("销往区域：")]),t("el-select",{attrs:{multiple:"","collapse-tags":""},model:{value:e.specimenAreaIds,callback:function(t){e.specimenAreaIds=t},expression:"specimenAreaIds"}},e._l(e.specimenAreaList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.name,value:e.specimenAreaId}})})),1)],1),t("div",{staticClass:"primaryfilter"},[t("span",[e._v("主品名：")]),t("el-input",{staticStyle:{width:"215px"},model:{value:e.primaryForm.specimenName,callback:function(t){e.$set(e.primaryForm,"specimenName",t)},expression:"primaryForm.specimenName"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformPrimaryFilter(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformPrimaryFilter(1)}}},[e._v("确 定")])],1)]),t("addform",{attrs:{addform:e.addSupplyCustomerForm,addShow:e.addSupplyCustomerShow,formTitle:e.supplyCustomerformTitle,dist:"supplyCustomer"},on:{addConform:e.addSupplyCustomerConform,"update:addShow":function(t){e.addSupplyCustomerShow=t},"update:add-show":function(t){e.addSupplyCustomerShow=t}}}),t("pictureslist",{ref:"pictureslist",attrs:{specimenId:e.specimenId},on:{setMain:e.setMain}})],1)}),[],!1,null,"637a73ca",null));t.a=C.exports},"7fa0":function(e,t,s){},"88e3":function(e,t,s){"use strict";s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"b",(function(){return n})),s.d(t,"d",(function(){return l})),s.d(t,"g",(function(){return d})),s.d(t,"c",(function(){return c}));var a=s("b775");function i(e){return Object(a.a)({url:"/admin/supplyFactoryList",method:"get",params:e})}function r(e){return Object(a.a)({url:"/supplyApp/supplyFactorySave",method:"get",params:e})}function o(e){return Object(a.a)({url:"/admin/supplyFactoryImport",method:"post",data:e})}function n(e){return Object(a.a)({url:"/supplyApp/supplyFactoryDelete",method:"get",params:e})}function l(e){return Object(a.a)({url:"/supplyApp/supplyFactoryDetail",method:"get",params:e})}function d(){return Object(a.a)({url:"/admin/supplyFactorySelectList",method:"get"})}function c(e){return Object(a.a)({url:"/admin/purchaseSheetListBySupplyFactoryId",method:"get",params:e})}},d215:function(e,t,s){"use strict";s("13d5");var a=s("1973");t.a={data:()=>({permissionTypeList:[{label:"所有成员可见",value:"1"},{label:"仅自己可见",value:"2"}],shareScopeEnd:[1],permissionType:[1],firstMark:!0}),watch:{addForm:{handler(e){1!=this.formType&&this.firstMark&&(this.firstMark=!1,this.initPermission())},deep:!0,immediate:!0}},created(){this.getPermission()},methods:{initPermission(){1==this.addForm.permissionType?this.permissionType=[1]:2==this.addForm.permissionType?this.permissionType=[2]:3==this.addForm.permissionType&&(this.permissionType=this.addForm.permissionUsers.reduce(((e,t)=>[...e,t.supplyUserId]),[]),this.shareScopeEnd=this.permissionType)},getPermission(){Object(a.d)().then((e=>{if(1==e.code){const t={label:"部分成员可见",value:"3",children:[]};e.data.users.forEach((e=>{const s={value:e.supplyUserId,label:e.name};t.children.push(s)})),this.permissionTypeList.push(t)}}))},handleChangePermissionType(e){let t=!1,s=null;0==this.shareScopeEnd.length?this.permissionType=e:this.permissionType.forEach((e=>{e[0]!==this.shareScopeEnd[0][0]&&(t=!0,s=e)})),t&&(this.permissionType=[],this.permissionType.push(s)),this.shareScopeEnd=this.permissionType,console.log(this.shareScopeEnd)}}}},daa0:function(e,t,s){"use strict";var a=s("91b6"),i=s("9b15"),r=s.n(i);const o="https://lingyisupply.oss-cn-hangzhou.aliyuncs.com/";t.a={data:()=>({editIsDisabled:!1,tableCellClickRowIndex:null,tableCellClickColumnIndex:null,URL:o,loaddate:null,timerObj:null}),methods:{tableCellClick(e,t,s,a){if(console.log(e.index,t.label),!window.isByFormType&&this.$route.path.indexOf("orderSheet")>-1&&"装箱数"==t.label){console.log("点击");const s=t=>{e.changePcsNum=t};this.changePcsNum(e,t,s)}else this.editIsDisabled||(this.tableCellClickRowIndex=e.index,this.tableCellClickColumnIndex=t.index,"备注图"==t.label&&setTimeout((()=>{const t=e.index+"-commentImage",s=document.getElementById(t);console.log({id:s}),s&&s.addEventListener("change",(function(e){var t=this.files[0],s=new FileReader;s.readAsDataURL(t),s.onload=function(){console.log(this.result)}}))})))},tableCellInputBlur(e,t,s){this.tableCellClickRowIndex=null,this.tableCellClickColumnIndex=null,this.caculate()},uploadImgRequest(e){return new Promise(((t,s)=>{Object(a.b)().then((a=>{if(a){let{accessKeyId:i,accessKeySecret:n,securityToken:l,expiration:d,bucket:c,region:m,urlPrefix:p}=a;this.URL=p||o;const u=new r.a({region:m,accessKeyId:i,accessKeySecret:n,stsToken:l,bucket:c}),h=e;this.gettimeDate();const f=this;if(console.log({files:h}),h.file){const a=h.file,i=this.dist+"/"+this.loaddate+"/"+this.loadtime+String(Math.random()).slice(2,7)+a.name.slice(a.name.lastIndexOf("."));u.put(i,a).then((function(s){console.log({r:s}),e.onSuccess(s),f.fileList.push({name:s.name,url:f.URL+s.name}),t(s)})).then((function(e){s(e)})).catch((function(e){s(e),console.error(e)}))}}}))}))},gettimeDate(){var e=new Date;this.loaddate=e.getFullYear()+"0"+(e.getMonth()+1)+e.getDate(),this.loadtime=e.getFullYear()+""+(e.getMonth()+1)+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()}}}}}]);