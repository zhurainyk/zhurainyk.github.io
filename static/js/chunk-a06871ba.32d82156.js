(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a06871ba"],{"297d":function(e,t,i){},"42f5":function(e,t,i){"use strict";i("9ea2")},"62c9":function(e,t,i){},"9ea2":function(e,t,i){},c478:function(e,t,i){"use strict";i.r(t);var o=i("778c"),s=i("91b6"),a=i("0251");let l={name:"",card:"",businessType:"",contractName:"",phone:"",wechat:"",qq:"",address:"",paymentDay:"",comment:"",images:"",totalEvaluateStar:0,companyScaleStar:0,payConditionStar:0,supplyFactoryId:""};var n={name:"btnlist",props:["selectedItemList"],data:()=>({baseURL:o.baseURL,formLabelWidth:"120px",addShow:!1,demoDialog:!1,formTitle:"",deleteShow:!1,batchImportShow:!1,currentName:"",addForm:JSON.parse(JSON.stringify(l)),addRules:{name:[{required:!0,message:"请输入全称",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}],shortName:[{required:!0,message:"请输入简称",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}]}}),methods:{importMuchShow(){this.demoDialog=!0,this.currentName=""},sendName(e){this.currentName=e},importMuch(){const e=this.loadFn("正在努力导入样品，可能需要几分钟，请耐心等待...");Object(a.f)(this.$refs.uploadfile.formData).then((t=>{1==t.code?(this.demoDialog=!1,this.currentName="",this.refresh(),this.$message.success(t.message)):this.$message.error(t.message),e.close()}),(()=>{e.close()}))},download(){Object(s.a)("/客户导入模板.xlsx","客户导入模板.xlsx").then((e=>{}))},add(){this.formTitle="新增客户",this.addShow=!0,this.addForm.card="",this.addForm=JSON.parse(JSON.stringify(l))},getImgList(e,t){console.log("图片上传",e,t,typeof t),console.log(typeof t.__ob__.value),this.addForm.card=e},getCommentImgList(e,t){console.log("图片上传",e,t,typeof t),console.log(typeof t.__ob__.value),this.addForm.images=e},addConform(e,t){e?Object(a.a)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.addShow=!1,this.addForm=JSON.parse(JSON.stringify(l)),this.$emit("refresh")):this.$message.error(e.message)})):(this.addShow=!1,this.addForm=JSON.parse(JSON.stringify(l)))},edit(){if(!this.selectedItemList.length)return this.$message.error("请勾选一个客户再操作");const{supplyCustomerId:e}=this.selectedItemList[0];Object(a.d)({supplyCustomerId:e}).then((e=>{1==e.code&&(this.addForm=e.data,this.addShow=!0,this.formTitle="编辑客户")}))},deleteItem(){this.deleteShow=!0},conformDelete(e){e&&this.selectedItemList.length>0?(console.log("删除"),console.log(e),this.deleteShow=!1,this.$emit("deleteConform")):this.$message.info("取消删除"),this.deleteShow=!1},refresh(){this.$emit("refresh")}}},r=n,d=(i("42f5"),i("2877")),c=Object(d.a)(r,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"btnlist"},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.edit}},[e._v("编辑")]),t("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.deleteItem}},[e._v("删除")]),t("el-button",{attrs:{type:"warning"},on:{click:e.importMuchShow}},[e._v("批量导入")]),t("el-button",{attrs:{type:"warning"},on:{click:e.download}},[e._v("下载模板")])],1),t("addform",{attrs:{addform:e.addForm,addShow:e.addShow,formTitle:e.formTitle,dist:"supplyCustomer"},on:{addConform:e.addConform}}),t("el-dialog",{attrs:{title:"提示",visible:e.deleteShow,width:"30%"},on:{"update:visible":function(t){e.deleteShow=t}}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),t("span",{staticClass:"conformdeltext"},[e._v("确认删除吗")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformDelete(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformDelete(1)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"批量导入",visible:e.demoDialog,"append-to-body":"",width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.demoDialog=t}}},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"选择文件"}},[t("upload-file",{ref:"uploadfile",attrs:{loadUrl:e.baseURL+"/admin/supplyCustomerImport",noParams:!0,fileKey:"excelFile"},on:{sendName:e.sendName}},[t("el-button",{attrs:{type:"primary"}},[e._v("上传文件")])],1),e.currentName?t("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.currentName))]):e._e()],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.importMuch}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.demoDialog=!1}}},[e._v("取消")])],1)],1)],1)}),[],!1,null,"01e1ba7c",null),m=c.exports,h={name:"search",data:()=>({dateArr:[],formInline:{key:"",page:1,rows:10,sortType:0},sortType:[{name:"按最近订货时间",value:0},{name:"按订货金额（高-低）",value:1},{name:"按订货次数（高-低）",value:2},{name:"按未付款金额（高-低）",value:3}]}),methods:{onSubmit(){this.$emit("search",this.formInline)},clearbox(){this.formInline={key:"",page:1,rows:10,sortType:0},this.$emit("search",this.formInline)}}},u=(i("cb93"),Object(d.a)(h,(function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"名称:"}},[t("el-input",{staticClass:"inputbox",attrs:{placeholder:""},model:{value:e.formInline.key,callback:function(t){e.$set(e.formInline,"key",t)},expression:"formInline.key"}})],1),t("el-form-item",{attrs:{label:"排序:"}},[t("el-select",{staticClass:"inputbox",staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:e.formInline.sortType,callback:function(t){e.$set(e.formInline,"sortType",t)},expression:"formInline.sortType"}},e._l(e.sortType,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.value}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearbox}},[e._v("清空")])],1)],1)],1)}),[],!1,null,"978f72b0",null)),p=u.exports,f=i("4d86"),b=i("7ec2");const g=[{name:"orderDate",fixed:!0,ch:"订货日期",width:"150"},{name:"receiveDate",fixed:!0,ch:"收货日期",width:"150"},{name:"orderNo",fixed:!0,ch:"订单编号",width:"150"},{name:"sheetTypeName",fixed:!1,ch:"分类",width:"100"},{name:"totalMoney",fixed:!1,ch:"总金额",width:"150"},{name:"actualMoney",fixex:!1,ch:"已收款",width:"150"},{name:"progressName",fixex:!1,ch:"状态",width:"120"},{name:"createName",fixex:!1,ch:"创建人"},{name:"createTime",fixex:!1,ch:"创建日期"}];g.push({name:"operation",fixed:"right",ch:"操作",width:120,align:"center",btnList:[{value:1,name:"详情"}]});var y={name:"tableList",components:{ordersheetform:b.a},props:{tableInfo:{type:Object,default:{items:[]}}},watch:{tableInfo:{handler(e){this.listQuery.pageNo=e.pageNo,this.listQuery.limit=e.pageSize},immediate:!0,deep:!0},multipleSelection:{handler(e){this.$emit("selectedItems",e)},immediate:!0,deep:!0}},data:()=>({orderSheetDetailShow:!1,orderSheetId:null,formType:0,detailShow:!1,supplyCustomerId:"",dialogVisible:!1,pictures:[],lables:g,multipleSelection:[],listQuery:{pageNo:1,limit:10}}),methods:{pageList(e){this.$emit("getList",e)},hanldeClick(e,t){if(1===(this.orderSheetId=t,e))this.orderSheetDetailShow=!0,this.formType=3},handleSelectionChange(e){console.log(e),this.multipleSelection=e},showPictures(e){let t=e.split(",");this.pictures=t,console.log(t),this.dialogVisible=!0},handleClose(){}}},w=y,S=(i("fadb"),Object(d.a)(w,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tablelist"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.items,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"}}),e._l(e.lables,(function(i,o){return t("el-table-column",{key:o,attrs:{"show-overflow-tooltip":!0,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("div",["operation"==i.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},e._l(i.btnList,(function(i,s){return t("el-button",{key:s,attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(i.value,o.row.orderSheetId)}}},[e._v(e._s(i.name))])})),1):t("div",[e._v(" "+e._s(o.row[String(i.name)])+" ")])])]}}],null,!0)})}))],2),t("el-dialog",{attrs:{title:"细节图","append-to-body":"",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap","justify-content":"center"}},e._l(e.pictures,(function(i){return t("el-image",{key:i,staticStyle:{width:"150px",height:"150px","margin-right":"10px","margin-bottom":"10px"},attrs:{src:i,lazy:!0}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])])})),1)]),t("ordersheetform",{attrs:{addShow:e.orderSheetDetailShow,orderSheetId:e.orderSheetId,formType:e.formType},on:{"update:addShow":function(t){e.orderSheetDetailShow=t},"update:add-show":function(t){e.orderSheetDetailShow=t}}})],1)}),[],!1,null,"392476ca",null)),v={props:["detailShow","supplyCustomerId"],components:{tablelist:S.exports},data:()=>({formInline:{supplyCustomerId:"",page:1,rows:10},tableInfo:{items:[]},options:[]}),watch:{detailShow(e){e&&this.queryList()}},methods:{queryList(){this.formInline.supplyCustomerId=this.supplyCustomerId,Object(a.c)(this.formInline).then((e=>{e.total&&(this.tableInfo={items:e.rows,total:e.total})}))},handleClose(){this.$emit("update:detailShow",!1)}}},I=v,x=Object(d.a)(I,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"订货详情",visible:e.detailShow,"append-to-body":"",width:"90%","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.detailShow=t}}},[t("tablelist",{attrs:{tableInfo:e.tableInfo}})],1)}),[],!1,null,"09e4a366",null),_=x.exports;const C=[{name:"name",fixed:!0,ch:"名称",width:"320"},{name:"card",fixed:!0,ch:"名片"},{name:"businessType",fixed:!0,ch:"经营类别"},{name:"contractName",fixed:!1,ch:"联系人"},{name:"phone",fixed:!1,ch:"联系电话",width:"220"},{name:"totalMoney",fixex:!1,fontWeight:"bold",ch:"订货总金额"},{name:"noPayMoney",fixex:!1,fontWeight:"bold",ch:"待收款"},{name:"payedMoney",fontWeight:"bold",fixex:!1,ch:"已付款"}];C.push({name:"operation",fixed:"right",ch:"操作",width:120,align:"center",btnList:[{value:1,name:"订货详情"}]});var k={name:"tableList",components:{pagination:f.a,detail:_},props:{tableInfo:{type:Object,default:{pageNo:1,pageSize:10,total:0,totalPage:0,rows:[]}}},watch:{tableInfo:{handler(e){this.listQuery.pageNo=e.pageNo,this.listQuery.limit=e.pageSize},immediate:!0,deep:!0},multipleSelection:{handler(e){this.$emit("selectedItems",e)},immediate:!0,deep:!0}},data:()=>({dialogVisible:!1,lables:C,listQuery:{pageNo:1,limit:10},supplyCustomerId:null,detailShow:!1,multipleSelection:[]}),methods:{pageList(e){console.log({queryPage:e}),this.$emit("getList",e)},handleSelectionChange(e){console.log(e),this.multipleSelection=e},hanldeClick(e,t){if(1===(console.log(e,t),e))this.detailShow=!0,this.supplyCustomerId=t},handleClose(){this.detailShow=!1}}},L=k,N=(i("cf04"),Object(d.a)(L,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tablelist"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.rows,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"}}),e._l(e.lables,(function(i,o){return t("el-table-column",{key:o,attrs:{"show-overflow-tooltip":"card"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"header",fn:function(o){return[t("div",[e._v(" "+e._s(i.ch)+" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待收款=订货总金额-已收款-扣款金额",placement:"top-start"}},["noPayMoney"==i.name?t("i",{staticClass:"el-icon-warning"}):e._e()])],1)]}},{key:"default",fn:function(o){return[t("div",["operation"==i.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},e._l(i.btnList,(function(i,s){return t("el-button",{key:s,attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(i.value,o.row.supplyCustomerId)}}},[e._v(e._s(i.name))])})),1):"card"==i.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:o.row.card,"preview-src-list":[o.row.card]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",{style:{fontWeight:i.fontWeight?i.fontWeight:"normal"}},[e._v(" "+e._s(o.row[String(i.name)])+" ")])])]}}],null,!0)})}))],2),t("pagination",{attrs:{total:e.tableInfo.total||0,page:e.listQuery.pageNo||0,limit:e.listQuery.limit||0},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo || 0",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit || 0",t)},pagination:e.pageList}}),t("detail",{attrs:{detailShow:e.detailShow,supplyCustomerId:e.supplyCustomerId},on:{"update:detailShow":function(t){e.detailShow=t},"update:detail-show":function(t){e.detailShow=t}}})],1)}),[],!1,null,"af380c62",null)),O={name:"supplyCustomer",components:{btnlist:m,search:p,tablelist:N.exports},data:()=>({tableInfo:{},formInline:{key:"",page:1,rows:10,sortType:0},selectedItemList:[]}),created(){this.search(this.formInline)},methods:{search(e){this.formInline=e,Object(a.e)(e).then((e=>{e&&(this.tableInfo=e)}))},selectedItems(e){console.log(e),this.selectedItemList=e},getList(e){this.formInline=Object.assign(this.formInline,e),this.search(this.formInline)},refresh(){this.search(this.formInline)},deleteConform(){const e=this.selectedItemList[0].supplyCustomerId;Object(a.b)({supplyCustomerId:e}).then((e=>{1==e.code?(this.$message.success(e.message),this.search(this.formInline)):this.$message.error(e.message)}))}},mounted(){}},T=O,$=Object(d.a)(T,(function(){var e=this,t=e._self._c;return t("div",[t("search",{on:{search:e.search}}),t("btnlist",{attrs:{selectedItemList:e.selectedItemList},on:{deleteConform:e.deleteConform,refresh:e.refresh}}),t("tablelist",{attrs:{tableInfo:e.tableInfo},on:{getList:e.getList,selectedItems:e.selectedItems}})],1)}),[],!1,null,"4cc0ab2f",null);t.default=$.exports},ca6d:function(e,t,i){},cb93:function(e,t,i){"use strict";i("ca6d")},cf04:function(e,t,i){"use strict";i("62c9")},fadb:function(e,t,i){"use strict";i("297d")}}]);