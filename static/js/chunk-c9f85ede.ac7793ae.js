(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c9f85ede"],{"07c1":function(e,t,n){"use strict";n("fe3b")},1973:function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"o",(function(){return o})),n.d(t,"s",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"u",(function(){return l})),n.d(t,"r",(function(){return c})),n.d(t,"v",(function(){return u})),n.d(t,"w",(function(){return p})),n.d(t,"x",(function(){return d})),n.d(t,"t",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return b})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return S})),n.d(t,"k",(function(){return I})),n.d(t,"l",(function(){return w})),n.d(t,"c",(function(){return v})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return O})),n.d(t,"i",(function(){return j})),n.d(t,"h",(function(){return _})),n.d(t,"g",(function(){return k}));var i=n("b775");function r(e){return Object(i.a)({url:"/supplyApp/priceSheetTypeList",method:"get",params:e})}function o(e){return Object(i.a)({url:"/admin/priceSheetList",method:"get",params:e})}function a(){return Object(i.a)({url:"/supplyApp/sheetTypeList",method:"get",params:{type:1}})}function s(){return Object(i.a)({url:"/supplyApp/exchangeRate",method:"get"})}function l(e){return Object(i.a)({url:"/supplyApp/specimenListSelect",method:"get",params:e})}function c(e){return Object(i.a)({url:"/supplyApp/sheetTypeAdd",method:"get",params:e})}function u(e){return Object(i.a)({url:"/supplyApp/specimenListSelectSearch",method:"get",params:e})}function p(){return Object(i.a)({url:"/admin/specimenListSelectType",method:"get"})}function d(e){return Object(i.a)({url:"/admin/specimenListSelectTypeAll",method:"get",params:e})}function m(e){return Object(i.a)({url:"/supplyApp/specimenAdvanceFilter",method:"get",params:e})}function h(e){return Object(i.a)({url:"/supplyApp/priceSheetDetail",method:"get",params:e})}function f(e){return Object(i.a)({url:"/supplyApp/priceSheetSave",method:"post",data:e})}function y(e){return Object(i.a)({url:"/supplyApp/priceSheetDelete",method:"get",params:e})}function b(){return Object(i.a)({url:"/supplyApp/permissionInfo",method:"get"})}function g(e){return Object(i.a)({url:"/admin/priceSheetUserList",method:"get",params:e})}function S(e){return Object(i.a)({url:"/supplyApp/priceSheetUserLookDetail",method:"get",params:e})}function I(e){return Object(i.a)({url:"/supplyApp/priceSheetUserDelete",method:"get",params:e})}function w(e){return Object(i.a)({url:"/supplyApp/priceSheetUserItemList",method:"get",params:e})}function v(e){return Object(i.a)({url:"/supplyApp/orderSheetByPriceSheet",method:"get",params:e})}function x(e){return Object(i.a)({url:"/supplyApp/sheetGenerate",method:"get",params:e})}function O(e){return Object(i.a)({url:"/supplyApp/sheetGenerateDetailImage",method:"get",params:e})}function j(e){return Object(i.a)({url:"/admin/priceSheetTimelineList",method:"get",params:e})}function _(e){return Object(i.a)({url:"/supplyApp/priceSheetTimelineDelete",method:"get",params:e})}function k(e){return Object(i.a)({url:"/supplyApp/priceSheetTimelineAdd",method:"get",params:e})}},"2dfb":function(e,t,n){"use strict";n.d(t,"p",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"s",(function(){return a})),n.d(t,"t",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"u",(function(){return d})),n.d(t,"q",(function(){return m})),n.d(t,"r",(function(){return h})),n.d(t,"m",(function(){return f})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return b})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return S})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return v})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return O}));var i=n("b775");function r(e){return Object(i.a)({url:"/admin/orderSheetList",method:"get",params:e})}function o(e){return Object(i.a)({url:"/supplyApp/orderSheetDelete",method:"get",params:e})}function a(){return Object(i.a)({url:"/supplyApp/sheetTypeList",method:"get",params:{type:2}})}function s(){return Object(i.a)({url:"/supplyApp/supplyCustomerSelectList",method:"get"})}function l(){return Object(i.a)({url:"/supplyApp/orderNoAutoGenerate",method:"get"})}function c(e){return Object(i.a)({url:"/supplyApp/orderSheetSave",method:"post",data:e})}function u(e){return Object(i.a)({url:"/supplyApp/orderSheetDetail",method:"get",params:e})}function p(e){return Object(i.a)({url:"/supplyApp/orderSheetItemPcsNumSave",method:"get",params:e})}function d(e){return Object(i.a)({url:"/supplyApp/orderSheetProgressUpdate",method:"get",params:e})}function m(e){return Object(i.a)({url:"/supplyApp/sheetGenerate",method:"get",params:e})}function h(e){return Object(i.a)({url:"/supplyApp/sheetGenerateDetailImage",method:"get",params:e})}function f(e){return Object(i.a)({url:"/admin/orderSheetTimelineList",method:"get",params:e})}function y(e){return Object(i.a)({url:"/supplyApp/orderSheetTimelineAdd",method:"get",params:e})}function b(e){return Object(i.a)({url:"/supplyApp/orderSheetTimelineDelete",method:"get",params:e})}function g(e){return Object(i.a)({url:"/supplyApp/orderSheetExceptionHandle",method:"get",params:e})}function S(e){return Object(i.a)({url:"/supplyApp/orderSheetExceptionSave",method:"post",params:e})}function I(e){return Object(i.a)({url:"/supplyApp/orderSheetItemSendSave",method:"post",params:e})}function w(e){return Object(i.a)({url:"/supplyApp/orderSheetSendAll",method:"post",params:e})}function v(e){return Object(i.a)({url:"/supplyApp/orderSheetSubmitCreditInfo",method:"post",params:e})}function x(e){return Object(i.a)({url:"/supplyApp/purchaseSheetByOrderSheet",method:"post",params:e})}function O(e){return Object(i.a)({url:"admin/purchaseSheetListByOrderSheetId",method:"post",params:e})}},"349d":function(e,t,n){"use strict";n("e662")},"38f7":function(e,t,n){"use strict";n("3f9f")},"3f9f":function(e,t,n){},6518:function(e,t,n){"use strict";n.r(t);var i=n("778c"),r=n("88e3"),o=n("91b6");let a={name:"",card:"",businessType:"",contractName:"",phone:"",wechat:"",qq:"",address:"",paymentDay:"",comment:"",images:"",totalEvaluateStar:0,companyScaleStar:0,payConditionStar:0,supplyFactoryId:""};var s={name:"btnlist",props:["selectedItemList"],data:()=>({baseURL:i.baseURL,formLabelWidth:"120px",demoDialog:!1,formTitle:"",currentName:"",addShow:!1,deleteShow:!1,batchImportShow:!1,currentName:"",addForm:JSON.parse(JSON.stringify(a)),addRules:{name:[{required:!0,message:"请输入全称",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}],shortName:[{required:!0,message:"请输入简称",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}]}}),methods:{importMuchShow(){this.demoDialog=!0,this.currentName=""},sendName(e){this.currentName=e},importMuch(){const e=this.loadFn("正在努力导入样品，可能需要几分钟，请耐心等待...");Object(r.f)(this.$refs.uploadfile.formData).then((t=>{1==t.code?(this.demoDialog=!1,this.currentName="",this.refresh(),this.$message.success(t.message)):this.$message.error(t.message),e.close()}),(()=>{e.close()}))},download(){Object(o.a)("/供应商导入模板.xlsx","供应商导入模板.xlsx").then((e=>{}))},add(){this.addShow=!0,this.formTitle="新增供应商",this.addForm.card="",this.addForm=JSON.parse(JSON.stringify(a))},sendName(e){this.currentName=e},getImgList(e,t){console.log("图片上传",e,t,typeof t),console.log(typeof t.__ob__.value),this.addForm.card=e},getCommentImgList(e,t){console.log("图片上传",e,t,typeof t),console.log(typeof t.__ob__.value),this.addForm.images=e},addConform(e,t){e?Object(r.a)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.addShow=!1,this.addForm=JSON.parse(JSON.stringify(a)),this.$emit("refresh")):this.$message.error(e.message)})):(this.addShow=!1,this.addForm=JSON.parse(JSON.stringify(a)))},edit(){if(!this.selectedItemList.length)return this.$message.error("请勾选一个供应商再操作");this.formTitle="编辑供应商";const{supplyFactoryId:e}=this.selectedItemList[0];Object(r.d)({supplyFactoryId:e}).then((e=>{1==e.code&&(this.addForm=e.data,this.addShow=!0)}))},deleteItem(){this.deleteShow=!0},conformDelete(e){e&&this.selectedItemList.length>0?(console.log("删除"),console.log(e),this.deleteShow=!1,this.$emit("deleteConform")):this.$message.info("取消删除"),this.deleteShow=!1},refresh(){this.$emit("refresh")}}},l=s,c=(n("07c1"),n("2877")),u=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"btnlist"},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.edit}},[e._v("编辑")]),t("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.deleteItem}},[e._v("删除")]),t("el-button",{attrs:{type:"warning"},on:{click:e.importMuchShow}},[e._v("批量导入")]),t("el-button",{attrs:{type:"warning"},on:{click:e.download}},[e._v("下载模板")])],1),t("addform",{attrs:{addform:e.addForm,addShow:e.addShow,formTitle:e.formTitle,dist:"supplyFactory",formConfig:{label:"供应商名称",key:"name"}},on:{addConform:e.addConform}}),t("el-dialog",{attrs:{title:"提示",visible:e.deleteShow,width:"30%"},on:{"update:visible":function(t){e.deleteShow=t}}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),t("span",{staticClass:"conformdeltext"},[e._v("确认删除吗")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformDelete(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformDelete(1)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"批量导入",visible:e.demoDialog,"append-to-body":"",width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.demoDialog=t}}},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"选择文件"}},[t("upload-file",{ref:"uploadfile",attrs:{loadUrl:e.baseURL+"/admin/supplyFactoryImport",noParams:!0,fileKey:"excelFile"},on:{sendName:e.sendName}},[t("el-button",{attrs:{type:"primary"}},[e._v("上传文件")])],1),e.currentName?t("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.currentName))]):e._e()],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.importMuch}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.demoDialog=!1}}},[e._v("取消")])],1)],1)],1)}),[],!1,null,"3c3d5ad6",null),p=u.exports,d={name:"search",data:()=>({dateArr:[],formInline:{key:"",page:1,rows:10,sortType:0},sortType:[{name:"按最近采购时间",value:0},{name:"按采购金额（高-低）",value:1},{name:"按采购次数（高-低）",value:2},{name:"按未结款金额（高-低）",value:3}]}),methods:{onSubmit(){this.$emit("search",this.formInline)},clearbox(){this.formInline={key:"",page:1,rows:10,sortType:0},this.$emit("search",this.formInline)}}},m=(n("38f7"),Object(c.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"名称:"}},[t("el-input",{staticClass:"inputbox",attrs:{placeholder:""},model:{value:e.formInline.key,callback:function(t){e.$set(e.formInline,"key",t)},expression:"formInline.key"}})],1),t("el-form-item",{attrs:{label:"排序:"}},[t("el-select",{staticClass:"inputbox",staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:e.formInline.sortType,callback:function(t){e.$set(e.formInline,"sortType",t)},expression:"formInline.sortType"}},e._l(e.sortType,(function(e,n){return t("el-option",{key:n,attrs:{label:e.name,value:e.value}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearbox}},[e._v("清空")])],1)],1)],1)}),[],!1,null,"67c96ed8",null)),h=m.exports,f=n("4d86");let y={mainName:"",supplierId:"",factoryNo:"",cutomerNo:""};var b={props:["options"],data:()=>({formInline:{mainName:"",supplierId:"",factoryNo:"",cutomerNo:"",meetingId:""}}),methods:{onSubmit(){this.$emit("search",this.formInline)},clearbox(){this.formInline=y,this.onSubmit()}}},g=Object(c.a)(b,(function(){var e=this,t=e._self._c;return t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"供应商:"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.supplierId,callback:function(t){e.$set(e.formInline,"supplierId",t)},expression:"formInline.supplierId"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"主品名:"}},[t("el-input",{model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),t("el-form-item",{attrs:{label:"工厂货号:"}},[t("el-input",{model:{value:e.formInline.factoryNo,callback:function(t){e.$set(e.formInline,"factoryNo",t)},expression:"formInline.factoryNo"}})],1),t("el-form-item",{attrs:{label:"客户编号:"}},[t("el-input",{model:{value:e.formInline.cutomerNo,callback:function(t){e.$set(e.formInline,"cutomerNo",t)},expression:"formInline.cutomerNo"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearbox}},[e._v("清空")])],1)],1)}),[],!1,null,"a4738e58",null),S=g.exports,I=n("d4a2");const w=[{name:"purchaseDate",fixed:!0,ch:"采购日期",width:"150"},{name:"receiveDate",fixed:!0,ch:"发货日期",width:"150"},{name:"orderNo",fixed:!0,ch:"订单编号",width:"100"},{name:"sheetTypeName",fixed:!1,ch:"分类",width:"100"},{name:"totalMoney",fixed:!1,ch:"总金额",width:"72"},{name:"payedMoney",fixex:!1,ch:"已结款"},{name:"progressName",fixex:!1,ch:"状态"},{name:"createName",fixex:!1,ch:"创建人"},{name:"createTime",fixex:!1,ch:"创建日期"}];w.push({name:"operation",fixed:"right",ch:"操作",width:120,align:"center",btnList:[{value:1,name:"详情"}]});var v={name:"tableList",components:{purchaseform:I.a},props:{tableInfo:{type:Object,default:{items:[]}}},watch:{tableInfo:{handler(e){this.listQuery.pageNo=e.pageNo,this.listQuery.limit=e.pageSize},immediate:!0,deep:!0}},data:()=>({detailShow:!1,supplyFactoryId:"",dialogVisible:!1,pictures:[],lables:w,listQuery:{pageNo:1,limit:10},formType:0,purchaseSheetId:null,purchaseDetailShow:!1}),methods:{hanldeClick(e,t){if(1===(this.purchaseSheetId=t,e))this.purchaseDetailShow=!0,this.formType=3},pageList(e){this.$emit("getList",e)},showPictures(e){let t=e.split(",");this.pictures=t,console.log(t),this.dialogVisible=!0},handleClose(){}}},x=v,O=(n("349d"),Object(c.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tablelist"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.items,"tooltip-effect":"dark",border:""}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"}}),e._l(e.lables,(function(n,i){return t("el-table-column",{key:i,attrs:{"show-overflow-tooltip":!0,label:n.ch,prop:n.name,fixed:n.fixed,width:n.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",["operation"==n.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},e._l(n.btnList,(function(n,r){return t("el-button",{key:r,attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(n.value,i.row.purchaseSheetId)}}},[e._v(e._s(n.name))])})),1):"card"==n.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:i.row.card,"preview-src-list":[i.row.card]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",[e._v(" "+e._s(i.row[String(n.name)])+" ")])])]}}],null,!0)})}))],2),t("pagination",{attrs:{total:e.tableInfo.total||0,page:e.listQuery.pageNo||0,limit:e.listQuery.limit||0},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo || 0",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit || 0",t)},pagination:e.pageList}}),t("el-dialog",{attrs:{title:"细节图","append-to-body":"",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap","justify-content":"center"}},e._l(e.pictures,(function(n){return t("el-image",{key:n,staticStyle:{width:"150px",height:"150px","margin-right":"10px","margin-bottom":"10px"},attrs:{src:n,lazy:!0}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])])})),1)]),t("purchaseform",{attrs:{addShow:e.purchaseDetailShow,purchaseSheetId:e.purchaseSheetId,formType:e.formType},on:{"update:addShow":function(t){e.purchaseDetailShow=t},"update:add-show":function(t){e.purchaseDetailShow=t}}})],1)}),[],!1,null,"785da26d",null)),j={props:["detailShow","supplyFactoryId"],components:{search:S,tablelist:O.exports},data:()=>({formInline:{supplyFactoryId:"",page:1,rows:10},tableInfo:{items:[]},options:[]}),watch:{detailShow(e){e&&this.queryList()}},methods:{queryList(){this.formInline.supplyFactoryId=this.supplyFactoryId,Object(r.c)(this.formInline).then((e=>{e.total&&(this.tableInfo={items:e.rows,total:e.total})}))},handleClose(){this.$emit("update:detailShow",!1)}}},_=j,k=Object(c.a)(_,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"采购详情",visible:e.detailShow,"append-to-body":"",width:"90%","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.detailShow=t}}},[t("tablelist",{attrs:{tableInfo:e.tableInfo}})],1)}),[],!1,null,"5ee0bd3c",null),C=k.exports;const L=[{name:"name",fixed:!0,ch:"名称",width:"320"},{name:"card",fixed:!0,ch:"名片"},{name:"businessType",fixed:!0,ch:"经营类别"},{name:"contractName",fixed:!1,ch:"联系人"},{name:"phone",fixed:!1,ch:"联系电话",width:"220"},{name:"totalMoney",fontWeight:"bold",fixex:!1,ch:"总采购金额"},{name:"noPayMoney",fixex:!1,fontWeight:"bold",ch:"待付款"},{name:"payedMoney",fixex:!1,fontWeight:"bold",ch:"已付款"}];L.push({name:"operation",fixed:"right",ch:"操作",width:120,align:"center",btnList:[{value:1,name:"采购详情"}]});var T={name:"tableList",components:{pagination:f.a,detail:C},props:{tableInfo:{type:Object,default:{pageNo:1,pageSize:10,total:0,totalPage:0,rows:[]}}},watch:{tableInfo:{handler(e){this.listQuery.pageNo=e.pageNo,this.listQuery.limit=e.pageSize},immediate:!0,deep:!0},multipleSelection:{handler(e){this.$emit("selectedItems",e)},immediate:!0,deep:!0}},data:()=>({dialogVisible:!1,lables:L,listQuery:{pageNo:1,limit:10},supplyFactoryId:null,detailShow:!1,multipleSelection:[]}),methods:{pageList(e){console.log({queryPage:e}),this.$emit("getList",e)},handleSelectionChange(e){console.log(e),this.multipleSelection=e},hanldeClick(e,t){if(1===(console.log(e,t),e))this.detailShow=!0,this.supplyFactoryId=t},handleClose(){this.detailShow=!1}}},N=T,A=(n("f11e"),Object(c.a)(N,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tablelist"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.rows,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"index",label:"序号",fixed:"",align:"center",width:"50"}}),e._l(e.lables,(function(n,i){return t("el-table-column",{key:i,attrs:{"show-overflow-tooltip":"card"!=n.name,label:n.ch,prop:n.name,fixed:n.fixed,width:n.width||"auto",align:"center"},scopedSlots:e._u([{key:"header",fn:function(i){return[t("div",[e._v(" "+e._s(n.ch)+" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待付款=总采购金额-已付款",placement:"top-start"}},["noPayMoney"==n.name?t("i",{staticClass:"el-icon-warning"}):e._e()])],1)]}},{key:"default",fn:function(i){return[t("div",["operation"==n.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},e._l(n.btnList,(function(n,r){return t("el-button",{key:r,attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(n.value,i.row.supplyFactoryId)}}},[e._v(e._s(n.name))])})),1):"card"==n.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:i.row.card,"preview-src-list":[i.row.card]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",{style:{fontWeight:n.fontWeight?n.fontWeight:"normal"}},[e._v(" "+e._s(i.row[String(n.name)])+" ")])])]}}],null,!0)})}))],2),t("pagination",{attrs:{total:e.tableInfo.total||0,page:e.listQuery.pageNo||0,limit:e.listQuery.limit||0},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo || 0",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit || 0",t)},pagination:e.pageList}}),t("detail",{attrs:{detailShow:e.detailShow,supplyFactoryId:e.supplyFactoryId},on:{"update:detailShow":function(t){e.detailShow=t},"update:detail-show":function(t){e.detailShow=t}}})],1)}),[],!1,null,"2ada1fe2",null)),F={name:"supplyFactory",components:{btnlist:p,search:h,tablelist:A.exports},data:()=>({tableInfo:{},formInline:{key:"",page:1,rows:10,sortType:0},selectedItemList:[]}),created(){this.search(this.formInline)},methods:{search(e){this.formInline=e,Object(r.e)(e).then((e=>{e&&(this.tableInfo=e)}))},selectedItems(e){console.log(e),this.selectedItemList=e},getList(e){this.formInline=Object.assign(this.formInline,e),this.search(this.formInline)},refresh(){this.search(this.formInline)},deleteConform(){const e=this.selectedItemList[0].supplyFactoryId;Object(r.b)({supplyFactoryId:e}).then((e=>{1==e.code?(this.$message.success(e.message),this.search(this.formInline)):this.$message.error(e.message)}))}},mounted(){}},D=F,$=Object(c.a)(D,(function(){var e=this,t=e._self._c;return t("div",[t("search",{on:{search:e.search}}),t("btnlist",{attrs:{selectedItemList:e.selectedItemList},on:{deleteConform:e.deleteConform,refresh:e.refresh}}),t("tablelist",{attrs:{tableInfo:e.tableInfo},on:{getList:e.getList,selectedItems:e.selectedItems}})],1)}),[],!1,null,"7415b285",null);t.default=$.exports},7406:function(e,t,n){},"88e3":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return u}));var i=n("b775");function r(e){return Object(i.a)({url:"/admin/supplyFactoryList",method:"get",params:e})}function o(e){return Object(i.a)({url:"/supplyApp/supplyFactorySave",method:"get",params:e})}function a(e){return Object(i.a)({url:"/admin/supplyFactoryImport",method:"post",data:e})}function s(e){return Object(i.a)({url:"/supplyApp/supplyFactoryDelete",method:"get",params:e})}function l(e){return Object(i.a)({url:"/supplyApp/supplyFactoryDetail",method:"get",params:e})}function c(){return Object(i.a)({url:"/admin/supplyFactorySelectList",method:"get"})}function u(e){return Object(i.a)({url:"/admin/purchaseSheetListBySupplyFactoryId",method:"get",params:e})}},d215:function(e,t,n){"use strict";n("13d5");var i=n("1973");t.a={data:()=>({permissionTypeList:[{label:"所有成员可见",value:"1"},{label:"仅自己可见",value:"2"}],shareScopeEnd:[1],permissionType:[1],firstMark:!0}),watch:{addForm:{handler(e){1!=this.formType&&this.firstMark&&(this.firstMark=!1,this.initPermission())},deep:!0,immediate:!0}},created(){this.getPermission()},methods:{initPermission(){1==this.addForm.permissionType?this.permissionType=[1]:2==this.addForm.permissionType?this.permissionType=[2]:3==this.addForm.permissionType&&(this.permissionType=this.addForm.permissionUsers.reduce(((e,t)=>[...e,t.supplyUserId]),[]),this.shareScopeEnd=this.permissionType)},getPermission(){Object(i.d)().then((e=>{if(1==e.code){const t={label:"部分成员可见",value:"3",children:[]};e.data.users.forEach((e=>{const n={value:e.supplyUserId,label:e.name};t.children.push(n)})),this.permissionTypeList.push(t)}}))},handleChangePermissionType(e){let t=!1,n=null;0==this.shareScopeEnd.length?this.permissionType=e:this.permissionType.forEach((e=>{e[0]!==this.shareScopeEnd[0][0]&&(t=!0,n=e)})),t&&(this.permissionType=[],this.permissionType.push(n)),this.shareScopeEnd=this.permissionType,console.log(this.shareScopeEnd)}}}},daa0:function(e,t,n){"use strict";var i=n("91b6"),r=n("9b15"),o=n.n(r);const a="https://lingyisupply.oss-cn-hangzhou.aliyuncs.com/";t.a={data:()=>({editIsDisabled:!1,tableCellClickRowIndex:null,tableCellClickColumnIndex:null,URL:a,loaddate:null,timerObj:null}),methods:{tableCellClick(e,t,n,i){if(console.log(e.index,t.label),!window.isByFormType&&this.$route.path.indexOf("orderSheet")>-1&&"装箱数"==t.label){console.log("点击");const n=t=>{e.changePcsNum=t};this.changePcsNum(e,t,n)}else this.editIsDisabled||(this.tableCellClickRowIndex=e.index,this.tableCellClickColumnIndex=t.index,"备注图"==t.label&&setTimeout((()=>{const t=e.index+"-commentImage",n=document.getElementById(t);console.log({id:n}),n&&n.addEventListener("change",(function(e){var t=this.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){console.log(this.result)}}))})))},tableCellInputBlur(e,t,n){this.tableCellClickRowIndex=null,this.tableCellClickColumnIndex=null,this.caculate()},uploadImgRequest(e){return new Promise(((t,n)=>{Object(i.b)().then((i=>{if(i){let{accessKeyId:r,accessKeySecret:s,securityToken:l,expiration:c,bucket:u,region:p,urlPrefix:d}=i;this.URL=d||a;const m=new o.a({region:p,accessKeyId:r,accessKeySecret:s,stsToken:l,bucket:u}),h=e;this.gettimeDate();const f=this;if(console.log({files:h}),h.file){const i=h.file,r=this.dist+"/"+this.loaddate+"/"+this.loadtime+String(Math.random()).slice(2,7)+i.name.slice(i.name.lastIndexOf("."));m.put(r,i).then((function(n){console.log({r:n}),e.onSuccess(n),f.fileList.push({name:n.name,url:f.URL+n.name}),t(n)})).then((function(e){n(e)})).catch((function(e){n(e),console.error(e)}))}}}))}))},gettimeDate(){var e=new Date;this.loaddate=e.getFullYear()+"0"+(e.getMonth()+1)+e.getDate(),this.loadtime=e.getFullYear()+""+(e.getMonth()+1)+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()}}}},e662:function(e,t,n){},f11e:function(e,t,n){"use strict";n("7406")},fe3b:function(e,t,n){}}]);