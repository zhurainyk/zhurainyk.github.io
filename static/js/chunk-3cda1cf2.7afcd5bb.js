(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3cda1cf2"],{"10ad":function(t,e,i){},5939:function(t,e,i){"use strict";i("10ad")},"5d00":function(t,e,i){"use strict";i("e9ef")},c199:function(t,e,i){"use strict";i.r(e);var s=i("d6d6c");i("b775");let a={name:"",parentId:"",departmentId:""};var o={name:"btnlist",props:{selectedItemList:{type:Array,default:()=>[]},editForm:{}},data:()=>({formLabelWidth:"80px",addShow:!1,deleteShow:!1,addForm:a,formInline:{},addRules:{},departmentList:[],roleList:[],templateList:[],isAdd:!1}),mounted(){},watch:{editForm:{handler(t){console.log({v:t}),this.addForm=JSON.parse(JSON.stringify(t))},deep:!0,immediate:!0}},computed:{size(){return this.addForm.sizeNum+this.addForm.sizeUnit},gramWeight(){return this.addForm.gramWeightNum+this.addForm.gramWeightUnit},isDisable(){return 0==this.selectedItemList.length}},methods:{add(){this.addShow=!0,this.addForm.item.value1="",this.addForm.item.value2="",this.addForm.item.sysConfigItemId=""},getImgList(t,e){console.log("图片上传",t,e,typeof e),console.log(typeof e.__ob__.value),this.addForm.multImage=t},handleSelect(t){this.addForm.supplierId=t.supplierId},addConform(){console.log(this.addForm);let t={sysConfigId:this.addForm.sysConfigId,sysConfigItemId:this.addForm.item.sysConfigItemId,value1:this.addForm.item.value1,value2:this.addForm.item.value2};Object(s.a)(t).then((t=>{1==t.code?(this.$message.success(t.message),this.addShow=!1,this.$emit("refresh")):this.$message.error(t.message)}))},edit(){this.addShow=!0},deleteItem(){this.deleteShow=!0},conformDelete(t){t?(this.deleteShow=!1,this.$emit("deleteConform")):this.$message.info("取消删除"),this.deleteShow=!1},refresh(){console.log("触发刷新"),this.$emit("refresh")}}},l=o,n=(i("5939"),i("2877")),r=Object(n.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"btnlist"},[e("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")]),e("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("编辑")]),e("el-button",{attrs:{type:"warning"},on:{click:t.deleteItem}},[t._v("删除")]),e("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("刷新")])],1),e("el-dialog",{attrs:{title:"增加/编辑变量",visible:t.addShow,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addShow=e}}},[e("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules}},t._l(t.editForm.keys,(function(i){return e("el-form-item",{key:i.column,attrs:{label:i.name,"label-width":t.formLabelWidth,prop:String(i.column)}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addForm.item[String(i.column)],callback:function(e){t.$set(t.addForm.item,String(i.column),e)},expression:"addForm.item[String(item.column)]"}})],1)})),1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addConform}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"提示",visible:t.deleteShow,width:"30%"},on:{"update:visible":function(e){t.deleteShow=e}}},[e("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),e("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[t._v("确认删除该配置")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return t.conformDelete(0)}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.conformDelete(1)}}},[t._v("确 定")])],1)])],1)}),[],!1,null,"6530b778",null),d=r.exports,c=i("4d86");const m=[{name:"type",fixed:!0,ch:"变量分类"},{name:"name",fixed:!0,ch:"变量名称"},{name:"defaultValue",fixed:!0,ch:"默认值"},{name:"systemFlag",fixed:!0,ch:"系统变量"},{name:"createName",fixex:!1,ch:"创建人"},{name:"createTime",fixex:!1,ch:"创建时间",width:150}];var u={name:"tableList",components:{pagination:c.a},props:{tableInfo:{type:Object,default:{pageNo:1,pageSize:10,total:0,totalPage:0,items:[]}}},filters:{outStorageState(t){let e;switch(t){case 1:e="销售报价";break;case 2:e="销售合同";break;case 3:e="采购合同";break;case 4:e="采购合同定金单";break;case 5:e="出运计划";break;case 6:e="出运计划收货清单"}return e},defaultFlag(t){let e;switch(t){case 0:e="否";break;case 1:e="是"}return e}},watch:{tableInfo:{handler(t){this.listQuery.pageNo=t.pageNo,this.listQuery.limit=t.pageSize},immediate:!0,deep:!0},multipleSelection:{handler(t){this.$emit("selectedItems",t)},immediate:!0,deep:!0}},data:()=>({dialogVisible:!1,pictures:[],lables:m,multipleSelection:[],listQuery:{pageNo:1,limit:10},sellContractId:""}),methods:{pageList(t){this.$emit("getList",t)},hanldeClick(t,e){if(1===(console.log(t,e),t)){let t=this.$refs.detail;t.detailShow=!0,t.shipmentStorageId=e}},handleSelectionChange(t){console.log(t),this.multipleSelection=t},showPictures(t){let e=t.split(",");this.pictures=e,console.log(e),this.dialogVisible=!0}}},h=u,f=(i("f282"),Object(n.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tablelist"},[e("el-table",{ref:"multipleTable",attrs:{data:t.tableInfo.items,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"55"}}),t._l(t.lables,(function(i,s){return e("el-table-column",{key:s,attrs:{"show-overflow-tooltip":!0,label:i.ch,prop:i.name,width:i.width||"auto",fixed:i.fixed},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",["operation"==i.name?e("div",{staticStyle:{display:"flex","justify-content":"space-around"}},t._l(i.btnList,(function(i,a){return e("el-button",{key:a,attrs:{type:"text",size:"small"},on:{click:function(e){return t.hanldeClick(i.value,s.row.shipmentStorageId)}}},[t._v(t._s(i.name))])})),1):"type"==i.name?e("div",[t._v(" "+t._s(t._f("outStorageState")(s.row[String(i.name)]))+" ")]):"systemFlag"==i.name?e("div",[t._v(" "+t._s(t._f("defaultFlag")(s.row[String(i.name)]))+" ")]):e("div",[t._v(" "+t._s(s.row[String(i.name)]||"-")+" ")])])]}}],null,!0)})}))],2),e("el-dialog",{attrs:{title:"细节图",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap","justify-content":"center"}},t._l(t.pictures,(function(i){return e("el-image",{key:i,staticStyle:{width:"150px",height:"150px","margin-right":"10px","margin-bottom":"10px"},attrs:{src:i,lazy:!0}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),e("span",{staticClass:"dot"},[t._v("...")])])])})),1)])],1)}),[],!1,null,"cc72f296",null)),p={name:"sysConfig",props:{type:{}},components:{},directives:{},components:{btnlist:d,tablelist:f.exports},data:()=>({tableInfo:{},list:[],currentIndex:0,editIndex:0,columns:[],keys:[],selectedItemList:[],editForm:{}}),created(){this.search()},watch:{},methods:{getItem(t,e,i){this.keys=t,this.currentIndex=e,this.editIndex=0,Object(s.c)({sysConfigId:i}).then((t=>{1==t.code&&(this.columns=t.data,this.editItem(this.columns[0],0))}))},editItem(t,e){this.editIndex=e;let i=this.list[this.currentIndex].sysConfigId,s=this.list[this.currentIndex].columns;console.log({sysConfigId:i,keys:s,item:t});let a={keys:s,item:t,sysConfigId:i};this.editForm=a},search(){Object(s.d)().then((t=>{1==t.code&&(this.list=t.data,this.getItem(this.list[0].columns,0,this.list[0].sysConfigId),console.log(this.list),this.tableInfo={pageNo:1,pageSize:10,total:t.data.length,totalPage:0,items:t.data})}))},getList(t){},selectedItems(t){this.selectedItemList=t},refresh(){this.search()},deleteConform(){const t=this.editForm.item.sysConfigItemId;Object(s.b)({sysConfigItemId:t}).then((t=>{1==t.code?(this.$message.success(t.message),this.search()):this.$message.error(t.message)}))}}},g=p,b=(i("5d00"),Object(n.a)(g,(function(){var t=this,e=t._self._c;return e("div",[e("btnlist",{attrs:{selectedItemList:t.selectedItemList,editForm:t.editForm},on:{deleteConform:t.deleteConform,refresh:t.refresh}}),e("div",{staticClass:"main"},[e("div",{staticClass:"list"},t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"item",class:{currentItem:t.currentIndex==s},on:{click:function(e){return t.getItem(i.columns,s,i.sysConfigId)}}},[t._v(" "+t._s(i.name)+" ")])})),0),e("div",{staticClass:"detail-list"},t._l(t.keys,(function(i,s){return e("div",{key:s,staticClass:"detail"},[e("div",{staticClass:"name-value"},[e("div",{staticClass:"name"},[t._v(" "+t._s(i.name)+" ")]),t._l(t.columns,(function(s,a){return e("div",{key:a,staticClass:"value",class:{editSelect:a==t.editIndex},attrs:{title:s[String(i.column)]},on:{click:function(e){return t.editItem(s,a)}}},[t._v(" "+t._s(s[String(i.column)])+" ")])}))],2)])})),0)])],1)}),[],!1,null,"6e4b9e1a",null));e.default=b.exports},c4e4:function(t,e,i){},d6d6c:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return n}));var s=i("b775");function a(t){return Object(s.a)({url:"/admin/sysConfig/list",method:"post",params:t})}function o(t){return Object(s.a)({url:"/admin/sysConfig/item/list",method:"post",params:t})}function l(t){return Object(s.a)({url:"/admin/sysConfig/item/addOrUpdate",method:"post",params:t})}function n(t){return Object(s.a)({url:"/admin/sysConfig/item/delete",method:"post",params:t})}},e9ef:function(t,e,i){},f282:function(t,e,i){"use strict";i("c4e4")}}]);