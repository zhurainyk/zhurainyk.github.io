(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1db19bd9"],{"38e2":function(e,t,s){"use strict";s.r(t);var i=s("2dfb"),a=s("eede"),r=s("91b6"),o=(s("61f7"),s("88e3")),n=s("94c5"),l=s("d4a2");let d={specimenId:"",specimenNo:"",factoryNo:"",brand:"",pack:"",price:"",priceArgot:"",pcsNum:"",pcsNumUnit:"",boxWeight:"",volume:"",moq:"",specimenName:"",size:"",gramWeight:"",texture:"",color:"",images:[],specimenTypeId:"",comment:"",specimenAreaIds:[],factorys:[]},c=[{type:1,image:"",title:"主图"},{type:2,image:"",title:"品牌图"},{type:3,image:"",title:"工厂货号图"},{type:4,image:"",title:"混色图"},{type:11,image:"",title:"细节图1"},{type:12,image:"",title:"细节图2"},{type:13,image:"",title:"细节图3"},{type:14,image:"",title:"细节图4"},{type:15,image:"",title:"细节图5"}],h={supplyFactoryId:"",supplyFactoryName:"",stockPrice:""};const m=[{name:"type",fixed:!0,ch:"状态"},{name:"stockNum",fixed:!0,ch:"数量"},{name:"avgPrice",fixed:!0,ch:"成本均价"},{name:"supplyUserName",fixed:!0,ch:"操作人"},{name:"time",fixed:!0,ch:"时间"}],p=[{name:"image1",fixed:!0,ch:"主图",width:"72"},{name:"specimenNo",fixed:!0,ch:"样品编号"},{name:"specimenName",fixed:!0,ch:"样品名称"},{name:"price",fixed:!0,ch:"销售单价"}],u={type:1,stockNum:"",avgPrice:""};var f={name:"btnlist",props:{selectedItemList:{type:Array,default:()=>[]}},components:{detailForm:l.a},mounted(){this.getAllConfig()},data:()=>({purchaseSheetId:"",formType:"",loading:!1,defaultImages:JSON.parse(JSON.stringify(c)),stockLabels:m,changePriceLabels:p,stockShow:!1,stockAddShow:!1,specimenStock:JSON.parse(JSON.stringify(u)),specimenConfig:{configInfo:{packs:[],colors:[],textures:[],gramWeights:[],pcsNumUnits:[],sizes:[]}},specimenTypeList:[],specimenAreaList:[],supplyFactorySelectList:[],stockListInfo:{items:[],stockNum:""},defaultFactorys:[JSON.parse(JSON.stringify(h))],formLabelWidth:"120px",addShow:!1,deleteShow:!1,demoDialog:!1,currentName:"",addForm:JSON.parse(JSON.stringify(d)),formInline:{},addRules:{},packOptions:[],sizeUnitOptions:[],weightUnitOptions:[],textureOptions:[],colorOptions:[],supplierSelectList:[],supplierSelectloading:!1,optionList:[1]}),computed:{},methods:{templateManagement(){this.$refs.templatemanagement.templateManagementShow=!0},typeManagement(){this.$refs.typemanagement0.typeManagementShow=!0},getAllConfig(){Object(a.i)().then((e=>{1==e.code&&(this.specimenConfig=e.data)})),Object(a.o)().then((e=>{1==e.code&&(this.specimenTypeList=e.data.items)})),Object(a.g)().then((e=>{1==e.code&&(this.specimenAreaList=e.data.items)})),Object(o.g)().then((e=>{1==e.code&&(this.supplyFactorySelectList=e.data)}))},getfacotryInfo(e){const t=this.supplyFactorySelectList.filter((t=>t.supplyFactoryId===e))[0];this.defaultFactorys.forEach((s=>{s.supplyFactoryId===e&&(s.supplyFactoryName=t.name)}))},addFactoryList(){this.defaultFactorys.push(JSON.parse(JSON.stringify(h)))},deleteFactoryList(e){this.defaultFactorys.splice(e,1)},toTop(e){if(this.defaultFactorys.length<=1)return;const t=this.defaultFactorys.splice(e,1);console.log({temp:t}),this.defaultFactorys.unshift(...t)},add(){this.$tip()||(this.addShow=!0,this.formType=1,this.addForm=JSON.parse(JSON.stringify(d)))},getImgList(e,t,s){console.log("图片上传",{V:e,L:t,type:s}),this.defaultImages.map((t=>(t.type==s&&(t.image=e),t)))},getSummaries(e){const{columns:t,data:s}=e,i=[];return t.forEach(((e,t)=>{i[t]=1===t?this.stockListInfo.stockNum:""})),i},addStockList(){this.stockAddShow=!0,this.specimenStock=JSON.parse(JSON.stringify(u)),this.specimenStock.specimenId=this.selectedItemList[0].specimenId},sendName(e){this.currentName=e},supplierSelectChange(e){this.addForm.supplierId=e},addConform(e,t){console.log(e,t),e&&Object(n.a)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.addShow=!1,this.$emit("refresh")):this.$message.error(e.message)}))},edit(){if(this.$tip())return;if(!this.selectedItemList.length)return this.$message.error("请勾选一个样品再操作");const{purchaseSheetId:e}=this.selectedItemList[0];this.addShow=!0,this.purchaseSheetId=e,this.formType=2},getUnitNumber(e){e=e.split("");let t="",s="";for(let i=0;i<e.length;i++){let a=e[i];isNaN(a)?s+=a:t+=a}return{num:t,unit:s}},deleteItem(){this.deleteShow=!0},conformDelete(e){e&&this.selectedItemList.length>0?(console.log("删除"),console.log(e),this.deleteShow=!1,this.$emit("deleteConform")):this.$message.info("取消删除"),this.deleteShow=!1},refresh(){console.log("触发刷新"),this.$emit("refresh")}}},S=f,g=(s("5912"),s("2877")),y=Object(g.a)(S,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"btnlist"},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.edit}},[e._v("编辑")]),t("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.deleteItem}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:e.typeManagement}},[e._v("分类管理")]),t("el-button",{attrs:{type:"primary"},on:{click:e.templateManagement}},[e._v("模板管理")])],1),t("el-dialog",{attrs:{title:"提示",visible:e.deleteShow,width:"30%"},on:{"update:visible":function(t){e.deleteShow=t}}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),e.selectedItemList.length?t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("确认删除订货单")]):t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("请选择订货单再操作")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformDelete(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformDelete(1)}}},[e._v("确 定")])],1)]),t("detailForm",{attrs:{addShow:e.addShow,purchaseSheetId:e.purchaseSheetId,formType:e.formType},on:{"update:addShow":function(t){e.addShow=t},"update:add-show":function(t){e.addShow=t},addConform:e.addConform}}),t("typemanagement",{ref:"typemanagement0",attrs:{type:3}}),t("templatemanagement",{ref:"templatemanagement",attrs:{type:3}})],1)}),[],!1,null,"0f5938d7",null),w=y.exports,x={name:"search",data:()=>({formInline:{progressType:"",page:1,rows:10,key:"",sheetTypeId:""},typeList:[],progressType:[{name:"全部",value:""},{name:"待下单",value:0},{name:"待发货",value:1},{name:"待结款",value:2},{name:"已结款",value:3}]}),mounted(){this.sheetTypeList()},methods:{sheetTypeList(){Object(n.m)().then((e=>{1==e.code&&(this.typeList=e.data)}))},onSubmit(){this.$emit("search",this.formInline)},clearbox(){this.formInline={specimenName:"",factoryNo:"",specimenTypeId:"",page:1,rows:10},this.$emit("search",this.formInline)}}},v=x,b=(s("dfab"),Object(g.a)(v,(function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"关键字:"}},[t("el-input",{staticClass:"inputbox",attrs:{placeholder:""},model:{value:e.formInline.key,callback:function(t){e.$set(e.formInline,"key",t)},expression:"formInline.key"}})],1),t("el-form-item",{attrs:{label:"状态:"}},[t("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择"},model:{value:e.formInline.progressType,callback:function(t){e.$set(e.formInline,"progressType",t)},expression:"formInline.progressType"}},e._l(e.progressType,(function(e,s){return t("el-option",{key:s,attrs:{label:e.name,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"分类:"}},[t("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择"},model:{value:e.formInline.sheetTypeId,callback:function(t){e.$set(e.formInline,"sheetTypeId",t)},expression:"formInline.sheetTypeId"}},e._l(e.typeList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.name,value:e.sheetTypeId}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearbox}},[e._v("清空")])],1)],1)],1)}),[],!1,null,"584c54ac",null)),I=b.exports,k=(s("13d5"),s("7ec2")),O=s("4d86"),_=s("2f62");const N=[{name:"factoryName",fixed:!0,ch:"供应商",width:"120"},{name:"purchaseDate",fixed:!0,ch:"采购日期",width:"150"},{name:"receiveDate",fixed:!1,ch:"发货日期",width:"150"},{name:"orderNo",fixed:!1,ch:"订单编号"},{name:"sheetTypeName",fixed:!1,ch:"分类"},{name:"totalMoney",fixed:!1,ch:"总金额"},{name:"payedMoney",fixed:!1,ch:"已结款"},{name:"progressName",fixed:!1,ch:"状态"},{name:"orderSheetName",fixed:!1,ch:"关联订货单",width:"150"},{name:"createTime",fixed:!1,ch:"创建日期"},{name:"createName",fixed:!1,ch:"创建人"},{name:"permissionName",fixed:!1,ch:"权限",width:"150"}];N.push({name:"operation",fixed:"right",ch:"操作",width:280,align:"center",btnList:[{value:1,name:"详情"},{value:2,name:"更新进度"},{value:3,name:"下载PDF"},{value:4,name:"下载EXCEL"},{value:5,name:"更多",more:[{value:6,name:"下载原图"},{value:7,name:"订单备忘"},{value:8,name:"订单异常"},{value:9,name:"复制"},{value:10,name:"账期"}]}]});const L=[{name:"supplyUserName",fixed:!1,ch:"录入人"},{name:"createTime",fixed:!1,ch:"录入时间"},{name:"content",fixed:!1,ch:"备忘内容"},{name:"images",fixed:!1,ch:"备忘图片"}];L.push({name:"operation",fixed:"right",ch:"操作",width:120,align:"center",btnList:[{value:2,name:"编辑"},{value:1,name:"删除"}]});const D=[{name:"image",fixed:!1,ch:"图片"},{name:"fullName",fixed:!1,ch:"品名"},{name:"factoryNo",fixed:!1,ch:"工厂货号"},{name:"ctnsNum",fixed:!1,ch:"箱数"},{name:"exceptionType",fixed:!1,ch:"异常类型"},{name:"backBoxNum",fixed:!1,ch:"退货箱数"},{name:"exceptionDesc",fixed:!1,ch:"异常说明"},{name:"state",fixed:!1,ch:"异常状态"},{name:"supplyUserName",fixed:!1,ch:"录入人"},{name:"createTime",fixed:!1,ch:"时间"}];D.push({name:"operation",fixed:"right",ch:"操作",width:80,align:"center",btnList:[{value:1,name:"处理完成"}]});const F=[{name:"image",fixed:!1,ch:"图片"},{name:"fullName",fixed:!1,ch:"品名"},{name:"factoryNo",fixed:!1,ch:"货号"},{name:"specimenNo",fixed:!1,ch:"客号"},{name:"pack",fixed:!1,ch:"包装"},{name:"ctnsNum",fixed:!1,ch:"箱数"},{name:"pcsNum",fixed:!1,ch:"装箱数"},{name:"price",fixed:!1,ch:"单价"},{name:"volume",fixed:!1,ch:"体积"},{name:"totalNum",fixed:!1,ch:"总数量"},{name:"totalPrice",fixed:!1,ch:"总金额"},{name:"comment",fixed:!1,ch:"备注"}];var C={name:"tableList",components:{pagination:O.a,detailform:l.a,ordersheetdetail:k.a},props:{tableInfo:{type:Object,default:{pageNo:1,limit:10,total:0,totalPage:0,rows:[]}}},computed:{...Object(_.c)({collapse:"settings/collapse"})},watch:{tableInfo:{handler(e){this.listQuery.pageNo=e.pageNo,this.listQuery.limit=e.pageSize},immediate:!0,deep:!0},multipleSelection:{handler(e){this.$emit("selectedItems",e)},immediate:!0,deep:!0}},data:()=>({lables2:L,actualMoney:"",orderSheetTimelineListTitle:"新增备忘",progressIndex:null,showBackBoxNum:!1,conformUpdateProgressShow:!1,maxProgress:0,ordersheetdetailShow:!1,orderSheetId:"",lables4:F,handleSelectionSpecimenList:[],selectSpecimenListShow:!1,orderSheetDateShow:!1,mistakeList:[{value:0,lable:"无差错"},{value:1,lable:"有差错"}],orderSheetDateForm:{purchaseSheetId:"",paymentDay:"",mistake:"",payedMoney:"",mistakeInfo:"",totalMoney:""},orderExceptionsShow:!1,lables3:D,addNewOrderExceptionsShow:!1,addOrderExceptionsForm:{purchaseSheetId:"",specimenId:"",exceptionType:"",backBoxNum:"",exceptionDesc:""},specimenList:[],exceptionTypeList:["工厂没货","贴纸错误","工厂停厂","质量退货","发错货","延迟发货","延迟收货","少发漏发","漏下单"],OrderExceptionsList:[],addOrderSheetForm:{purchaseSheetId:"",content:"",images:""},addOrderSheetFormImages:[],currentOrderSheetDetail:{},addShow:!1,addNewOrderSheetTimeLineShow:!1,orderSheetTimelineListShow:!1,orderSheetTimelineList:[],updateProgressShow:!1,purchaseSheetId:"",formType:"",progressList:[],dialogVisible:!1,pictures:[],lables:N,multipleSelection:[],listQuery:{pageNo:1,limit:10}}),methods:{listenExptionType(e){console.log(e),-1!=e.indexOf("退货")?this.showBackBoxNum=!0:(this.showBackBoxNum=!1,this.addOrderExceptionsForm.backBoxNum="")},conformUpdateProgress(e){this.conformUpdateProgressShow=!!e},orderSheetDetail(e){this.orderSheetId=e,this.ordersheetdetailShow=!0,this.formType=3},getImgList(e){this.addOrderSheetForm.images=e},handleSelectionSpecimen(e){this.handleSelectionSpecimenList=e},orderSheetSpecimenConform(e){if(e){const e=this.handleSelectionSpecimenList.reduce(((e,t)=>[...e,t.specimenId]),[]).join(",");Object(i.n)({specimenIds:e,orderSheetId:this.orderSheetId}).then((e=>{}))}this.selectSpecimenListShow=!1},orderSheetDateFormConform(e){this.orderSheetDateForm.purchaseSheetId=this.purchaseSheetId,e?Object(n.h)(this.orderSheetDateForm).then((e=>{1==e.code&&(this.$message.success(e.message),this.$emit("refresh"),this.getOrderDetail(),this.orderSheetDateForm={purchaseSheetId:"",paymentDay:"",mistake:"",payedMoney:"",mistakeInfo:"",totalMoney:""})})):this.orderSheetDateForm={purchaseSheetId:"",paymentDay:"",mistake:"",payedMoney:"",mistakeInfo:"",totalMoney:""},this.orderSheetDateShow=!1},addNewOrderExceptionsShowConform(e){e?(this.addOrderExceptionsForm.purchaseSheetId=this.purchaseSheetId,Object(n.e)(this.addOrderExceptionsForm).then((e=>{1==e.code&&(this.$message.success(e.message),this.getOrderDetail()),this.addOrderExceptionsForm={purchaseSheetId:"",specimenId:"",exceptionType:"",backBoxNum:"",exceptionDesc:""}}))):this.addOrderExceptionsForm={purchaseSheetId:"",specimenId:"",exceptionType:"",backBoxNum:"",exceptionDesc:""},this.addNewOrderExceptionsShow=!1},addOrderExceptionsList(e){this.showBackBoxNum=!1,this.addNewOrderExceptionsShow=!0},addNewOrderSheetTimeLineConform(e){this.addOrderSheetForm.purchaseSheetId=this.purchaseSheetId,e?(this.addOrderSheetForm.content||this.$message.error("请输入备忘内容"),Object(n.i)(this.addOrderSheetForm).then((e=>{1==e.code&&(this.$message.success(e.message),this.addOrderSheetForm.content="",this.addOrderSheetForm.images="",this.getOrderSheetTimelineList())}))):(this.addOrderSheetForm.content="",this.addOrderSheetForm.images=""),this.addNewOrderSheetTimeLineShow=!1},pageList(e){this.$emit("getList",e)},addOrderSheetTimelineList(){this.addNewOrderSheetTimeLineShow=!0,this.orderSheetTimelineListTitle="新增备忘",this.addOrderSheetForm.purchaseSheetTimelineId="",this.addOrderSheetForm.content="",this.addOrderSheetForm.images=""},addConform(e,t){e&&Object(n.a)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.addShow=!1,this.$emit("refresh")):this.$message.error(e.message)}))},updateOrderProgress(e,t){Object(n.g)({purchaseSheetId:this.purchaseSheetId,progress:e}).then((s=>{1==s.code&&(this.$message.success(s.message),this.actualMoney="",this.progressIndex=e,Object(n.c)({purchaseSheetId:this.purchaseSheetId}).then((e=>{1==e.code&&(this.actualMoney=e.data.payedMoney,this.updateProgress(e.data.progresses,t))})))}))},handleUpdateProgress(e){let t=this.progressList.reduce(((e,t)=>Math.max(e,t.progress||0)),0);console.log(t),3!=t&&(this.updateOrderProgress(t+1,e),this.conformUpdateProgress(0))},handleDelete(e,t){switch(console.log(e,t),e){case 1:{const e=()=>{Object(n.j)({purchaseSheetTimelineId:t.purchaseSheetTimelineId}).then((e=>{1==e.code&&(this.$message.success(e.message),this.getOrderSheetTimelineList())}))};this.$del(e);break}case 2:this.orderSheetTimelineListTitle="编辑备忘",this.addNewOrderSheetTimeLineShow=!0,this.addOrderSheetForm.purchaseSheetTimelineId=t.purchaseSheetTimelineId,this.addOrderSheetForm.content=t.content,this.addOrderSheetForm.images=t.images}},hanldeClick(e,t,s){switch(console.log(e,t,s),this.purchaseSheetId=t,this.actualMoney="",e){case 1:this.addShow=!0,this.formType=3;break;case 2:Object(n.c)({purchaseSheetId:t}).then((e=>{1==e.code&&(this.actualMoney=e.data.payedMoney,this.progressIndex=e.data.progress,this.updateProgress(e.data.progresses))}));break;case 3:if(this.$tip())return;this.downloadPdf(1);break;case 4:if(this.$tip())return;this.downloadPdf(2);break;case 6:if(this.$tip())return;this.sheetGenerateDetailImage();break;case 7:this.orderSheetTimelineListShow=!0,this.getOrderSheetTimelineList();break;case 8:this.orderExceptionsShow=!0,this.getOrderDetail();break;case 9:this.addShow=!0,this.formType=4;break;case 10:if("已结款"!==s.progressName)return void this.$message.warning("已结款订单才能设置账期额！");const e=()=>{this.orderSheetDateForm.paymentDay=this.currentOrderSheetDetail.paymentDay,this.orderSheetDateForm.purchaseSheetId=this.currentOrderSheetDetail.purchaseSheetId,this.orderSheetDateForm.mistake=parseInt(this.currentOrderSheetDetail.mistake),this.orderSheetDateForm.totalPrice=this.currentOrderSheetDetail.totalPrice,this.orderSheetDateForm.mistakeInfo=this.currentOrderSheetDetail.mistakeInfo,this.orderSheetDateForm.payedMoney=this.currentOrderSheetDetail.payedMoney};this.orderSheetDateShow=!0,this.getOrderDetail(e)}},handleDoExceptions(e,t){Object(n.d)({purchaseSheetExceptionId:t}).then((e=>{1==e.code&&(this.$message.success(e.message),this.getOrderDetail())}))},getOrderDetail(e){this.actualMoney="",Object(n.c)({purchaseSheetId:this.purchaseSheetId}).then((t=>{1==t.code&&(this.actualMoney=t.data.payedMoney,this.currentOrderSheetDetail=t.data,this.OrderExceptionsList=t.data.exceptions,this.specimenList=t.data.items,e&&e())}))},getOrderSheetTimelineList(){Object(n.k)({purchaseSheetId:this.purchaseSheetId}).then((e=>{e&&(this.orderSheetTimelineList=e)}))},downloadPdf(e){const t={purchaseSheetId:this.purchaseSheetId};Object(i.q)(t).then((t=>{if(1==t.code){let s;1==e?s=t.data.pdfUrl:2==e&&(s=t.data.excelUrl);const i=s.lastIndexOf("/")+1,a=s.slice(i);Object(r.a)(s,a).then((e=>{}))}}))},sheetGenerateDetailImage(){const e={purchaseSheetId:this.purchaseSheetId};Object(i.r)(e).then((e=>{1==e.code&&Object(r.a)(e.data.downloadUrl,e.data.saveName).then((e=>{}))}))},updateProgress(e,t=!1){this.progressList=[];for(let e=1;e<4;e++){const t={content:this.getProgressName(e),timestamp:"",value:e};this.progressList.push(t)}if(this.progressList.forEach((t=>{e.forEach((e=>{e.progress==t.value?(t.color="rgb(82,197,255)",t.timestamp=e.time,t.progress=e.progress):(t.color="",t.timestamp)}))})),this.maxProgress=this.progressList.reduce(((e,t)=>Math.max(e,t.progress||0)),0),console.log(this.maxProgress),3==this.maxProgress&&t){const e=()=>{this.orderSheetDateForm.paymentDay=this.currentOrderSheetDetail.paymentDay,this.orderSheetDateForm.purchaseSheetId=this.currentOrderSheetDetail.purchaseSheetId,this.orderSheetDateForm.mistake=parseInt(this.currentOrderSheetDetail.mistake),this.orderSheetDateForm.totalPrice=this.currentOrderSheetDetail.totalPrice,this.orderSheetDateForm.mistakeInfo=this.currentOrderSheetDetail.mistakeInfo,this.orderSheetDateForm.payedMoney=this.currentOrderSheetDetail.payedMoney};this.orderSheetDateShow=!0,this.getOrderDetail(e)}this.$emit("refresh"),this.updateProgressShow=!0},getProgressName(e){let t;switch(e){case 1:t="已下单";break;case 2:t="已发货";break;case 3:t="已结款"}return t},setAttr(e){this.$nextTick((()=>{let t=document.getElementsByClassName("el-image-viewer__prev");t.length&&(t=[...t],e?t[0].setAttribute("style","left:40px !important"):t[0].setAttribute("style","left:290px !important"))}))},handleShow(){let e=this.collapse;this.setAttr(e)},handleSelectionChange(e){console.log(e),this.multipleSelection=e},showPictures(e){let t=e.split(",");this.pictures=t,console.log(t),this.dialogVisible=!0}}},T=C,$=(s("e8eb"),Object(g.a)(T,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tablelist",staticStyle:{"z-index":"2000"}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.rows,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),e._l(e.lables,(function(s,i){return t("el-table-column",{key:i,attrs:{"show-overflow-tooltip":"card"!=s.name,label:s.ch,prop:s.name,fixed:s.fixed,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",["operation"==s.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e._l(s.btnList,(function(s,a){return[a<=3?t("el-button",{key:a,attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(s.value,i.row.purchaseSheetId,i.row)}}},[e._v(e._s(s.name))]):e._e(),4==a?t("el-popover",{key:a,attrs:{placement:"bottom",width:"80",trigger:"hover"}},[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap",width:"100%"}},e._l(s.more,(function(s,a){return t("el-button",{key:a,staticStyle:{width:"100%"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(s.value,i.row.purchaseSheetId,i.row)}}},[e._v(e._s(s.name))])})),1),t("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(e._s(s.name))])],1):e._e()]}))],2):"card"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:i.row.card,"preview-src-list":[i.row.card]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"orderSheetName"==s.name?t("div",{staticStyle:{},on:{click:function(t){return e.orderSheetDetail(i.row.orderSheetId)}}},[t("el-button",{attrs:{type:"text"}},[e._v(e._s(i.row[String(s.name)]))])],1):"payedMoney"==s.name?t("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(i.row[String(s.name)])+" ")]):"progressName"==s.name?t("div",{style:{color:"已结款"==i.row[String(s.name)]?"red":"#606266"}},[e._v(" "+e._s(i.row[String(s.name)])+" ")]):t("div",[e._v(" "+e._s(i.row[String(s.name)])+" ")])])]}}],null,!0)})}))],2),t("el-dialog",{attrs:{title:"订单进度",visible:e.updateProgressShow,width:"40%"},on:{"update:visible":function(t){e.updateProgressShow=t}}},[t("div",{staticClass:"timeline-progress",staticStyle:{display:"flex"}},[t("el-timeline",e._l(e.progressList,(function(s,i){return t("el-timeline-item",{key:i,attrs:{color:s.color,timestamp:s.timestamp}},[t("span",{style:{color:"已结款"==s.content&&3==e.progressIndex?"red":s.timestamp?"rgb(82,197,255)":"#303133",fontWeight:"已结款"==s.content&&3==e.progressIndex?"bold":""}},[e._v(e._s("已结款"==s.content?s.content+" "+e.actualMoney:s.content))])])})),1),t("div",{staticStyle:{"margin-left":"20px"},style:{marginTop:50*e.maxProgress+3*e.maxProgress+"px"}},[e.maxProgress<3?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.conformUpdateProgress(1)}}},[e._v("更新进度")]):e._e()],1)],1)]),t("el-dialog",{attrs:{title:"提示",visible:e.conformUpdateProgressShow,width:"30%"},on:{"update:visible":function(t){e.conformUpdateProgressShow=t}}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("确认将状态更新到 "+e._s(e.getProgressName(e.maxProgress+1)))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformUpdateProgress(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdateProgress(!0)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"订单备忘",visible:e.orderSheetTimelineListShow,width:"60%"},on:{"update:visible":function(t){e.orderSheetTimelineListShow=t}}},[t("div",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addOrderSheetTimelineList}},[e._v("新增")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.orderSheetTimelineList,"tooltip-effect":"dark",height:"400",border:""}},e._l(e.lables2,(function(s,i){return t("el-table-column",{key:i,attrs:{"show-overflow-tooltip":"images"!=s.name,label:s.ch,prop:s.name,fixed:s.fixed,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",["operation"==s.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e._l(s.btnList,(function(s,a){return[t("el-button",{key:a,attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDelete(s.value,i.row)}}},[e._v(e._s(s.name))])]}))],2):"images"==s.name?t("div",{staticClass:"demo-image__preview"},e._l(i.row.images.split(","),(function(s,i){return t("el-image",{key:i,staticStyle:{width:"48px",height:"48px",margin:"0 5px"},attrs:{src:s,"preview-src-list":[s]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])})),1):"orderCount"==s.name?t("div",{staticClass:"ordercountstyle"},[e._v(" "+e._s(i.row[String(s.name)])+" "),t("span",{on:{click:function(t){return e.orderNewCount(i.row.priceSheetId)}}},[e._v(" "+e._s(i.row.orderNewCount)+" ")])]):"lookCount"==s.name?t("div",{staticClass:"ordercountstyle"},[e._v(" "+e._s(i.row[String(s.name)])+" "),t("span",{on:{click:function(t){return e.lookNewCount(i.row.priceSheetId)}}},[e._v(" "+e._s(i.row.lookNewCount))])]):t("div",[e._v(" "+e._s(i.row[String(s.name)])+" ")])])]}}],null,!0)})})),1)],1),t("el-dialog",{attrs:{title:e.orderSheetTimelineListTitle,visible:e.addNewOrderSheetTimeLineShow,width:"40%","append-to-body":!0,"show-close":!1},on:{"update:visible":function(t){e.addNewOrderSheetTimeLineShow=t}}},[t("div",[t("span",[e._v("备忘内容:")]),t("el-input",{attrs:{type:"textarea"},model:{value:e.addOrderSheetForm.content,callback:function(t){e.$set(e.addOrderSheetForm,"content",t)},expression:"addOrderSheetForm.content"}})],1),t("div",[t("span",[e._v("备忘图片:")]),e.addNewOrderSheetTimeLineShow?t("upload-img",{attrs:{value:e.addOrderSheetForm.images,dist:"orderSheet",multiple:!0,limit:5},on:{input:e.getImgList}}):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.addNewOrderSheetTimeLineConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewOrderSheetTimeLineConform(1)}}},[e._v("确 定")])],1)])],1),t("el-dialog",{attrs:{title:"订单异常",visible:e.orderExceptionsShow,width:"60%"},on:{"update:visible":function(t){e.orderExceptionsShow=t}}},[t("div",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addOrderExceptionsList}},[e._v("添加异常")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.OrderExceptionsList,"tooltip-effect":"dark",height:"400",border:""}},e._l(e.lables3,(function(s,i){return t("el-table-column",{key:i,attrs:{"show-overflow-tooltip":"image"!=s.name,label:s.ch,prop:s.name,fixed:s.fixed,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",["operation"==s.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e._l(s.btnList,(function(s,a){return[t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==i.row.state,expression:"scope.row.state == 0"}],key:a,attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDoExceptions(s.value,i.row.purchaseSheetExceptionId,i.row)}}},[e._v(e._s(s.name))])]}))],2):"image"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:i.row.image,"preview-src-list":[i.row.image]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"state"==s.name?t("div",{staticClass:"ordercountstyle"},[1==i.row[String(s.name)]?t("el-tag",{attrs:{type:"success"}},[e._v("已处理")]):0==i.row[String(s.name)]?t("el-tag",{attrs:{type:"danger"}},[e._v("未处理")]):e._e()],1):"lookCount"==s.name?t("div",{staticClass:"ordercountstyle"},[e._v(" "+e._s(i.row[String(s.name)])+" "),t("span",{on:{click:function(t){return e.lookNewCount(i.row.priceSheetId)}}},[e._v(" "+e._s(i.row.lookNewCount))])]):"exceptionDesc"==s.name?t("div",{staticStyle:{"white-space":"normal !important"}},[e._v(" "+e._s(i.row[String(s.name)])+" ")]):t("div",[e._v(" "+e._s(i.row[String(s.name)])+" ")])])]}}],null,!0)})})),1)],1),t("el-dialog",{attrs:{title:"新增异常",visible:e.addNewOrderExceptionsShow,width:"40%","append-to-body":!0,"show-close":!1},on:{"update:visible":function(t){e.addNewOrderExceptionsShow=t}}},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("span",[e._v("选择样品：")]),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addOrderExceptionsForm.specimenId,callback:function(t){e.$set(e.addOrderExceptionsForm,"specimenId",t)},expression:"addOrderExceptionsForm.specimenId"}},e._l(e.specimenList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.specimenName,value:e.specimenId}})})),1)],1),t("div",{staticStyle:{"margin-bottom":"10px"}},[t("span",[e._v("异常类型：")]),t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.listenExptionType},model:{value:e.addOrderExceptionsForm.exceptionType,callback:function(t){e.$set(e.addOrderExceptionsForm,"exceptionType",t)},expression:"addOrderExceptionsForm.exceptionType"}},e._l(e.exceptionTypeList,(function(e,s){return t("el-option",{key:s,attrs:{label:e,value:e}})})),1)],1),e.showBackBoxNum?t("div",{staticStyle:{"margin-bottom":"10px"}},[t("span",[e._v("退货箱数：")]),t("el-input",{staticStyle:{width:"215px"},model:{value:e.addOrderExceptionsForm.backBoxNum,callback:function(t){e.$set(e.addOrderExceptionsForm,"backBoxNum",t)},expression:"addOrderExceptionsForm.backBoxNum"}})],1):e._e(),t("div",{staticStyle:{"margin-bottom":"10px",display:"flex"}},[t("span",[e._v("备忘内容：")]),t("el-input",{staticStyle:{width:"215px"},attrs:{type:"textarea"},model:{value:e.addOrderExceptionsForm.exceptionDesc,callback:function(t){e.$set(e.addOrderExceptionsForm,"exceptionDesc",t)},expression:"addOrderExceptionsForm.exceptionDesc"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.addNewOrderExceptionsShowConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewOrderExceptionsShowConform(1)}}},[e._v("确 定")])],1)])],1),t("el-dialog",{attrs:{title:"细节图",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap","justify-content":"center"}},e._l(e.pictures,(function(s){return t("el-image",{key:s,staticStyle:{width:"150px",height:"150px","margin-right":"10px","margin-bottom":"10px"},attrs:{src:s,lazy:!0}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])])})),1)]),t("el-dialog",{attrs:{title:"选择采购样品",visible:e.selectSpecimenListShow,width:"80%"},on:{"update:visible":function(t){e.selectSpecimenListShow=t}}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.specimenList,"tooltip-effect":"dark",height:"400",border:""},on:{"selection-change":e.handleSelectionSpecimen}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),e._l(e.lables4,(function(s,i){return t("el-table-column",{key:i,attrs:{"show-overflow-tooltip":"image"!=s.name&&"commentImage"!=s.name,label:s.ch,prop:s.name,fixed:s.fixed,width:s.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",["image"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:i.row.image,"preview-src-list":[i.row.image]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"commentImage"==s.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:i.row.commentImage,"preview-src-list":[i.row.commentImage]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",[e._v(" "+e._s(i.row[String(s.name)])+" ")])])]}}],null,!0)})}))],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.orderSheetSpecimenConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.orderSheetSpecimenConform(1)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"账期",visible:e.orderSheetDateShow,width:"30%"},on:{"update:visible":function(t){e.orderSheetDateShow=t}}},[t("div",{staticClass:"orderDateSheet"},[t("span",[e._v("采购总额：")]),t("el-input",{staticStyle:{width:"215px"},attrs:{disabled:!0},model:{value:e.orderSheetDateForm.totalPrice,callback:function(t){e.$set(e.orderSheetDateForm,"totalPrice",t)},expression:"orderSheetDateForm.totalPrice"}})],1),t("div",{staticClass:"orderDateSheet"},[t("span",[e._v("已结款：")]),t("el-input",{staticStyle:{width:"215px"},model:{value:e.orderSheetDateForm.payedMoney,callback:function(t){e.$set(e.orderSheetDateForm,"payedMoney",t)},expression:"orderSheetDateForm.payedMoney"}})],1),t("div",{staticClass:"orderDateSheet"},[t("span",[e._v("账期：")]),t("el-input",{staticStyle:{width:"215px"},model:{value:e.orderSheetDateForm.paymentDay,callback:function(t){e.$set(e.orderSheetDateForm,"paymentDay",t)},expression:"orderSheetDateForm.paymentDay"}})],1),t("div",{staticClass:"orderDateSheet"},[t("span",[e._v("此合作是否有差错：")]),t("div",{staticStyle:{width:"215px"}},e._l(e.mistakeList,(function(s,i){return t("el-radio",{key:i,attrs:{label:s.value},model:{value:e.orderSheetDateForm.mistake,callback:function(t){e.$set(e.orderSheetDateForm,"mistake",t)},expression:"orderSheetDateForm.mistake"}},[e._v(e._s(s.lable))])})),1)]),t("div",{staticClass:"orderDateSheet"},[t("span",[e._v("差错描述：")]),t("el-input",{staticStyle:{width:"215px"},attrs:{type:"textarea"},model:{value:e.orderSheetDateForm.mistakeInfo,callback:function(t){e.$set(e.orderSheetDateForm,"mistakeInfo",t)},expression:"orderSheetDateForm.mistakeInfo"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.orderSheetDateFormConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.orderSheetDateFormConform(1)}}},[e._v("确 定")])],1)]),t("pagination",{attrs:{total:e.tableInfo.total||0,page:e.listQuery.pageNo||0,limit:e.listQuery.limit||0},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo || 0",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit || 0",t)},pagination:e.pageList}}),t("detailform",{attrs:{addShow:e.addShow,purchaseSheetId:e.purchaseSheetId,formType:e.formType},on:{"update:addShow":function(t){e.addShow=t},"update:add-show":function(t){e.addShow=t},addConform:e.addConform}}),t("ordersheetdetail",{attrs:{addShow:e.ordersheetdetailShow,orderSheetId:e.orderSheetId,formType:e.formType},on:{"update:addShow":function(t){e.ordersheetdetailShow=t},"update:add-show":function(t){e.ordersheetdetailShow=t}}})],1)}),[],!1,null,"3f6f86c0",null)),E={name:"spacimen",components:{btnlist:w,search:I,tablelist:$.exports},data:()=>({tableInfo:{},formInline:{progressType:"",page:1,rows:10,key:"",sheetTypeId:""},selectedItemList:[]}),async created(){this.search(this.formInline)},methods:{search(e){this.formInline=e,Object(n.l)(e).then((e=>{e&&(this.tableInfo=e)}))},getList(e){this.formInline=Object.assign(this.formInline,e),this.search(this.formInline)},selectedItems(e){this.selectedItemList=e},refresh(){this.search(this.formInline)},deleteConform(){let e=[];this.selectedItemList.forEach((t=>{e.push(t.purchaseSheetId)})),Object(n.b)({purchaseSheetId:e.toString()}).then((e=>{1==e.code?(this.$message.success(e.message),this.search(this.formInline)):this.$message.error(e.message)}))}},mounted(){}},P=E,j=Object(g.a)(P,(function(){var e=this,t=e._self._c;return t("div",[t("search",{on:{search:e.search}}),t("btnlist",{attrs:{selectedItemList:e.selectedItemList},on:{deleteConform:e.deleteConform,refresh:e.refresh}}),t("tablelist",{attrs:{tableInfo:e.tableInfo},on:{getList:e.getList,selectedItems:e.selectedItems,refresh:e.refresh}})],1)}),[],!1,null,"060914c8",null);t.default=j.exports},5912:function(e,t,s){"use strict";s("bfdd")},"61be":function(e,t,s){},"9c15":function(e,t,s){},bfdd:function(e,t,s){},dfab:function(e,t,s){"use strict";s("9c15")},e8eb:function(e,t,s){"use strict";s("61be")}}]);