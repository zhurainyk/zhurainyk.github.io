(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2f5a8ab0"],{1309:function(e,t,i){},"33a6":function(e,t,i){"use strict";i("f90f")},8335:function(e,t,i){"use strict";i("e79b")},d4a8:function(e,t,i){"use strict";i.r(t);var r=i("2dfb"),s=i("eede"),o=i("91b6"),a=(i("61f7"),i("88e3")),n=i("7ec2");let d={specimenId:"",specimenNo:"",factoryNo:"",brand:"",pack:"",price:"",priceArgot:"",pcsNum:"",pcsNumUnit:"",boxWeight:"",volume:"",moq:"",specimenName:"",size:"",gramWeight:"",texture:"",color:"",images:[],specimenTypeId:"",comment:"",specimenAreaIds:[],factorys:[]},l=[{type:1,image:"",title:"主图"},{type:2,image:"",title:"品牌图"},{type:3,image:"",title:"工厂货号图"},{type:4,image:"",title:"混色图"},{type:11,image:"",title:"细节图1"},{type:12,image:"",title:"细节图2"},{type:13,image:"",title:"细节图3"},{type:14,image:"",title:"细节图4"},{type:15,image:"",title:"细节图5"}],c={supplyFactoryId:"",supplyFactoryName:"",stockPrice:""};const m=[{name:"type",fixed:!0,ch:"状态"},{name:"stockNum",fixed:!0,ch:"数量"},{name:"avgPrice",fixed:!0,ch:"成本均价"},{name:"supplyUserName",fixed:!0,ch:"操作人"},{name:"time",fixed:!0,ch:"时间"}],h=[{name:"image1",fixed:!0,ch:"主图",width:"72"},{name:"specimenNo",fixed:!0,ch:"样品编号"},{name:"specimenName",fixed:!0,ch:"样品名称"},{name:"price",fixed:!0,ch:"销售单价"}],p={type:1,stockNum:"",avgPrice:""};var u={name:"btnlist",props:{selectedItemList:{type:Array,default:()=>[]}},components:{detailForm:n.a},mounted(){this.getAllConfig()},data:()=>({orderSheetId:"",formType:"",loading:!1,defaultImages:JSON.parse(JSON.stringify(l)),stockLabels:m,changePriceLabels:h,stockShow:!1,stockAddShow:!1,specimenStock:JSON.parse(JSON.stringify(p)),specimenConfig:{configInfo:{packs:[],colors:[],textures:[],gramWeights:[],pcsNumUnits:[],sizes:[]}},specimenTypeList:[],specimenAreaList:[],supplyFactorySelectList:[],stockListInfo:{items:[],stockNum:""},defaultFactorys:[JSON.parse(JSON.stringify(c))],formLabelWidth:"120px",addShow:!1,deleteShow:!1,demoDialog:!1,currentName:"",addForm:JSON.parse(JSON.stringify(d)),formInline:{},addRules:{},packOptions:[],sizeUnitOptions:[],weightUnitOptions:[],textureOptions:[],colorOptions:[],supplierSelectList:[],supplierSelectloading:!1,optionList:[1]}),computed:{},methods:{templateManagement(){this.$refs.templatemanagement.templateManagementShow=!0},typeManagement(){this.$refs.typemanagement0.typeManagementShow=!0},getAllConfig(){Object(s.i)().then((e=>{1==e.code&&(this.specimenConfig=e.data)})),Object(s.o)().then((e=>{1==e.code&&(this.specimenTypeList=e.data.items)})),Object(s.g)().then((e=>{1==e.code&&(this.specimenAreaList=e.data.items)})),Object(a.g)().then((e=>{1==e.code&&(this.supplyFactorySelectList=e.data)}))},getfacotryInfo(e){const t=this.supplyFactorySelectList.filter((t=>t.supplyFactoryId===e))[0];this.defaultFactorys.forEach((i=>{i.supplyFactoryId===e&&(i.supplyFactoryName=t.name)}))},addFactoryList(){this.defaultFactorys.push(JSON.parse(JSON.stringify(c)))},deleteFactoryList(e){this.defaultFactorys.splice(e,1)},toTop(e){if(this.defaultFactorys.length<=1)return;const t=this.defaultFactorys.splice(e,1);console.log({temp:t}),this.defaultFactorys.unshift(...t)},add(){this.$tip()||(this.addShow=!0,this.formType=1,this.addForm=JSON.parse(JSON.stringify(d)))},getImgList(e,t,i){console.log("图片上传",{V:e,L:t,type:i}),this.defaultImages.map((t=>(t.type==i&&(t.image=e),t)))},getSummaries(e){const{columns:t,data:i}=e,r=[];return t.forEach(((e,t)=>{r[t]=1===t?this.stockListInfo.stockNum:""})),r},addStockList(){this.stockAddShow=!0,this.specimenStock=JSON.parse(JSON.stringify(p)),this.specimenStock.specimenId=this.selectedItemList[0].specimenId},sendName(e){this.currentName=e},supplierSelectChange(e){this.addForm.supplierId=e},addConform(e,t){console.log(e,t),e&&Object(r.a)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.addShow=!1,this.$emit("refresh")):this.$message.error(e.message)}))},edit(){if(this.$tip())return;if(!this.selectedItemList.length)return this.$message.error("请勾选一个样品再操作");const{orderSheetId:e}=this.selectedItemList[0];this.addShow=!0,this.orderSheetId=e,this.formType=2},getUnitNumber(e){e=e.split("");let t="",i="";for(let r=0;r<e.length;r++){let s=e[r];isNaN(s)?i+=s:t+=s}return{num:t,unit:i}},deleteItem(){this.deleteShow=!0},conformDelete(e){e&&this.selectedItemList.length>0?(console.log("删除"),console.log(e),this.deleteShow=!1,this.$emit("deleteConform")):this.$message.info("取消删除"),this.deleteShow=!1},refresh(){console.log("触发刷新"),this.$emit("refresh")}}},f=u,g=(i("33a6"),i("2877")),S=Object(g.a)(f,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"btnlist"},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.edit}},[e._v("编辑")]),t("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.deleteItem}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:e.typeManagement}},[e._v("分类管理")]),t("el-button",{attrs:{type:"primary"},on:{click:e.templateManagement}},[e._v("模板管理")])],1),t("typemanagement",{ref:"typemanagement0",attrs:{type:2}}),t("templatemanagement",{ref:"templatemanagement",attrs:{type:2}}),t("el-dialog",{attrs:{title:"提示",visible:e.deleteShow,width:"30%"},on:{"update:visible":function(t){e.deleteShow=t}}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),e.selectedItemList.length?t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("确认删除订货单")]):t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("请选择订货单再操作")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformDelete(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformDelete(1)}}},[e._v("确 定")])],1)]),t("detailForm",{attrs:{addShow:e.addShow,orderSheetId:e.orderSheetId,formType:e.formType},on:{"update:addShow":function(t){e.addShow=t},"update:add-show":function(t){e.addShow=t},addConform:e.addConform}})],1)}),[],!1,null,"6093c3ed",null),y=S.exports,w={name:"search",data:()=>({formInline:{progressType:"",page:1,rows:10,key:"",sheetTypeId:""},typeList:[],progressType:[{name:"全部",value:""},{name:"待下单",value:0},{name:"待发货",value:1},{name:"待送货",value:2},{name:"待换单",value:3},{name:"待收款",value:4},{name:"已收款",value:5}]}),mounted(){this.sheetTypeList()},methods:{sheetTypeList(){Object(r.s)().then((e=>{1==e.code&&(this.typeList=e.data)}))},onSubmit(){this.$emit("search",this.formInline)},clearbox(){this.formInline={specimenName:"",factoryNo:"",specimenTypeId:"",page:1,rows:10},this.$emit("search",this.formInline)}}},v=w,x=(i("fe77"),Object(g.a)(v,(function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"关键字:"}},[t("el-input",{staticClass:"inputbox",attrs:{placeholder:""},model:{value:e.formInline.key,callback:function(t){e.$set(e.formInline,"key",t)},expression:"formInline.key"}})],1),t("el-form-item",{attrs:{label:"状态:"}},[t("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择"},model:{value:e.formInline.progressType,callback:function(t){e.$set(e.formInline,"progressType",t)},expression:"formInline.progressType"}},e._l(e.progressType,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"分类:"}},[t("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择"},model:{value:e.formInline.sheetTypeId,callback:function(t){e.$set(e.formInline,"sheetTypeId",t)},expression:"formInline.sheetTypeId"}},e._l(e.typeList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.sheetTypeId}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearbox}},[e._v("清空")])],1)],1)],1)}),[],!1,null,"b0890564",null)),b=x.exports,I=(i("13d5"),i("2934")),O=i("d4a2"),_=i("4d86"),k=i("2f62"),L=i("94c5");const C=[{name:"orderName",fixed:!0,ch:"客户名称",width:"120"},{name:"orderDate",fixed:!0,ch:"订货日期",width:"110"},{name:"receiveDate",fixed:!1,ch:"收货日期",width:"110"},{name:"orderNo",fixed:!1,ch:"订单编号"},{name:"sheetTypeName",fixed:!1,ch:"分类"},{name:"totalMoney",fixed:!1,ch:"总金额"},{name:"actualMoney",fixed:!1,ch:"已收款"},{name:"progressName",fixed:!1,ch:"状态"},{name:"purchaseSheetCount",fixed:!1,ch:"关联采购单",width:"80"},{name:"createTime",fixed:!1,ch:"创建日期"},{name:"createName",fixed:!1,ch:"创建人"},{name:"predictReceiveDate",fixed:!1,ch:"预计收款日期",width:"110"}];C.push({name:"operation",fixed:"right",ch:"操作",width:280,align:"center",btnList:[{value:1,name:"详情"},{value:2,name:"更新进度"},{value:3,name:"下载PDF"},{value:4,name:"下载EXCEL"},{value:5,name:"更多",more:[{value:6,name:"下载原图"},{value:7,name:"订单备忘"},{value:8,name:"订单异常"},{value:9,name:"复制"},{value:10,name:"账期"},{value:11,name:"生成采购单"},{value:12,name:"全部送货"},{value:13,name:"备注图"}]}]});const F=[{name:"supplyUserName",fixed:!1,ch:"录入人"},{name:"createTime",fixed:!1,ch:"录入时间"},{name:"content",fixed:!1,ch:"备忘内容"},{name:"images",fixed:!1,ch:"备忘图片"}];F.push({name:"operation",fixed:"right",ch:"操作",width:120,align:"center",btnList:[{value:2,name:"编辑"},{value:1,name:"删除"}]});const N=[{name:"image",fixed:!1,ch:"图片"},{name:"fullName",fixed:!1,ch:"品名"},{name:"factoryNo",fixed:!1,ch:"工厂货号"},{name:"ctnsNum",fixed:!1,ch:"箱数"},{name:"exceptionType",fixed:!1,ch:"异常类型"},{name:"backBoxNum",fixed:!1,ch:"退货箱数"},{name:"exceptionDesc",fixed:!1,ch:"异常说明"},{name:"state",fixed:!1,ch:"异常状态"},{name:"supplyUserName",fixed:!1,ch:"录入人"},{name:"createTime",fixed:!1,ch:"时间"}];N.push({name:"operation",fixed:"right",ch:"操作",width:80,align:"center",btnList:[{value:1,name:"处理完成"}]});const D=[{name:"image",fixed:!1,ch:"图片"},{name:"specimenName",fixed:!1,ch:"品名"},{name:"factoryNo",fixed:!1,ch:"货号"},{name:"customerNo",fixed:!1,ch:"客号"},{name:"pack",fixed:!1,ch:"包装"},{name:"ctnsNum",fixed:!1,ch:"箱数"},{name:"pcsNum",fixed:!1,ch:"装箱数"},{name:"price",fixed:!1,ch:"单价"},{name:"volume",fixed:!1,ch:"体积"},{name:"totalNum",fixed:!1,ch:"总数量"},{name:"totalPrice",fixed:!1,ch:"总金额"},{name:"comment",fixed:!1,ch:"备注"}],T=[{name:"factoryName",fixed:!1,ch:"工厂名称"},{name:"purchaseDate",fixed:!1,ch:"采购日期"},{name:"receiveDate",fixed:!1,ch:"发货日期"},{name:"orderNo",fixed:!1,ch:"订单编号"},{name:"totalMoney",fixed:!1,ch:"总金额"},{name:"createTime",fixed:!1,ch:"创建时间"},{name:"createName",fixed:!1,ch:"创建人"}];T.push({name:"operation",fixed:"right",ch:"操作",width:80,align:"center",btnList:[{value:1,name:"详情"}]});var $={name:"tableList",components:{pagination:_.a,detailform:n.a,purchasefrom:O.a,purchaseSheetform:O.a},props:{tableInfo:{type:Object,default:{pageNo:1,limit:10,total:0,totalPage:0,rows:[]}}},computed:{...Object(k.c)({collapse:"settings/collapse"})},watch:{tableInfo:{handler(e){this.listQuery.pageNo=e.pageNo,this.listQuery.limit=e.pageSize},immediate:!0,deep:!0},multipleSelection:{handler(e){this.$emit("selectedItems",e)},immediate:!0,deep:!0}},data:()=>({lables2:F,addNewImage:"",addImageDialog:!0,showCommentImage:!1,commentImageList:[],lables5:T,orderSheetTimelineListTitle:"新增备忘",actualMoney:"",progressIndex:null,addOrderExceptionsFormRule:{specimenId:[{required:!0,message:"请选择样品",trigger:"change"}],exceptionType:[{required:!0,message:"请异常类型",trigger:"change"}],backBoxNum:[{required:!0,message:"请输入退货箱数",trigger:"blue"}],exceptionDesc:[{required:!0,message:"请输入备忘 ",trigger:"blur"}]},showBackBoxNum:!1,relativeOrderSheetList:[],purchaseSheetformShow:!1,conformUpdateProgressShow:!1,lables4:D,defaultForm:{},detailShow:!1,handleSelectionSpecimenList:[],selectSpecimenListShow:!1,orderSheetDateShow:!1,creditLevelList:[{value:1,lable:"准时"},{value:2,lable:"延期"},{value:3,lable:"严重拖欠"}],orderSheetDateForm:{paymentDay:"",totalMoney:"",orderSheetId:"",creditLevel:1,actualMoney:"",deductionMoney:"",deductionReason:""},orderExceptionsShow:!1,lables3:N,addNewOrderExceptionsShow:!1,addOrderExceptionsForm:{orderSheetId:"",specimenId:"",exceptionType:"",backBoxNum:"",exceptionDesc:""},specimenList:[],exceptionTypeList:["工厂没货","贴纸错误","工厂停厂","质量退货","发错货","延迟发货","延迟收货","少发漏发","漏下单"],OrderExceptionsList:[],addOrderSheetForm:{orderSheetId:"",content:"",images:""},addOrderSheetFormImages:[],currentOrderSheetDetail:{},addShow:!1,addNewOrderSheetTimeLineShow:!1,orderSheetTimelineListShow:!1,orderSheetTimelineList:[],updateProgressShow:!1,orderSheetId:"",formType:"",progressList:[],dialogVisible:!1,pictures:[],lables:C,multipleSelection:[],listQuery:{pageNo:1,limit:10},maxProgress:0,relativeOrderSheetShow:!1,purchaseSheetId:""}),filters:{filterValue:e=>0==e?"":e},methods:{addCommentImage(e,t,i){let r;if(console.log(arguments),99!=i){const e=this.commentImageList.splice(i,1),t=e[0].indexOf("order");r=e[0].substring(t),console.log(this.commentImageList,i)}else{const t=e.indexOf("order");r=e.substring(t),this.commentImageList.push(e),this.addNewImage="",this.addImageDialog=!1,setTimeout((()=>{this.addImageDialog=!0}))}Object(I.b)({orderSheetId:this.orderSheetId,type:99==i?1:2,imageKey:r}).then((e=>{1==e.code&&this.$message.success(e.message)}))},listenExptionType(e){console.log(e),-1!=e.indexOf("退货")?this.showBackBoxNum=!0:(this.showBackBoxNum=!1,this.addOrderExceptionsForm.backBoxNum="")},purchaseSheetCount(e){console.log(e);const t={orderSheetId:e.orderSheetId};this.relativeOrderSheetShow=!0,Object(r.o)(t).then((e=>{this.relativeOrderSheetList=e}))},hanldeClick2(e,t){this.purchaseSheetId=t,this.purchaseSheetformShow=!0,this.formType=3},conformUpdateProgress(e){this.conformUpdateProgressShow=!!e},getImgList(e){this.addOrderSheetForm.images=e},addPurchaseFormConform(e,t){this.detailShow=!1,this.$emit("addPurchaseFormConform",e,t)},handleSelectionSpecimen(e){this.handleSelectionSpecimenList=e},orderSheetSpecimenConform(e){if(e){const e=this.handleSelectionSpecimenList.reduce(((e,t)=>[...e,t.specimenId]),[]).join(",");Object(r.n)({specimenIds:e,orderSheetId:this.orderSheetId}).then((e=>{1==e.code&&(this.detailShow=!0,this.defaultForm=e.data,this.formType=5)}))}this.selectSpecimenListShow=!1},orderSheetDateFormConform(e){this.orderSheetDateForm.orderSheetId=this.orderSheetId,e?Object(r.j)(this.orderSheetDateForm).then((e=>{1==e.code&&(this.$message.success(e.message),this.$emit("refresh"),this.getOrderDetail(),this.orderSheetDateForm={paymentDay:"",orderSheetId:"",creditLevel:1,actualMoney:"",deductionMoney:"",deductionReason:""})})):this.orderSheetDateForm={paymentDay:"",orderSheetId:"",creditLevel:1,actualMoney:"",deductionMoney:"",deductionReason:""},this.orderSheetDateShow=!1},addNewOrderExceptionsShowConform(e){e?this.$refs.addOrderExceptionsForm.validate((e=>{e&&(this.addOrderExceptionsForm.orderSheetId=this.orderSheetId,Object(r.f)(this.addOrderExceptionsForm).then((e=>{1==e.code&&(this.$message.success(e.message),this.getOrderDetail()),this.addNewOrderExceptionsShow=!1,this.addOrderExceptionsForm={orderSheetId:"",specimenId:"",exceptionType:"",backBoxNum:"",exceptionDesc:""}})))})):(this.$refs.addOrderExceptionsForm.resetFields(),this.addOrderExceptionsForm={orderSheetId:"",specimenId:"",exceptionType:"",backBoxNum:"",exceptionDesc:""},this.addNewOrderExceptionsShow=!1)},addOrderExceptionsList(e){this.showBackBoxNum=!1,this.addNewOrderExceptionsShow=!0},addNewOrderSheetTimeLineConform(e){if(this.addOrderSheetForm.orderSheetId=this.orderSheetId,e){if(!this.addOrderSheetForm.content)return this.$message.error("请输入备忘内容");Object(r.k)(this.addOrderSheetForm).then((e=>{1==e.code&&(this.$message.success(e.message),this.addOrderSheetForm.content="",this.addOrderSheetForm.images="",this.getOrderSheetTimelineList())}))}else this.addOrderSheetForm.content="",this.addOrderSheetForm.images="";this.addNewOrderSheetTimeLineShow=!1},pageList(e){this.$emit("getList",e)},addOrderSheetTimelineList(){this.addNewOrderSheetTimeLineShow=!0,this.orderSheetTimelineListTitle="新增备忘",this.addOrderSheetForm.content="",this.addOrderSheetForm.images="",this.addOrderSheetForm.orderSheetTimelineId=""},addConform(e,t){e&&Object(r.a)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.addShow=!1,this.$emit("refresh")):this.$message.error(e.message)}))},updateOrderProgress(e,t){Object(r.u)({orderSheetId:this.orderSheetId,progress:e}).then((i=>{1==i.code&&(this.progressIndex=e,this.$message.success(i.message),Object(r.d)({orderSheetId:this.orderSheetId}).then((e=>{1==e.code&&this.updateProgress(e.data.progresses,t)})))}))},handleUpdateProgress(e){let t=this.progressList.reduce(((e,t)=>Math.max(e,t.progress||0)),0);console.log(t),5!=t&&(this.updateOrderProgress(t+1,e),this.conformUpdateProgress(0))},handleDelete(e,t){switch(console.log(e,t),e){case 1:{const e=()=>{Object(r.l)({orderSheetTimelineId:t.orderSheetTimelineId}).then((e=>{1==e.code&&(this.$message.success(e.message),this.getOrderSheetTimelineList())}))};this.$del(e);break}case 2:this.orderSheetTimelineListTitle="编辑备忘",this.addNewOrderSheetTimeLineShow=!0,this.addOrderSheetForm.orderSheetTimelineId=t.orderSheetTimelineId,this.addOrderSheetForm.content=t.content,this.addOrderSheetForm.images=t.images}},hanldeClick(e,t,i){switch(console.log(e,t,i),this.actualMoney="",this.orderSheetId=t,e){case 1:this.addShow=!0,this.formType=3;break;case 2:Object(r.d)({orderSheetId:t}).then((e=>{1==e.code&&(this.actualMoney=e.data.actualMoney,this.progressIndex=e.data.progress,this.updateProgress(e.data.progresses))}));break;case 3:if(this.$tip())return;this.downloadPdf(1);break;case 4:if(this.$tip())return;this.downloadPdf(2);break;case 6:if(this.$tip())return;this.sheetGenerateDetailImage();break;case 7:this.orderSheetTimelineListShow=!0,this.orderSheetTimelineListTitle="新增备忘",this.getOrderSheetTimelineList();break;case 8:this.orderExceptionsShow=!0,this.getOrderDetail();break;case 9:this.addShow=!0,this.formType=4;break;case 10:if("已收款"!==i.progressName)return void this.$message.warning("已收款订单才能设置账期额！");const e=()=>{this.orderSheetDateForm.paymentDay=this.currentOrderSheetDetail.paymentDay,this.orderSheetDateForm.creditLevel=Number(this.currentOrderSheetDetail.creditLevel)||1,this.orderSheetDateForm.totalMoney=this.currentOrderSheetDetail.totalPrice,this.orderSheetDateForm.actualMoney=this.currentOrderSheetDetail.actualMoney,this.orderSheetDateForm.deductionMoney=this.currentOrderSheetDetail.deductionMoney,this.orderSheetDateForm.deductionReason=this.currentOrderSheetDetail.deductionReason};this.getOrderDetail(e),this.orderSheetDateShow=!0;break;case 11:this.selectSpecimenListShow=!0,this.getSpecimenList(t);break;case 12:const s=()=>{Object(r.i)({orderSheetId:this.orderSheetId}).then((e=>{1==e.code?this.$message.success(e.message):this.$message.error(e.message)}))};this.$del(s,"确认设置所有货品已送货？");break;case 13:this.showCommentImage=!0,this.commentImageList=[],Object(r.d)({orderSheetId:t}).then((e=>{1==e.code&&(""!=e.data.commentImages?this.commentImageList=e.data.commentImages.split(","):this.commentImageList=[])}))}},getSpecimenList(e){Object(I.e)({orderSheetId:e}).then((e=>{1==e.code&&(this.specimenList=e.data.items)}))},handleDoExceptions(e,t){Object(r.e)({orderSheetExceptionId:t}).then((e=>{1==e.code&&(this.$message.success(e.message),this.getOrderDetail())}))},getOrderDetail(e){this.actualMoney="",Object(r.d)({orderSheetId:this.orderSheetId}).then((t=>{1==t.code&&(this.actualMoney=t.data.actualMoney,this.currentOrderSheetDetail=t.data,this.OrderExceptionsList=t.data.exceptions,this.specimenList=t.data.items,e&&e())}))},getOrderSheetTimelineList(){Object(r.m)({orderSheetId:this.orderSheetId}).then((e=>{e&&(this.orderSheetTimelineList=e)}))},downloadPdf(e){const t={orderSheetId:this.orderSheetId};Object(r.q)(t).then((t=>{if(1==t.code){let i;1==e?i=t.data.pdfUrl:2==e&&(i=t.data.excelUrl);const r=i.lastIndexOf("/")+1,s=i.slice(r);Object(o.a)(i,s).then((e=>{}))}}))},sheetGenerateDetailImage(){const e={orderSheetId:this.orderSheetId};Object(r.r)(e).then((e=>{1==e.code&&Object(o.a)(e.data.downloadUrl,e.data.saveName).then((e=>{}))}))},updateProgress(e,t){this.progressList=[];for(let e=1;e<6;e++){const t={content:this.getProgressName(e),timestamp:"",value:e};this.progressList.push(t)}if(this.progressList.forEach((t=>{e.forEach((e=>{e.progress==t.value?(t.color="rgb(82,197,255)",t.timestamp=e.time,t.progress=e.progress):(t.color="",t.timestamp)}))})),this.maxProgress=this.progressList.reduce(((e,t)=>Math.max(e,t.progress||0)),0),5==this.maxProgress&&t){const e=()=>{this.orderSheetDateForm.paymentDay=this.currentOrderSheetDetail.paymentDay,this.orderSheetDateForm.creditLevel=Number(this.currentOrderSheetDetail.creditLevel)||1,this.orderSheetDateForm.totalMoney=this.currentOrderSheetDetail.totalPrice,this.orderSheetDateForm.actualMoney=this.currentOrderSheetDetail.actualMoney,this.orderSheetDateForm.deductionMoney=this.currentOrderSheetDetail.deductionMoney,this.orderSheetDateForm.deductionReason=this.currentOrderSheetDetail.deductionReason};this.getOrderDetail(e),this.orderSheetDateShow=!0}this.$emit("refresh"),this.updateProgressShow=!0},getProgressName(e){let t;switch(e){case 1:t="工厂已下单";break;case 2:t="工厂已发货";break;case 3:t="已送货";break;case 4:t="已换单";break;case 5:t="已收款"}return t},setAttr(e){this.$nextTick((()=>{let t=document.getElementsByClassName("el-image-viewer__prev");t.length&&(t=[...t],e?t[0].setAttribute("style","left:40px !important"):t[0].setAttribute("style","left:290px !important"))}))},handleShow(){let e=this.collapse;this.setAttr(e)},handleSelectionChange(e){console.log(e),this.multipleSelection=e},showPictures(e){let t=e.split(",");this.pictures=t,console.log(t),this.dialogVisible=!0}}},E=$,P=(i("8335"),Object(g.a)(E,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tablelist",staticStyle:{"z-index":"2000"}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.rows,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),e._l(e.lables,(function(i,r){return t("el-table-column",{key:r,attrs:{"show-overflow-tooltip":"card"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",["operation"==i.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e._l(i.btnList,(function(i,s){return[s<=3?t("el-button",{key:s,attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(i.value,r.row.orderSheetId,r.row)}}},[e._v(e._s(i.name))]):e._e(),4==s?t("el-popover",{key:s,attrs:{placement:"bottom",width:"80",trigger:"hover"}},[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap",width:"100%"}},e._l(i.more,(function(i,s){return t("el-button",{key:s,staticStyle:{width:"100%"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick(i.value,r.row.orderSheetId,r.row)}}},[e._v(e._s(i.name))])})),1),t("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(e._s(i.name))])],1):e._e()]}))],2):"card"==i.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:r.row.card,"preview-src-list":[r.row.card]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"purchaseSheetCount"==i.name?t("div",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(t){return e.purchaseSheetCount(r.row)}}},[e._v(" "+e._s(e._f("filterValue")(r.row[String(i.name)]))+" ")]):"actualMoney"==i.name?t("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(r.row[String(i.name)])+" ")]):"progressName"==i.name?t("div",{style:{color:"已收款"==r.row[String(i.name)]?"red":"#606266"}},[e._v(" "+e._s(r.row[String(i.name)])+" ")]):"predictReceiveDate"==i.name?t("div",{staticStyle:{"font-weight":"bold"}},[e._v(" "+e._s(r.row[String(i.name)])+" ")]):t("div",[e._v(" "+e._s(r.row[String(i.name)])+" ")])])]}}],null,!0)})}))],2),t("el-dialog",{attrs:{title:"订单进度",visible:e.updateProgressShow,width:"40%"},on:{"update:visible":function(t){e.updateProgressShow=t}}},[t("div",{staticClass:"timeline-progress",staticStyle:{display:"flex"}},[t("el-timeline",e._l(e.progressList,(function(i,r){return t("el-timeline-item",{key:r,attrs:{color:i.color,timestamp:i.timestamp}},[t("span",{style:{color:"已收款"==i.content&&5==e.progressIndex?"red":i.timestamp?"rgb(82,197,255)":"#303133",fontWeight:"已收款"==i.content&&5==e.progressIndex?"bold":""}},[e._v(e._s("已收款"==i.content?i.content+" "+e.actualMoney:i.content))])])})),1),t("div",{staticStyle:{"margin-left":"20px"},style:{marginTop:50*e.maxProgress+3*e.maxProgress+"px"}},[e.maxProgress<5?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.conformUpdateProgress(1)}}},[e._v("更新进度")]):e._e()],1)],1)]),t("el-dialog",{attrs:{title:"关联订货单",visible:e.relativeOrderSheetShow,width:"60%"},on:{"update:visible":function(t){e.relativeOrderSheetShow=t}}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.relativeOrderSheetList,"tooltip-effect":"dark",border:""}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),e._l(e.lables5,(function(i,r){return t("el-table-column",{key:r,attrs:{"show-overflow-tooltip":"card"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",["operation"==i.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e._l(i.btnList,(function(i,s){return[t("el-button",{key:s,attrs:{type:"text",size:"small"},on:{click:function(t){return e.hanldeClick2(i.value,r.row.purchaseSheetId,r.row)}}},[e._v(e._s(i.name))])]}))],2):t("div",[e._v(" "+e._s(r.row[String(i.name)])+" ")])])]}}],null,!0)})}))],2)],1),t("el-dialog",{attrs:{title:"提示",visible:e.conformUpdateProgressShow,width:"30%"},on:{"update:visible":function(t){e.conformUpdateProgressShow=t}}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("确认将状态更新到 "+e._s(e.getProgressName(e.maxProgress+1)))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformUpdateProgress(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdateProgress(!0)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"订单备忘",visible:e.orderSheetTimelineListShow,width:"60%"},on:{"update:visible":function(t){e.orderSheetTimelineListShow=t}}},[t("div",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addOrderSheetTimelineList}},[e._v("新增")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.orderSheetTimelineList,"tooltip-effect":"dark",height:"400",border:""}},e._l(e.lables2,(function(i,r){return t("el-table-column",{key:r,attrs:{"show-overflow-tooltip":"images"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",["operation"==i.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e._l(i.btnList,(function(i,s){return[t("el-button",{key:s,attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDelete(i.value,r.row)}}},[e._v(e._s(i.name))])]}))],2):"images"==i.name?t("div",{staticClass:"demo-image__preview"},e._l(r.row.images.split(","),(function(i,r){return t("el-image",{key:r,staticStyle:{width:"48px",height:"48px",margin:"0 5px"},attrs:{src:i,"preview-src-list":[i]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])})),1):"orderCount"==i.name?t("div",{staticClass:"ordercountstyle"},[e._v(" "+e._s(r.row[String(i.name)])+" "),t("span",{on:{click:function(t){return e.orderNewCount(r.row.priceSheetId)}}},[e._v(" "+e._s(r.row.orderNewCount)+" ")])]):"lookCount"==i.name?t("div",{staticClass:"ordercountstyle"},[e._v(" "+e._s(r.row[String(i.name)])+" "),t("span",{on:{click:function(t){return e.lookNewCount(r.row.priceSheetId)}}},[e._v(" "+e._s(r.row.lookNewCount))])]):t("div",[e._v(" "+e._s(r.row[String(i.name)])+" ")])])]}}],null,!0)})})),1)],1),t("el-dialog",{attrs:{title:e.orderSheetTimelineListTitle,visible:e.addNewOrderSheetTimeLineShow,width:"40%","append-to-body":!0,"show-close":!1},on:{"update:visible":function(t){e.addNewOrderSheetTimeLineShow=t}}},[t("div",[t("span",[e._v("备忘内容:")]),t("el-input",{attrs:{type:"textarea"},model:{value:e.addOrderSheetForm.content,callback:function(t){e.$set(e.addOrderSheetForm,"content",t)},expression:"addOrderSheetForm.content"}})],1),t("div",[t("span",[e._v("备忘图片:")]),e.addNewOrderSheetTimeLineShow?t("upload-img",{attrs:{value:e.addOrderSheetForm.images,dist:"orderSheet",multiple:!0,limit:5},on:{input:e.getImgList}}):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.addNewOrderSheetTimeLineConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewOrderSheetTimeLineConform(1)}}},[e._v("确 定")])],1)])],1),t("el-dialog",{attrs:{title:"订单异常",visible:e.orderExceptionsShow,width:"60%"},on:{"update:visible":function(t){e.orderExceptionsShow=t}}},[t("div",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addOrderExceptionsList}},[e._v("添加异常")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.OrderExceptionsList,"tooltip-effect":"dark",height:"400",border:""}},e._l(e.lables3,(function(i,r){return t("el-table-column",{key:r,attrs:{"show-overflow-tooltip":"image"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",["operation"==i.name?t("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e._l(i.btnList,(function(i,s){return[t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==r.row.state,expression:"scope.row.state == 0"}],key:s,attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDoExceptions(i.value,r.row.orderSheetExceptionId,r.row)}}},[e._v(e._s(i.name))])]}))],2):"image"==i.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:r.row.image,"preview-src-list":[r.row.image]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"state"==i.name?t("div",{staticClass:"ordercountstyle"},[1==r.row[String(i.name)]?t("el-tag",{attrs:{type:"success"}},[e._v("已处理")]):0==r.row[String(i.name)]?t("el-tag",{attrs:{type:"danger"}},[e._v("未处理")]):e._e()],1):"lookCount"==i.name?t("div",{staticClass:"ordercountstyle"},[e._v(" "+e._s(r.row[String(i.name)])+" "),t("span",{on:{click:function(t){return e.lookNewCount(r.row.priceSheetId)}}},[e._v(" "+e._s(r.row.lookNewCount))])]):"exceptionDesc"==i.name?t("div",{staticStyle:{"white-space":"normal !important"}},[e._v(" "+e._s(r.row[String(i.name)])+" ")]):t("div",[e._v(" "+e._s(r.row[String(i.name)])+" ")])])]}}],null,!0)})})),1)],1),t("el-dialog",{attrs:{title:"新增异常",visible:e.addNewOrderExceptionsShow,width:"40%","append-to-body":!0,"show-close":!1},on:{"update:visible":function(t){e.addNewOrderExceptionsShow=t}}},[t("el-form",{ref:"addOrderExceptionsForm",staticClass:"demo-ruleForm",attrs:{model:e.addOrderExceptionsForm,rules:e.addOrderExceptionsFormRule,"label-width":"120px"}},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-form-item",{attrs:{label:"选择样品",prop:"specimenId"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addOrderExceptionsForm.specimenId,callback:function(t){e.$set(e.addOrderExceptionsForm,"specimenId",t)},expression:"addOrderExceptionsForm.specimenId"}},e._l(e.specimenList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.fullName,value:e.specimenId}})})),1)],1)],1),t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-form-item",{attrs:{label:"异常类型",prop:"exceptionType"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.listenExptionType},model:{value:e.addOrderExceptionsForm.exceptionType,callback:function(t){e.$set(e.addOrderExceptionsForm,"exceptionType",t)},expression:"addOrderExceptionsForm.exceptionType"}},e._l(e.exceptionTypeList,(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1)],1)],1),e.showBackBoxNum?t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-form-item",{attrs:{label:"退货箱数",prop:"backBoxNum"}},[t("el-input",{staticStyle:{width:"215px"},model:{value:e.addOrderExceptionsForm.backBoxNum,callback:function(t){e.$set(e.addOrderExceptionsForm,"backBoxNum",t)},expression:"addOrderExceptionsForm.backBoxNum"}})],1)],1):e._e(),t("div",{staticStyle:{"margin-bottom":"10px",display:"flex"}},[t("el-form-item",{attrs:{label:"备忘内容",prop:"exceptionDesc"}},[t("el-input",{staticStyle:{width:"215px"},attrs:{type:"textarea"},model:{value:e.addOrderExceptionsForm.exceptionDesc,callback:function(t){e.$set(e.addOrderExceptionsForm,"exceptionDesc",t)},expression:"addOrderExceptionsForm.exceptionDesc"}})],1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.addNewOrderExceptionsShowConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewOrderExceptionsShowConform(1)}}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{attrs:{title:"细节图",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap","justify-content":"center"}},e._l(e.pictures,(function(i){return t("el-image",{key:i,staticStyle:{width:"150px",height:"150px","margin-right":"10px","margin-bottom":"10px"},attrs:{src:i,lazy:!0}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])])})),1)]),t("el-dialog",{attrs:{title:"选择采购样品",visible:e.selectSpecimenListShow,width:"80%"},on:{"update:visible":function(t){e.selectSpecimenListShow=t}}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.specimenList,"tooltip-effect":"dark",height:"400",border:""},on:{"selection-change":e.handleSelectionSpecimen}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),e._l(e.lables4,(function(i,r){return t("el-table-column",{key:r,attrs:{"show-overflow-tooltip":"image"!=i.name&&"commentImage"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",["image"==i.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:r.row.image,"preview-src-list":[r.row.image]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"commentImage"==i.name?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:r.row.commentImage,"preview-src-list":[r.row.commentImage]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",[e._v(" "+e._s(r.row[String(i.name)])+" ")])])]}}],null,!0)})}))],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.orderSheetSpecimenConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.orderSheetSpecimenConform(1)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"账期",visible:e.orderSheetDateShow,width:"30%"},on:{"update:visible":function(t){e.orderSheetDateShow=t}}},[t("div",{staticClass:"ordersheetdate"},[t("span",[e._v("账期：")]),t("el-input",{staticStyle:{width:"215px"},model:{value:e.orderSheetDateForm.paymentDay,callback:function(t){e.$set(e.orderSheetDateForm,"paymentDay",t)},expression:"orderSheetDateForm.paymentDay"}})],1),t("div",{staticClass:"ordersheetdate"},[t("span",[e._v("信用级别：")]),t("div",{staticStyle:{width:"315px"}},e._l(e.creditLevelList,(function(i,r){return t("el-radio",{key:r,attrs:{label:i.value},model:{value:e.orderSheetDateForm.creditLevel,callback:function(t){e.$set(e.orderSheetDateForm,"creditLevel",t)},expression:"orderSheetDateForm.creditLevel"}},[e._v(e._s(i.lable))])})),1)]),t("div",{staticClass:"ordersheetdate"},[t("span",[e._v("本单销售额：")]),t("el-input",{staticStyle:{width:"215px"},attrs:{disabled:!0},model:{value:e.orderSheetDateForm.totalMoney,callback:function(t){e.$set(e.orderSheetDateForm,"totalMoney",t)},expression:"orderSheetDateForm.totalMoney"}})],1),t("div",{staticClass:"ordersheetdate"},[t("span",[e._v("实际到账：")]),t("el-input",{staticStyle:{width:"215px"},model:{value:e.orderSheetDateForm.actualMoney,callback:function(t){e.$set(e.orderSheetDateForm,"actualMoney",t)},expression:"orderSheetDateForm.actualMoney"}})],1),t("div",{staticClass:"ordersheetdate"},[t("span",[e._v("扣款金额：")]),t("el-input",{staticStyle:{width:"215px"},model:{value:e.orderSheetDateForm.deductionMoney,callback:function(t){e.$set(e.orderSheetDateForm,"deductionMoney",t)},expression:"orderSheetDateForm.deductionMoney"}})],1),t("div",{staticClass:"ordersheetdate"},[t("span",[e._v("扣款原因：")]),t("el-input",{staticStyle:{width:"215px"},attrs:{type:"textarea"},model:{value:e.orderSheetDateForm.deductionReason,callback:function(t){e.$set(e.orderSheetDateForm,"deductionReason",t)},expression:"orderSheetDateForm.deductionReason"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.orderSheetDateFormConform(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.orderSheetDateFormConform(1)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"备注图",visible:e.showCommentImage,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.showCommentImage=t}}},[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap",height:"500px"}},[e._l(e.commentImageList,(function(i,r){return t("div",{key:r,staticClass:"img-item"},[e.showCommentImage?t("upload-img",{attrs:{value:i,dist:"orderSheet",multiple:!0,limit:1},on:{input:function(t){return e.addCommentImage(...arguments,r)}}}):e._e()],1)})),t("div",{staticClass:"img-item"},[e.addImageDialog?t("upload-img",{attrs:{value:e.addNewImage,dist:"orderSheet",multiple:!0,limit:1},on:{input:function(t){return e.addCommentImage(...arguments,99)}}}):e._e()],1)],2)]),t("pagination",{attrs:{total:e.tableInfo.total||0,page:e.listQuery.pageNo||0,limit:e.listQuery.limit||0},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo || 0",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit || 0",t)},pagination:e.pageList}}),t("detailform",{attrs:{addShow:e.addShow,orderSheetId:e.orderSheetId,formType:e.formType},on:{"update:addShow":function(t){e.addShow=t},"update:add-show":function(t){e.addShow=t},addConform:e.addConform}}),t("purchasefrom",{attrs:{addShow:e.detailShow,formType:e.formType,defaultForm:e.defaultForm},on:{"update:addShow":function(t){e.detailShow=t},"update:add-show":function(t){e.detailShow=t},addConform:e.addPurchaseFormConform}}),t("purchaseSheetform",{attrs:{addShow:e.purchaseSheetformShow,purchaseSheetId:e.purchaseSheetId,formType:e.formType},on:{"update:addShow":function(t){e.purchaseSheetformShow=t},"update:add-show":function(t){e.purchaseSheetformShow=t}}})],1)}),[],!1,null,"47a7eda4",null)),M={name:"spacimen",components:{btnlist:y,search:b,tablelist:P.exports},data:()=>({tableInfo:{},formInline:{progressType:"",page:1,rows:10,key:"",sheetTypeId:""},selectedItemList:[]}),async created(){this.search(this.formInline)},methods:{addPurchaseFormConform(e,t){e&&Object(L.a)(t).then((e=>{1==e.code&&this.$message.success(e.message)}))},search(e){this.formInline=e,Object(r.p)(e).then((e=>{e&&(this.tableInfo=e)}))},getList(e){this.formInline=Object.assign(this.formInline,e),this.search(this.formInline)},selectedItems(e){this.selectedItemList=e},refresh(){this.search(this.formInline)},deleteConform(){let e=[];this.selectedItemList.forEach((t=>{e.push(t.orderSheetId)})),Object(r.b)({orderSheetId:e.toString()}).then((e=>{1==e.code?(this.$message.success(e.message),this.search(this.formInline)):this.$message.error(e.message)}))}},mounted(){}},j=M,B=Object(g.a)(j,(function(){var e=this,t=e._self._c;return t("div",[t("search",{on:{search:e.search}}),t("btnlist",{attrs:{selectedItemList:e.selectedItemList},on:{deleteConform:e.deleteConform,refresh:e.refresh}}),t("tablelist",{attrs:{tableInfo:e.tableInfo},on:{getList:e.getList,selectedItems:e.selectedItems,refresh:e.refresh,addPurchaseFormConform:e.addPurchaseFormConform}})],1)}),[],!1,null,"7239d0b4",null);t.default=B.exports},e79b:function(e,t,i){},f90f:function(e,t,i){},fe77:function(e,t,i){"use strict";i("1309")}}]);