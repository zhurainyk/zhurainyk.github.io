(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c7dfb00"],{"12cf":function(e,t,i){},"199f":function(e,t,i){},"1c04":function(e,t,i){"use strict";i("4987")},3202:function(e,t,i){"use strict";i.r(t);var a=i("778c"),s=i("2934"),o=i("eede"),l=i("91b6"),r=(i("61f7"),i("88e3"));let n={specimenId:"",specimenNo:"",factoryNo:"",brand:"",pack:"",price:"",priceArgot:"",pcsNum:"",pcsNumUnit:"",boxWeight:"",volume:"",moq:"",specimenName:"",size:"",gramWeight:"",texture:"",color:"",images:[],specimenTypeId:"",comment:"",specimenAreaIds:[],factorys:[]},c=[{type:1,image:"",title:"主图"},{type:2,image:"",title:"品牌图"},{type:3,image:"",title:"工厂货号图"},{type:4,image:"",title:"混色图"},{type:11,image:"",title:"细节图1"},{type:12,image:"",title:"细节图2"},{type:13,image:"",title:"细节图3"},{type:14,image:"",title:"细节图4"},{type:15,image:"",title:"细节图5"}],m={supplyFactoryId:"",supplyFactoryName:"",stockPrice:""};const d=[{name:"type",fixed:!0,ch:"状态"},{name:"stockNum",fixed:!0,ch:"数量"},{name:"avgPrice",fixed:!0,ch:"成本均价"},{name:"storageNo",fixed:!0,ch:"仓位号"},{name:"supplyUserName",fixed:!0,ch:"操作人"},{name:"time",fixed:!0,ch:"时间"}],p=[{name:"image1",fixed:!0,ch:"主图",width:"72"},{name:"specimenNo",fixed:!0,ch:"样品编号"},{name:"specimenName",fixed:!0,ch:"样品名称"},{name:"price",fixed:!0,ch:"销售单价"}],h={type:1,stockNum:"",avgPrice:"",storageNo:""};var u={name:"btnlist",props:{selectedItemList:{type:Array,default:()=>[]}},mounted(){this.getAllConfig()},watch:{batchChangePriceShow(e){e||this.$refs.dynamicValidateForm.resetFields()}},data(){const e=/^\d*\.?\d+$/g;return{loading:!1,newtypeShow:!1,typeName:"",regNumber:e,baseURL:a.baseURL,regNumberWithPoint:/^\d*\.\d+$/g,defaultImages:JSON.parse(JSON.stringify(c)),stockLabels:d,changePriceLabels:p,batchChangePriceShow:!1,stockShow:!1,stockAddShow:!1,dynamicValidateForm:{batchChangePriceList:[]},specimenStock:JSON.parse(JSON.stringify(h)),specimenConfig:{specimenNoAuto:!1,configInfo:{packs:[],colors:[],textures:[],gramWeights:[],pcsNumUnits:[],sizes:[]}},specimenTypeList:[],specimenAreaList:[],supplyFactorySelectList:[],stockListInfo:{items:[],stockNum:""},defaultFactorys:[JSON.parse(JSON.stringify(m))],formLabelWidth:"120px",addShow:!1,deleteShow:!1,demoDialog:!1,currentName:"",addForm:JSON.parse(JSON.stringify(n)),formInline:{},addRules:{specimenNo:[{required:!0,message:"请输入样品编号",trigger:"blur"}],price:[{required:!1,pattern:e,message:"只能输入小数",trigger:"blur"}],moq:[],pcsNum:[{required:!1,pattern:e,message:"只能输入数字",trigger:"blur"}],volume:[{required:!1,pattern:/^\d+([0-9]+|\.|\*)*\d$/g,message:"只能输入0-9 . * 示例：0.01*34*33",trigger:"blur"}],boxWeight:[{required:!1,pattern:e,message:"只能输入小数",trigger:"blur"}],specimenName:[{required:!0,message:"请输入品名",trigger:"blur"}]},packOptions:[],sizeUnitOptions:[],weightUnitOptions:[],textureOptions:[],colorOptions:[],supplierSelectList:[],supplierSelectloading:!1,optionList:[1],isManager:!1,earaShow:!1,earaName:""}},computed:{},methods:{getSizeUnit(e){this.addForm.sizeUnit=e,this.$nextTick((()=>{this.$forceUpdate()}))},getgramWeightUnit(e){this.addForm.gramWeightUnit=e,this.$nextTick((()=>{this.$forceUpdate()}))},addNewEara(){this.earaName="",this.earaShow=!0},addearaConform(){if(!this.earaName)return this.$message.error("请输入名称");Object(s.m)({name:this.earaName}).then((e=>{if(1==e.code){this.earaShow=!1;const t=e.data.specimenAreaId;Object(o.g)().then((e=>{1==e.code&&(this.specimenAreaList=e.data.items,this.addForm.specimenAreaIds.push(t))}))}}))},addNewType(){this.typeName="",this.newtypeShow=!0},addNewTypeConform(){if(!this.typeName)return this.$message.error("请输入名称");Object(s.q)({type:this.typeName}).then((e=>{if(1==e.code){this.newtypeShow=!1;const t=e.data.specimenTypeId;Object(o.o)().then((e=>{1==e.code&&(this.specimenTypeList=e.data.items,this.addForm.specimenTypeId=t)}))}}))},typeManagement(){this.$refs.typemanagement0.typeManagementShow=!0},clearNoNum(e){e.value=e.value.replace(/[^\d.]/g,""),e.value=e.value.replace(/^\./g,""),e.value=e.value.replace(/\.{2,}/g,"."),e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.value.indexOf(".")<0&&""!=e.value&&"0"==e.value.substr(0,1)&&2==e.value.length&&(e.value=parseFloat(e.value)),this.specimenStock.avgPrice=e.value},getAllConfig(e){Object(o.i)().then((t=>{1==t.code&&(this.specimenConfig.configInfo.packs=t.data.configInfo.packs,this.specimenConfig.configInfo.sizes=t.data.configInfo.sizes.filter((e=>e)),this.specimenConfig.configInfo.gramWeights=t.data.configInfo.gramWeights.filter((e=>e)),this.specimenConfig.configInfo.textures=t.data.configInfo.textures,this.specimenConfig.configInfo.colors=t.data.configInfo.colors,this.specimenConfig.configInfo.pcsNumUnits=t.data.configInfo.pcsNumUnits,this.addForm.sizeUnit=this.specimenConfig.configInfo.sizes[0],this.addForm.gramWeightUnit=this.specimenConfig.configInfo.gramWeights[0],this.isManager=1==t.data.factoryPermission,e&&(this.addForm.specimenNo=t.data.specimenNo))})),Object(o.o)().then((e=>{1==e.code&&(this.specimenTypeList=e.data.items)})),Object(o.g)().then((e=>{1==e.code&&(this.specimenAreaList=e.data.items)})),Object(r.g)().then((e=>{1==e.code&&(this.supplyFactorySelectList=e.data)}))},getfacotryInfo(e){const t=this.supplyFactorySelectList.filter((t=>t.supplyFactoryId===e))[0];this.defaultFactorys.forEach((i=>{i.supplyFactoryId===e&&(i.supplyFactoryName=t.name)}))},addFactoryList(){this.defaultFactorys.push(JSON.parse(JSON.stringify(m)))},deleteFactoryList(e){1==this.defaultFactorys.length?(this.defaultFactorys[0].stockPrice="",this.defaultFactorys[0].supplyFactoryId=""):this.defaultFactorys.splice(e,1)},toTop(e){if(this.defaultFactorys.length<=1)return;const t=this.defaultFactorys.splice(e,1);console.log({temp:t}),this.defaultFactorys.unshift(...t)},add(){this.addShow=!0,this.addForm=JSON.parse(JSON.stringify(n));this.getAllConfig((()=>{this.addForm.specimenNo=this.specimenConfig.specimenNo})),this.defaultImages=JSON.parse(JSON.stringify(c)),this.defaultFactorys=[JSON.parse(JSON.stringify(m))]},getImgList(e,t,i){console.log("图片上传",{V:e,L:t,type:i}),this.defaultImages.map((t=>(t.type==i&&(t.image=e),t)))},getStockList(){if(!this.selectedItemList.length)return this.$message.error("请勾选一个样品再操作");const{specimenId:e}=this.selectedItemList[0];Object(o.n)({specimenId:e}).then((e=>{1==e.code?(this.stockListInfo=e.data,this.stockShow=!0):this.$message.error(e.message)}))},getSummaries(e){const{columns:t,data:i}=e,a=[];return t.forEach(((e,t)=>{a[t]=0!=t?1===t?this.stockListInfo.stockNum:"":"库存结余"})),a},addStockList(){this.stockAddShow=!0,this.specimenStock=JSON.parse(JSON.stringify(h)),this.specimenStock.specimenId=this.selectedItemList[0].specimenId,Object(o.m)({specimenId:this.selectedItemList[0].specimenId}).then((e=>{1==e.code&&(this.specimenStock.avgPrice=e.data.avgPrice)}))},stockAddConform(){const e=this.specimenStock.stockNum;if(null===e||!this.regNumber.test(e))return this.$message.error("请输入数量");const t=this.specimenStock;Object(o.l)(t).then((e=>{1==e.code?(this.$message.success(e.message),this.getStockList()):this.$message.error(e.message),this.stockAddShow=!1}))},batchChangePrice(){this.selectedItemList.length&&(this.dynamicValidateForm.batchChangePriceList=JSON.parse(JSON.stringify(this.selectedItemList)),this.batchChangePriceShow=!0)},batchChangePriceConform(){this.$refs.dynamicValidateForm.validate((e=>{if(!e)return console.log("error submit!!"),!1;{const e=[];this.dynamicValidateForm.batchChangePriceList.forEach((t=>{e.push({specimenId:t.specimenId,price:t.price})})),Object(o.h)({specimens:JSON.stringify(e)}).then((e=>{1==e.code?(this.$message.success(e.message),this.dynamicValidateForm.batchChangePriceList=[],this.batchChangePriceShow=!1,this.$emit("refresh")):this.$message.error(e.message)}))}}))},sendName(e){this.currentName=e},supplierSelectChange(e){this.addForm.supplierId=e},addConform(){this.$refs.addForm.validate((e=>{if(!e)return console.log("error submit!!"),!1;{const e=JSON.parse(JSON.stringify(this.addForm));e.size=e.size+"@"+e.sizeUnit,e.gramWeight=e.gramWeight+"@"+e.gramWeightUnit,e.images=JSON.stringify(this.defaultImages),e.specimenAreaIds=e.specimenAreaIds.toString(),e.factorys=JSON.stringify(this.defaultFactorys),delete e.imageItems,delete e.sizeUnitOptions,console.log(e),Object(o.a)(e).then((e=>{1==e.code?(this.$message.success(e.message),this.addShow=!1,this.addForm=JSON.parse(JSON.stringify(n)),this.defaultImages=JSON.parse(JSON.stringify(c)),this.defaultFactorys=[JSON.parse(JSON.stringify(m))],this.$emit("refresh")):this.$message.error(e.message)}))}}))},closeRefForm(){this.$refs.addForm.resetFields()},edit(){if(!this.selectedItemList.length)return this.$message.error("请勾选一个样品再操作");const{specimenId:e}=this.selectedItemList[0];Object(o.j)({specimenId:e}).then((e=>{if(1==e.code){const t=e.data;if(t.size.indexOf("@")>-1){const e=t.size.split("@");t.size=e[0],t.sizeUnit=e[1]}if(t.gramWeight.indexOf("@")>-1){const e=t.gramWeight.split("@");t.gramWeight=e[0],t.gramWeightUnit=e[1]}this.defaultImages.map((e=>(t.imageItems.forEach((t=>{e.type==t.type&&(e.image=t.bigImageUrl||t.imageUrl)})),e))),t.specimenAreaIds=t.specimenAreaIds.indexOf(",")?t.specimenAreaIds.split(","):[t.specimenAreaIds],this.defaultFactorys=t.factorys,this.defaultFactorys.length||this.defaultFactorys.push(JSON.parse(JSON.stringify(m))),this.addForm=t}else this.$message.error(e.message)})),this.addShow=!0},getUnitNumber(e){e=e.split("");let t="",i="";for(let a=0;a<e.length;a++){let s=e[a];isNaN(s)?i+=s:t+=s}return{num:t,unit:i}},deleteItem(){this.deleteShow=!0},conformDelete(e){e&&this.selectedItemList.length>0?(console.log("删除"),console.log(e),this.deleteShow=!1,this.$emit("deleteConform")):this.$message.info("取消删除"),this.deleteShow=!1},refresh(){console.log("触发刷新"),this.$emit("refresh")},importMuchShow(){this.demoDialog=!0,this.currentName=""},importMuch(){const e=this.loadFn("正在努力导入样品，可能需要几分钟，请耐心等待...");Object(o.f)(this.$refs.uploadfile.formData).then((t=>{1==t.code?(this.demoDialog=!1,this.currentName="",this.refresh(),this.$message.success(t.message)):this.$message.error(t.message),e.close()}),(()=>{e.close()}))},download(){Object(o.c)().then((e=>{if(1==e.code){this.$message.success(e.message);const t=e.data.templateDownloadUrl,i=t.lastIndexOf("/")+1;Object(l.a)(t,t.slice(i)).then((e=>{}))}}))},priceSheetDownloadAll(){const e=this.loadFn(" 正在处理，请稍候..."),t=()=>e.close();Object(o.d)().then((e=>{if(1==e.code){const i=e.data.downloadUrl,a=i.lastIndexOf("/")+1;Object(l.a)(i,i.slice(a),t)}}))}}},f=u,g=(i("3a16"),i("2877")),b=Object(g.a)(f,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"btnlist"},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.edit}},[e._v("编辑")]),t("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.deleteItem}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.getStockList}},[e._v("库存")]),t("el-button",{attrs:{type:"primary",disabled:!e.selectedItemList.length},on:{click:e.batchChangePrice}},[e._v("批量修改价格")]),t("el-button",{attrs:{type:"warning"},on:{click:e.importMuchShow}},[e._v("批量导入")]),t("el-button",{attrs:{type:"warning"},on:{click:e.download}},[e._v("下载模板")]),t("el-button",{attrs:{type:"warning"},on:{click:e.priceSheetDownloadAll}},[e._v("下载所有样品报价单")]),t("el-button",{attrs:{type:"primary"},on:{click:e.typeManagement}},[e._v("分类管理")])],1),t("typemanagement",{ref:"typemanagement0",attrs:{type:0}}),t("el-dialog",{attrs:{title:""==e.addForm.specimenId?"新增样品":"编辑样品",visible:e.addShow,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addShow=t},closed:e.closeRefForm}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"样品编号","label-width":e.formLabelWidth,prop:"specimenNo"}},[t("el-input",{attrs:{disabled:1!=e.specimenConfig.manualSpecimenNo,autocomplete:"off",placeholder:"请输入样品编号"},model:{value:e.addForm.specimenNo,callback:function(t){e.$set(e.addForm,"specimenNo",t)},expression:"addForm.specimenNo"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"工厂货号","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入工厂货号"},model:{value:e.addForm.factoryNo,callback:function(t){e.$set(e.addForm,"factoryNo",t)},expression:"addForm.factoryNo"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"品牌","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入品牌"},model:{value:e.addForm.brand,callback:function(t){e.$set(e.addForm,"brand",t)},expression:"addForm.brand"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"包装","label-width":e.formLabelWidth}},[t("el-select",{attrs:{clearable:"",filterable:"","allow-create":"",placeholder:"请选择或输入包装"},model:{value:e.addForm.pack,callback:function(t){e.$set(e.addForm,"pack",t)},expression:"addForm.pack"}},e._l(e.specimenConfig.configInfo.packs.filter((e=>e&&e)),(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"单价","label-width":e.formLabelWidth,prop:"price"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入单价"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"MOQ","label-width":e.formLabelWidth,prop:"moq"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入MOQ"},model:{value:e.addForm.moq,callback:function(t){e.$set(e.addForm,"moq",t)},expression:"addForm.moq"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"装箱数","label-width":e.formLabelWidth,prop:"pcsNum"}},[t("div",{staticStyle:{display:"flex"}},[t("el-input",{staticStyle:{"flex-grow":"1","margin-right":"10px"},attrs:{placeholder:"请输入装箱数",autocomplete:"off"},model:{value:e.addForm.pcsNum,callback:function(t){e.$set(e.addForm,"pcsNum",t)},expression:"addForm.pcsNum"}}),t("el-select",{staticStyle:{width:"120px"},model:{value:e.addForm.pcsNumUnit,callback:function(t){e.$set(e.addForm,"pcsNumUnit",e._n(t))},expression:"addForm.pcsNumUnit"}},e._l(e.specimenConfig.configInfo.pcsNumUnits.filter((e=>e&&e)),(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1)],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"体积","label-width":e.formLabelWidth,prop:"volume"}},[t("el-input",{attrs:{placeholder:"请输入体积",autocomplete:"off"},model:{value:e.addForm.volume,callback:function(t){e.$set(e.addForm,"volume",t)},expression:"addForm.volume"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{staticStyle:{display:"flex"},attrs:{span:8}},[t("el-form-item",{attrs:{label:"分类","label-width":e.formLabelWidth}},[t("el-select",{model:{value:e.addForm.specimenTypeId,callback:function(t){e.$set(e.addForm,"specimenTypeId",t)},expression:"addForm.specimenTypeId"}},e._l(e.specimenTypeList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.type,value:e.specimenTypeId}})})),1)],1),t("div",{staticStyle:{"margin-left":"20px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addNewType}},[e._v("新增")])],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"整箱毛重","label-width":e.formLabelWidth,prop:"boxWeight"}},[t("el-input",{staticClass:"unitAfter",attrs:{placeholder:"请输入整箱毛重",autocomplete:"off"},model:{value:e.addForm.boxWeight,callback:function(t){e.$set(e.addForm,"boxWeight",t)},expression:"addForm.boxWeight"}})],1)],1),t("el-col",{staticStyle:{display:"flex"},attrs:{span:8}},[t("el-form-item",{attrs:{label:"销往区域","label-width":e.formLabelWidth,prop:"specimenAreaIds"}},[t("el-select",{attrs:{multiple:""},model:{value:e.addForm.specimenAreaIds,callback:function(t){e.$set(e.addForm,"specimenAreaIds",t)},expression:"addForm.specimenAreaIds"}},e._l(e.specimenAreaList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.specimenAreaId}})})),1)],1),t("div",{staticStyle:{"margin-left":"20px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addNewEara}},[e._v("新增")])],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"品名","label-width":e.formLabelWidth,prop:"specimenName"}},[t("el-input",{attrs:{placeholder:"请输入品名",autocomplete:"off"},model:{value:e.addForm.specimenName,callback:function(t){e.$set(e.addForm,"specimenName",t)},expression:"addForm.specimenName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"尺寸","label-width":e.formLabelWidth,prop:"size"}},[t("div",{staticStyle:{display:"flex"}},[t("el-input",{staticStyle:{"flex-grow":"1","margin-right":"10px"},attrs:{placeholder:"请输入尺寸",autocomplete:"off"},model:{value:e.addForm.size,callback:function(t){e.$set(e.addForm,"size",t)},expression:"addForm.size"}}),t("el-select",{staticStyle:{width:"120px"},on:{change:e.getSizeUnit},model:{value:e.addForm.sizeUnit,callback:function(t){e.$set(e.addForm,"sizeUnit",t)},expression:"addForm.sizeUnit"}},e._l(e.specimenConfig.configInfo.sizes,(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1)],1)])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"克重","label-width":e.formLabelWidth}},[t("div",{staticStyle:{display:"flex"}},[t("el-input",{staticStyle:{"flex-grow":"1","margin-right":"10px"},attrs:{placeholder:"请输入克重",autocomplete:"off"},model:{value:e.addForm.gramWeight,callback:function(t){e.$set(e.addForm,"gramWeight",t)},expression:"addForm.gramWeight"}}),t("el-select",{staticStyle:{width:"120px"},on:{change:e.getgramWeightUnit},model:{value:e.addForm.gramWeightUnit,callback:function(t){e.$set(e.addForm,"gramWeightUnit",t)},expression:"addForm.gramWeightUnit"}},e._l(e.specimenConfig.configInfo.gramWeights,(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1)],1)])],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"材质","label-width":e.formLabelWidth,prop:"texture"}},[t("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:"","allow-create":""},model:{value:e.addForm.texture,callback:function(t){e.$set(e.addForm,"texture",t)},expression:"addForm.texture"}},e._l(e.specimenConfig.configInfo.textures.filter((e=>e&&e)),(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"颜色","label-width":e.formLabelWidth,prop:"color"}},[t("el-select",{attrs:{clearable:"",filterable:"","allow-create":""},model:{value:e.addForm.color,callback:function(t){e.$set(e.addForm,"color",t)},expression:"addForm.color"}},e._l(e.specimenConfig.configInfo.colors.filter((e=>e&&e)),(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"comment"}},[t("el-input",{attrs:{placeholder:"请输入备注",autocomplete:"off"},model:{value:e.addForm.comment,callback:function(t){e.$set(e.addForm,"comment",t)},expression:"addForm.comment"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(e.defaultImages,(function(i){return t("div",{key:i.type,staticClass:"img-item"},[e.addShow?t("upload-img",{attrs:{value:i.image,dist:"specimen",multiple:!0,limit:1},on:{input:function(t){return e.getImgList(...arguments,i.type)}}}):e._e(),t("span",[e._v(e._s(i.title))])],1)})),0)])],1)],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isManager,expression:"isManager"}],attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("div",{staticStyle:{color:"red","text-indent":"20px","padding-bottom":"10px"}},[e._v(" 仅管理员可见 ")])])],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isManager,expression:"isManager"}],attrs:{gutter:20}},[t("el-col",{attrs:{span:20}},[t("div",{staticClass:"factoryPermission"},[t("div",{staticClass:"option-body"},[t("div",{staticClass:"tab-title"},[t("div",{staticClass:"item-cell"},[e._v("进货价")]),t("div",{staticClass:"item-cell"},[e._v("供应商")]),t("div",{staticClass:"item-cell"},[e._v("操作")])]),e._l(e.defaultFactorys,(function(i,a){return t("div",{key:a,staticClass:"option-list"},[t("div",{staticClass:"item-cell"},[t("el-input",{staticClass:"inputnumber",staticStyle:{width:"120px"},attrs:{type:"number",placeholder:"请输入进货价"},model:{value:i.stockPrice,callback:function(t){e.$set(i,"stockPrice",t)},expression:"item.stockPrice"}})],1),t("div",{staticClass:"item-cell"},[t("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",placeholder:"请选择供应商"},on:{change:e.getfacotryInfo},model:{value:i.supplyFactoryId,callback:function(t){e.$set(i,"supplyFactoryId",t)},expression:"item.supplyFactoryId"}},e._l(e.supplyFactorySelectList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.supplyFactoryId}})})),1)],1),t("div",{staticClass:"item-cell"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.toTop(a)}}},[e._v("置顶")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteFactoryList(a)}}},[e._v("删除")])],1)])}))],2),t("div",{staticClass:"addbutton"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addFactoryList}},[e._v("添加")])],1)])])],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isManager,expression:"isManager"}],attrs:{gutter:24}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"价格暗语","label-width":e.formLabelWidth,prop:"priceArgot"}},[t("el-input",{attrs:{placeholder:"请输入价格暗语",autocomplete:"off"},model:{value:e.addForm.priceArgot,callback:function(t){e.$set(e.addForm,"priceArgot",t)},expression:"addForm.priceArgot"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addShow=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addConform}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.deleteShow,width:"30%"},on:{"update:visible":function(t){e.deleteShow=t}}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255, 153, 0)","font-size":"24px",transform:"rotate(-15deg)"}}),e.selectedItemList.length?t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("确认删除样品")]):t("span",{staticStyle:{"margin-left":"10px","font-size":"18px"}},[e._v("请选择样品再操作")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.conformDelete(0)}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.conformDelete(1)}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"库存",visible:e.stockShow,width:"60%"},on:{"update:visible":function(t){e.stockShow=t}}},[t("div",[t("div",{staticClass:"addstock"},[t("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.addStockList}},[e._v("添加")]),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.stockListInfo.items,"tooltip-effect":"dark",border:"","summary-method":e.getSummaries,"show-summary":""}},e._l(e.stockLabels,(function(i,a){return t("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"card"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",["type"==i.name?t("div",[t("el-tag",{attrs:{type:1==a.row[String(i.name)]?"danger":"success"}},[e._v(e._s(a.row.typeName))])],1):t("div",[e._v(" "+e._s(a.row[String(i.name)])+" ")])])]}}],null,!0)})})),1),t("el-dialog",{attrs:{title:"新增库存",visible:e.stockAddShow,width:"400px","append-to-body":""},on:{"update:visible":function(t){e.stockAddShow=t}}},[t("div",[t("div",{staticClass:"additem"},[t("div",{staticClass:"add-left"},[t("el-radio",{attrs:{label:1},model:{value:e.specimenStock.type,callback:function(t){e.$set(e.specimenStock,"type",t)},expression:"specimenStock.type"}},[e._v("入库")]),t("el-radio",{attrs:{label:2},model:{value:e.specimenStock.type,callback:function(t){e.$set(e.specimenStock,"type",t)},expression:"specimenStock.type"}},[e._v("出库")])],1),t("div",{staticClass:"add-right"},[t("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"输入数量"},model:{value:e.specimenStock.stockNum,callback:function(t){e.$set(e.specimenStock,"stockNum",e._n(t))},expression:"specimenStock.stockNum"}})],1)]),t("div",{staticClass:"additem"},[t("div",{staticClass:"add-left"},[e._v(" 成本均价： ")]),t("div",{staticClass:"add-right"},[t("el-input",{staticStyle:{width:"120px"},attrs:{min:0,precision:2},on:{keyup:function(t){e.specimenStock.avgPrice=e.specimenStock.avgPrice.replace(/\D/gi,"")}},model:{value:e.specimenStock.avgPrice,callback:function(t){e.$set(e.specimenStock,"avgPrice",t)},expression:"specimenStock.avgPrice"}})],1)]),t("div",{staticClass:"additem"},[t("div",{staticClass:"add-left"},[e._v(" 仓位号： ")]),t("div",{staticClass:"add-right"},[t("el-input",{staticStyle:{width:"120px"},on:{keyup:function(t){e.specimenStock.storageNo=e.specimenStock.storageNo.replace(/\D/gi,"")}},model:{value:e.specimenStock.storageNo,callback:function(t){e.$set(e.specimenStock,"storageNo",t)},expression:"specimenStock.storageNo"}})],1)])]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.stockAddShow=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.stockAddConform}},[e._v("确 定")])],1)])],1)])]),t("el-dialog",{attrs:{title:"批量修改价格",visible:e.batchChangePriceShow},on:{"update:visible":function(t){e.batchChangePriceShow=t}}},[t("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.dynamicValidateForm.batchChangePriceList,"tooltip-effect":"dark",border:""}},e._l(e.changePriceLabels,(function(i,a){return t("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"image1"!=i.name,label:i.ch,prop:i.name,fixed:i.fixed,width:i.width||"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[-1!=i.name.indexOf("image1")?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a.row[i.name],"preview-src-list":[a.row[i.name]]}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"price"==i.name?t("div",[t("el-form-item",{attrs:{prop:"batchChangePriceList."+a.$index+"."+i.name,rules:[{required:!0,message:"请输入价格"},{required:!0,pattern:e.regNumber,message:"请输入正确的价格",trigger:"blur"}]}},[t("el-input",{staticClass:"inputcenter",model:{value:a.row[String(i.name)],callback:function(t){e.$set(a.row,String(i.name),t)},expression:"scope.row[String(item.name)]"}})],1)],1):t("div",[e._v(" "+e._s(a.row[String(i.name)])+" ")])])]}}],null,!0)})})),1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.batchChangePriceShow=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.batchChangePriceConform}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"批量导入",visible:e.demoDialog,"append-to-body":"",width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.demoDialog=t}}},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"选择文件"}},[t("upload-file",{ref:"uploadfile",attrs:{loadUrl:e.baseURL+"/admin/shipmentBatchImport",noParams:!0,fileKey:"excelFile"},on:{sendName:e.sendName}},[t("el-button",{attrs:{type:"primary"}},[e._v("上传文件")])],1),e.currentName?t("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.currentName))]):e._e()],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.importMuch}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.demoDialog=!1}}},[e._v("取消")])],1)],1),t("el-dialog",{attrs:{title:"新增分类",visible:e.newtypeShow,"append-to-body":"",width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.newtypeShow=t}}},[t("span",[e._v("分类名称：")]),t("el-input",{staticStyle:{display:"inline-block",width:"250px"},model:{value:e.typeName,callback:function(t){e.typeName=t},expression:"typeName"}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addNewTypeConform}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.newtypeShow=!1}}},[e._v("取消")])],1)],1),t("el-dialog",{attrs:{title:"新增区域",visible:e.earaShow,"append-to-body":"",width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.earaShow=t}}},[t("span",[e._v("区域名称：")]),t("el-input",{staticStyle:{display:"inline-block",width:"250px"},model:{value:e.earaName,callback:function(t){e.earaName=t},expression:"earaName"}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addearaConform}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.earaShow=!1}}},[e._v("取消")])],1)],1)],1)}),[],!1,null,"1f238f5c",null),y=b.exports,v={name:"search",data:()=>({formInline:{specimenName:"",factoryNo:"",specimenTypeId:"",page:1,rows:10},typeList:[]}),mounted(){this.specimenTypeList()},methods:{specimenTypeList(){Object(o.o)().then((e=>{1==e.code&&(this.typeList=e.data.items)}))},onSubmit(){this.$emit("search",this.formInline)},clearbox(){this.formInline={specimenName:"",factoryNo:"",specimenTypeId:"",page:1,rows:10},this.$emit("search",this.formInline)}}},w=v,S=(i("1c04"),Object(g.a)(w,(function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"样品名称:"}},[t("el-input",{staticClass:"inputbox",attrs:{placeholder:""},model:{value:e.formInline.specimenName,callback:function(t){e.$set(e.formInline,"specimenName",t)},expression:"formInline.specimenName"}})],1),t("el-form-item",{attrs:{label:"工厂货号:"}},[t("el-input",{staticClass:"inputbox",attrs:{placeholder:""},model:{value:e.formInline.factoryNo,callback:function(t){e.$set(e.formInline,"factoryNo",t)},expression:"formInline.factoryNo"}})],1),t("el-form-item",{attrs:{label:"样品分类:"}},[t("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择"},model:{value:e.formInline.specimenTypeId,callback:function(t){e.$set(e.formInline,"specimenTypeId",t)},expression:"formInline.specimenTypeId"}},e._l(e.typeList,(function(e){return t("el-option",{key:e.specimenTypeId,attrs:{label:e.type,value:e.specimenTypeId}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearbox}},[e._v("清空")])],1)],1)],1)}),[],!1,null,"cc86006c",null)),x=S.exports,k=i("4d86"),I=i("2f62");const N=[{name:"bigImage1",fixed:!0,ch:"主图",width:"72"},{name:"specimenNo",fixed:!0,ch:"样品编号"},{name:"specimenName",fixed:!0,width:"150",ch:"样品名称"},{name:"factoryNo",fixed:!0,ch:"工厂货号"},{name:"specimenType",fixed:!0,ch:"分类"},{name:"specimenAreas",fixed:!1,ch:"销往区域"},{name:"price",fixex:!1,ch:"销售单价"},{name:"brand",fixex:!1,ch:"品牌"},{name:"pack",fixex:!1,ch:"包装"},{name:"stockNum",fixex:!1,ch:"库存"},{name:"moq",fixex:!1,width:"100",ch:"最小订货量"},{name:"pcsNum",fixex:!1,ch:"装箱数"},{name:"volume",fixex:!1,ch:"体积"},{name:"size",fixex:!1,ch:"尺寸"},{name:"sizeUnit",fixex:!1,ch:"尺寸单位"},{name:"gramWeight",fixex:!1,ch:"克重"},{name:"gramWeightUnit",fixex:!1,ch:"克重单位"},{name:"texture",fixex:!1,ch:"材质"},{name:"color",fixex:!1,ch:"颜色"},{name:"comment",fixex:!1,ch:"备注"},{name:"image11",ch:"细节图1",width:"72"},{name:"image12",ch:"细节图2",width:"72"},{name:"image13",ch:"细节图3",width:"72"},{name:"image14",ch:"细节图4",width:"72"},{name:"image15",ch:"细节图5",width:"72"},{name:"bigImage2",ch:"品牌图",width:"72"},{name:"bigImage3",ch:"工厂货号图",width:"72"},{name:"image4",ch:"混色图",width:"72"}];var F={name:"tableList",components:{pagination:k.a},props:{tableInfo:{type:Object,default:{pageNo:1,limit:10,total:0,totalPage:0,rows:[]}}},computed:{...Object(I.c)({collapse:"settings/collapse"})},watch:{tableInfo:{handler(e){this.listQuery.pageNo=e.pageNo,this.listQuery.limit=e.pageSize},immediate:!0,deep:!0},multipleSelection:{handler(e){this.$emit("selectedItems",e)},immediate:!0,deep:!0}},data:()=>({dialogVisible:!1,pictures:[],lables:N,multipleSelection:[],listQuery:{pageNo:1,limit:10}}),methods:{pageList(e){this.$emit("getList",e)},setAttr(e){this.$nextTick((()=>{let t=document.getElementsByClassName("el-image-viewer__prev");t.length&&(t=[...t],e?t[0].setAttribute("style","left:40px !important"):t[0].setAttribute("style","left:290px !important"))}))},handleShow(){let e=this.collapse;this.setAttr(e)},handleSelectionChange(e){console.log(e),this.multipleSelection=e},showPictures(e){let t=e.split(",");this.pictures=t,console.log(t),this.dialogVisible=!0}}},C=F,_=(i("65ce"),Object(g.a)(C,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tablelist",staticStyle:{"z-index":"2000"}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.rows,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"45"}}),e._l(e.lables,(function(i,a){return t("el-table-column",{key:a,attrs:{"show-overflow-tooltip":-1==i.name.indexOf("mage"),label:i.ch,prop:i.name,width:i.width||"auto",align:"center",fixed:i.fixed},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[-1!=i.name.indexOf("mage")?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"48px",height:"48px"},attrs:{src:a.row[i.name],"preview-src-list":[a.row[i.name]]},on:{click:e.handleShow}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):t("div",[e._v(" "+e._s(a.row[String(i.name)])+" ")])])]}}],null,!0)})}))],2),t("el-dialog",{attrs:{title:"细节图",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap","justify-content":"center"}},e._l(e.pictures,(function(i){return t("el-image",{key:i,staticStyle:{width:"150px",height:"150px","margin-right":"10px","margin-bottom":"10px"},attrs:{src:i,lazy:!0}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])])})),1)]),t("pagination",{attrs:{total:e.tableInfo.total||0,page:e.listQuery.pageNo||0,limit:e.listQuery.limit||0},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo || 0",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit || 0",t)},pagination:e.pageList}})],1)}),[],!1,null,"1dfbe29a",null)),L=_.exports,O=(i("c24f"),{name:"spacimen",components:{btnlist:y,search:x,tablelist:L},data:()=>({tableInfo:{},formInline:{specimenName:"",page:1,rows:10,factoryNo:"",specimenTypeId:""},selectedItemList:[]}),created(){this.search(this.formInline)},methods:{search(e){this.formInline=e,Object(o.e)(e).then((e=>{e&&(this.tableInfo=e)}))},getList(e){this.formInline=Object.assign(this.formInline,e),this.search(this.formInline)},selectedItems(e){this.selectedItemList=e},refresh(){this.search(this.formInline)},deleteConform(){let e=[];this.selectedItemList.forEach((t=>{e.push(t.specimenId)})),Object(o.b)({specimenIds:e.toString()}).then((e=>{1==e.code?(this.$message.success(e.message),this.search(this.formInline)):this.$message.error(e.message)}))}},mounted(){}}),$=O,W=Object(g.a)($,(function(){var e=this,t=e._self._c;return t("div",[t("search",{on:{search:e.search}}),t("btnlist",{attrs:{selectedItemList:e.selectedItemList},on:{deleteConform:e.deleteConform,refresh:e.refresh}}),t("tablelist",{attrs:{tableInfo:e.tableInfo},on:{getList:e.getList,selectedItems:e.selectedItems}})],1)}),[],!1,null,"08583ddb",null);t.default=W.exports},"3a16":function(e,t,i){"use strict";i("199f")},4987:function(e,t,i){},"65ce":function(e,t,i){"use strict";i("12cf")},"88e3":function(e,t,i){"use strict";i.d(t,"e",(function(){return s})),i.d(t,"a",(function(){return o})),i.d(t,"f",(function(){return l})),i.d(t,"b",(function(){return r})),i.d(t,"d",(function(){return n})),i.d(t,"g",(function(){return c})),i.d(t,"c",(function(){return m}));var a=i("b775");function s(e){return Object(a.a)({url:"/admin/supplyFactoryList",method:"get",params:e})}function o(e){return Object(a.a)({url:"/supplyApp/supplyFactorySave",method:"get",params:e})}function l(e){return Object(a.a)({url:"/admin/supplyFactoryImport",method:"post",data:e})}function r(e){return Object(a.a)({url:"/supplyApp/supplyFactoryDelete",method:"get",params:e})}function n(e){return Object(a.a)({url:"/supplyApp/supplyFactoryDetail",method:"get",params:e})}function c(){return Object(a.a)({url:"/admin/supplyFactorySelectList",method:"get"})}function m(e){return Object(a.a)({url:"/admin/purchaseSheetListBySupplyFactoryId",method:"get",params:e})}}}]);